webpackJsonp([0,3],{1077:function(e,t,n){e.exports=n(475)},114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.countingRecursion="",this.coefficients={Monday:1,Tuesday:1,Wednesday:1,Thursday:1,Friday:1,Saturday:1,Sunday:1,Usage:1},this.isOverridden=!1}return e}();t.Product=i},115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e}();t.Unit=i},162:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(272),a=n(38),d=n(2),c=function(){function e(e,t){this.messageService=e,this.winRef=t,this._unitSupplier="",this._unitConsumer="",this._isOverallPrint=!1,this._receivers=[],this._deliveryModels={},this._showWarningMessage=!0,this.currentDate=new Date,this._window=t.nativeWindow}return e.prototype.getItems=function(){return this._isOverallPrint?this.overallItems():this.eachUnitItems()},e.prototype.eachUnitItems=function(){for(var e=[],t=0,n=this._deliveryModels[this._unitConsumer].deliveries;t<n.length;t++){var i=n[t],r={};r.productCode=i.productCode,r.productName=i.productName,r.realDelivery=i.realDelivery,r.currentStock=i.stock,r.stockAfterDelivery=i.realDelivery+i.stock,r.minDelivery=i.minDelivery,r.daysToNext=i.untilNextCountingDay,e.push(r)}return e},e.prototype.overallItems=function(){for(var e=[],t=function(t){var i={};i.productCode=t.productCode,i.productName=t.productName;for(var r=0,o=0,s=0,a=0,d=n._receivers;a<d.length;a++){var c=d[a],l=n._deliveryModels[c].deliveries.find(function(e){return e.productCode.toLowerCase()===t.productCode.toLowerCase()});void 0===l?i[c]="-":(i[c]=l.realDelivery,r+=l.realDelivery,s+=l.minDelivery,o+=l.realDelivery-l.minDelivery)}i.totalDelivery=r,i.totalMinDelivery=s,e.push(i)},n=this,i=0,r=this._deliveryModels.All.deliveries;i<r.length;i++){t(r[i])}return e},e.prototype.printData=function(){var e="",t=d(this.currentDate).format("ddd D MMM YYYY"),n='<table width="100%">\n                  <tr>\n                  <td width="70%" style="float: left; text-align: left; vertical-align: top"><label class="title">Siirgirsta Bros - '+this._unitSupplier+'</label></td>\n                  <td width="30%" style="float: right; text-align: right; vertical-align: top"><label class="title">'+t+'</label></td>\n                  </tr>\n                  <tr>\n                  <td style="float: left; text-align: left"><label class="subtitle">'+this._unitConsumer+" Delivery Note</label></td>\n                  </tr>\n                  </table>",i="";if(this._isOverallPrint){i='<table class="table">\n                      <thead>\n                      <tr>\n                      <th>#</th>\n                      <th>Product Code</th>\n                      <th>Product Name</th>\n                      <th>Total Delivery</th>\n                      <th>Total Min Delivery</th>';for(var r=0,o=this._receivers;r<o.length;r++){var s=o[r];i+="<th>"+s+"</th>"}i+='\n        </tr>\n        </thead>\n        <tbody class="data">'}else i='<table class="table">\n        <thead>\n        <tr>\n        <th>#</th>\n        <th>Product Code</th>\n        <th>Product Name</th>\n        <th>Real Delivery</th>\n        <th>Current Stock</th>\n        <th>Stock After Delivery</th>\n        <th>Min Delivery</th>\n        <th>Days to Next Count</th>\n        </tr>\n        </thead>\n        <tbody class="data">';var a="",c=0;if(this._isOverallPrint)for(var l=0,u=this.getItems();l<u.length;l++){var p=u[l];c++;var m=c%2?"":' class="highlight"';a+="\n<tr>\n  <td"+m+">"+c+"</td>\n  <td"+m+">"+p.productCode+"</td>\n  <td"+m+' style="min-width: 250px">'+p.productName+"</td>\n  <td"+m+">"+p.totalDelivery+"</td>\n  <td"+m+">"+p.totalMinDelivery+"</td>";for(var h=0,f=this._receivers;h<f.length;h++){var s=f[h];a+="\n  <td"+m+">"+p[s]+"</td>"}a+="\n</tr>"}else for(var v=0,y=this.getItems();v<y.length;v++){var p=y[v];c++;var m=c%2?"":' class="highlight"';a+="\n<tr>\n  <td"+m+">"+c+"</td>\n  <td"+m+">"+p.productCode+"</td>\n  <td"+m+' style="min-width: 250px">'+p.productName+"</td>\n  <td"+m+">"+p.realDelivery+"</td>\n  <td"+m+">"+(null===p.currentStock?"N/A":p.currentStock)+"</td>\n  <td"+m+">"+(null===p.currentStock?"N/A":p.stockAfterDelivery)+"</td>\n  <td"+m+">"+(null===p.minDelivery?"N/A":p.minDelivery)+"</td>\n  <td"+m+">"+(p.daysToNext?p.daysToNext:"N/A")+"</td>\n</tr>"}i+=a+"</tbody></table>",e+="<div>"+n+"</div>",e+="<div>"+i+"</div>";var g=this._window.open("","_blank","width=1000,height=600,scrollbars=no,menubar=no,toolbar=no,location=no,status=no,titlebar=no");g?(g.window.focus(),g.document.write('<!DOCTYPE><html><head><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"  media="screen, print" /><style type="text/css" media="print, screen">@page{margin: 2mm;  /* this affects the margin in the printer settings */} html{color: black;margin: 5px;  /* this affects the margin on the html before sending to printer */} body{margin: 2mm 5mm 2mm 5mm; /* margin you want for the content */-webkit-print-color-adjust: exact;} .title{font-size: 1.5em;font-weight: normal;}.subtitle{font-size: 2em}.highlight{background-color: #eeeeee !important;}.normal{background-color: white !important;}.table .highlight{background-color: #eeeeee !important;}table{font-size:75%}td{padding:2px !important;}.data td{border:1px solid #adadad !important;}</style></head><body onload="window.print()"><div class="container">'+e+"</div></body></html>"),g.document.close()):this.messageService.warn("Print pop-up is blocked by browser. Enable pop-ups from this page.")},e.prototype.getMonthName=function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e+1]},e}();c=i([o.Injectable(),r("design:paramtypes",["function"==typeof(l=void 0!==a.MessageService&&a.MessageService)&&l||Object,"function"==typeof(u=void 0!==s.WindowRef&&s.WindowRef)&&u||Object])],c),t.PrintService=c;var l,u},163:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(114),r=n(72),o=n(94),s=function(e){var t=o.RRule.fromString(e).options;return t.dtstart=new Date("2018-01-01"),o.RRule.optionsToString(t).replace(/\nRRULE:/g,";").split(";").filter(function(e){return!["HOUR","MINUTE","SECOND"].map(function(t){return e.startsWith("BY"+t)}).reduce(function(e,t){return e||t},!1)}).sort().join(";")},a=function(){function e(e){this.waiting=new r.BehaviorSubject({adding:!1,updating:!1,deleting:!1}),this._product=new i.Product,this._product.isOverridden=e.isOverridden,this._product.id=e.id,this._product.name=e.name,this._product.price=e.price,this._product.code=e.code,this._product.size=e.size,this._product.measuringUnit=e.measuringUnit,this._product.prep_unit_id=e.prep_unit_id,this._product.minQty=e.minQty,this._product.maxQty=e.maxQty,this._product.price=e.price;for(var t in e.coefficients)this._product.coefficients[t]=e.coefficients[t];this._product.countingRecursion=e.countingRecursion}return e.prototype.isDifferent=function(e){var t=!1,n=!1;for(var i in e)if("price"!==i)if("coefficients"===i)for(var r in e.coefficients)null===e.coefficients[r]&&(n=!0),+this._product.coefficients[r]!=+e.coefficients[r]&&(t=!0);else null===e[i]&&(n=!0),"countingRecursion"===i&&s(this._product[i])!==s(e[i])&&(t=!0),"countingRecursion"!==i&&this._product[i]!==e[i]&&(t=!0);return t&&!n},e.prototype.getDifferentValues=function(e){var t={};for(var n in e)if("coefficients"===n)for(var i in e.coefficients)this._product.coefficients[i]!==e.coefficients[i]&&(t.coefficients||(t.coefficients={}),t.coefficients[i]=e.coefficients[i]);else this._product[n]!==e[n]&&(t[n]=e[n]);return t},e.prototype.setProduct=function(e){null==this._product&&(this._product=new i.Product),this._product.isOverridden=e.isOverridden,this._product.id=e.id,this._product.name=e.name,this._product.code=e.code,this._product.size=e.size,this._product.measuringUnit=e.measuringUnit,this._product.prep_unit_id=e.prep_unit_id,this._product.minQty=e.minQty,this._product.maxQty=e.maxQty,this._product.price=e.price;for(var t in e.coefficients)this._product.coefficients[t]=e.coefficients[t];this._product.countingRecursion=e.countingRecursion},e.toAnyObject=function(e){var t={};for(var n in e)switch(n){case"id":t.pid=e.id;break;case"name":t.name=e.name;break;case"code":t.code=e.code;break;case"size":t.size=e.size;break;case"measuringUnit":t.measuring_unit=e.measuringUnit;break;case"prep_unit_id":t.prep_unit_id=e.prep_unit_id;break;case"minQty":t.default_min=e.minQty;break;case"maxQty":t.default_max=e.maxQty;break;case"price":t.price=e.price;break;case"countingRecursion":t.default_date_rule=e.countingRecursion;break;case"coefficients":for(var i in e.coefficients)switch(i){case"Monday":t.default_mon_multiple=e.coefficients.Monday;break;case"Tuesday":t.default_tue_multiple=e.coefficients.Tuesday;break;case"Wednesday":t.default_wed_multiple=e.coefficients.Wednesday;break;case"Thursday":t.default_thu_multiple=e.coefficients.Thursday;break;case"Friday":t.default_fri_multiple=e.coefficients.Friday;break;case"Saturday":t.default_sat_multiple=e.coefficients.Saturday;break;case"Sunday":t.default_sun_multiple=e.coefficients.Sunday;break;case"Usage":t.default_usage=e.coefficients.Usage}}return t},e.toAnyObjectOverride=function(e){var t={};for(var n in e)switch(n){case"id":t.pid=e.id;break;case"minQty":t.min=e.minQty;break;case"maxQty":t.max=e.maxQty;break;case"countingRecursion":t.date_rule=e.countingRecursion;break;case"coefficients":for(var i in e.coefficients)switch(i){case"Monday":t.mon_multiple=e.coefficients.Monday;break;case"Tuesday":t.tue_multiple=e.coefficients.Tuesday;break;case"Wednesday":t.wed_multiple=e.coefficients.Wednesday;break;case"Thursday":t.thu_multiple=e.coefficients.Thursday;break;case"Friday":t.fri_multiple=e.coefficients.Friday;break;case"Saturday":t.sat_multiple=e.coefficients.Saturday;break;case"Sunday":t.sun_multiple=e.coefficients.Sunday;break;case"Usage":t.usage=e.coefficients.Usage}}return t},e.fromAnyObject=function(e){var t=new i.Product;for(var n in e)switch(n){case"isOverridden":t.isOverridden=!0;break;case"pid":t.id=e[n];break;case"name":t.name=e[n];break;case"code":t.code=e[n];break;case"size":t.size=e[n];break;case"measuring_unit":t.measuringUnit=e[n];break;case"prep_unit_id":t.prep_unit_id=e[n];break;case"default_min":t.minQty=e[n];break;case"default_max":t.maxQty=e[n];break;case"price":e.price?t.price=parseFloat(e.price.substring(1)):t.price=null;break;case"default_date_rule":t.countingRecursion=e[n];break;case"default_mon_multiple":t.coefficients.Monday=e[n];break;case"default_tue_multiple":t.coefficients.Tuesday=e[n];break;case"default_wed_multiple":t.coefficients.Wednesday=e[n];break;case"default_thu_multiple":t.coefficients.Thursday=e[n];break;case"default_fri_multiple":t.coefficients.Friday=e[n];break;case"default_sat_multiple":t.coefficients.Saturday=e[n];break;case"default_sun_multiple":t.coefficients.Sunday=e[n];break;case"default_usage":t.coefficients.Usage=e[n]}return t},e}();t.ProductModel=a},198:function(e,t){function n(e){throw new Error("Cannot find module '"+e+"'.")}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=198},272:function(e,t,n){"use strict";function i(){return window}var r=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=function(){function e(){}return Object.defineProperty(e.prototype,"nativeWindow",{get:function(){return i()},enumerable:!0,configurable:!0}),e}();s=r([o.Injectable()],s),t.WindowRef=s},273:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(276),a=n(38),d=n(111),c=function(){function e(e,t,n){this.loggedInGuard=e,this.messageService=t,this.snackBar=n,this.showError=!1,this.blocked=!1}return e.prototype.ngOnInit=function(){var e=this;this.messageService.err$.subscribe(function(t){e.showError=!0,e.error=t.statusText+": "+t.text()}),this.messageService.msg$.subscribe(function(t){e.showError=!1,e.snackBar.open(t,"x",{duration:3e3,extraClasses:["snackBar"]})}),this.messageService.warn$.subscribe(function(t){e.snackBar.open(t,"x",{duration:3e3,extraClasses:["warnBar"]})}),this.messageService.block$.subscribe(function(t){e.blocked=t})},e.prototype.closeError=function(){this.showError=!1},e}();c=i([o.Component({selector:"app-root",template:n(797),styles:[n(710)]}),r("design:paramtypes",["function"==typeof(l=void 0!==s.LoggedInGuard&&s.LoggedInGuard)&&l||Object,"function"==typeof(u=void 0!==a.MessageService&&a.MessageService)&&u||Object,"function"==typeof(p=void 0!==d.MdSnackBar&&d.MdSnackBar)&&p||Object])],c),t.AppComponent=c;var l,u,p},274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.realDelivery=0,this.minDelivery=0,this.maxDelivery=0,this.state="exist",this.isPrinted=!1}return e}();t.Delivery=i},275:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.unopenedPack=null,this.shouldIncluded=!0,this.shouldCountToday=!0}return e}();t.Inventory=i},276:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(22),a=n(65),d=function(){function e(e,t){var n=this;this.authService=e,this.router=t,this.isLoggedIn=!1,this.authService.auth$.subscribe(function(e){n.isLoggedIn=e})}return e.prototype.canActivate=function(e,t){return this.isLoggedIn||(this.authService.originBeforeLogin=t.url,this.router.navigate(["login"])),this.isLoggedIn},e}();d=i([o.Injectable(),r("design:paramtypes",["function"==typeof(c=void 0!==a.AuthService&&a.AuthService)&&c||Object,"function"==typeof(l=void 0!==s.Router&&s.Router)&&l||Object])],d),t.LoggedInGuard=d;var c,l},277:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(111),a=n(2),d=n(162),c=function(){function e(e,t){this.dialogRef=e,this.printService=t,this.unitName_title="",this.unitName_subTitle="",this.isOverallPrint=!1,this.currentDate=a().format("D MMMM YYYY"),this.receivers=[],this.itemList=[],this.showWarningMessage=!0}return e.prototype.ngOnInit=function(){this.isOverallPrint=this.printService._isOverallPrint,this.receivers=this.printService._receivers,this.unitName_title=this.printService._unitSupplier,this.unitName_subTitle=this.printService._unitConsumer,this.showWarningMessage=this.printService._showWarningMessage,this.currentDate=a(this.printService.currentDate).format("D MMMM YYYY"),this.itemList=this.printService.getItems()},e}();c=i([o.Component({selector:"app-print-viewer",template:n(805),styles:[n(718)]}),r("design:paramtypes",["function"==typeof(l=void 0!==s.MdDialogRef&&s.MdDialogRef)&&l||Object,"function"==typeof(u=void 0!==d.PrintService&&d.PrintService)&&u||Object])],c),t.PrintViewerComponent=c;var l,u},278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(115),r=function(){function e(e){this.waiting={updating:!1,deleting:!1,adding:!1},this._unit=new i.Unit,this._unit.id=e.id,this._unit.name=e.name,this._unit.username=e.username,this._unit.password=e.password,this._unit.is_branch=e.is_branch,this._unit.is_kitchen=e.is_kitchen}return e.prototype.isDifferent=function(e){return""!==e.password||(e.name!==this._unit.name||(e.username!==this._unit.username||(e.is_branch!==this._unit.is_branch||e.is_kitchen!==this._unit.is_kitchen)))},e.prototype.getDifferentValues=function(e){var t={};return""!==e.password&&(t.password=e.password),e.name!==this._unit.name&&(t.name=e.name),e.username!==this._unit.username&&(t.username=e.username),e.is_branch!==this._unit.is_branch&&(t.is_branch=e.is_branch),e.is_kitchen!==this._unit.is_kitchen&&(t.is_kitchen=e.is_kitchen),t},e.prototype.setUnit=function(e){this._unit.id=e.id,this._unit.name=e.name,this._unit.username=e.username,this._unit.password=e.password,this._unit.is_branch=e.is_branch,this._unit.is_kitchen=e.is_kitchen},e}();t.UnitModel=r},38:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(72),a=n(84),d=function(){function e(){this.errStream=new s.Subject,this.err$=this.errStream.asObservable(),this.msgStream=new s.Subject,this.msg$=this.msgStream.asObservable(),this.warningStream=new s.Subject,this.warn$=this.warningStream.asObservable(),this.block$=new s.Subject}return e.prototype.block=function(e){void 0===e&&(e=!0),this.block$.next(e)},e.prototype.error=function(e){e=this.changeToUnderstandableMessage(e);var t=new a.ResponseOptions,n="";try{e.json().Message?n=e.json().Message:"object"==typeof e.json().Message&&(n="")}catch(t){n=e.text()}t.body=n;var i=new a.Response(t);i.statusText=e.statusText,i.status=e.status,this.errStream.next(i)},e.prototype.message=function(e){this.msgStream.next(e)},e.prototype.warn=function(e){this.warningStream.next(e)},e.prototype.changeToUnderstandableMessage=function(e){var t=e._body,n=new a.ResponseOptions;if(t.indexOf("foreign key constraint")!==-1){n.body="Can not delete this item because other data items depend on it.";var i=new a.Response(n);return i.statusText="Data Integrity Error",i}if(t.indexOf("duplicate key value")!==-1){var r='constraint "',o=t.substring(t.indexOf(r)+r.length,t.indexOf('_key"')).replace(/\_/g," ");n.body='Can not add this item because same "'+o+'" already exists.';var i=new a.Response(n);return i.statusText="Data Integrity Error",i}if(t.indexOf("null value")!==-1&&t.indexOf("not-null constraint")!==-1){var r='in column "',o=t.substring(t.indexOf(r)+r.length,t.indexOf('" violates')).replace(/\_/g," ");n.body='The "'+o+'" field cannot be blank.';var i=new a.Response(n);return i.statusText="Data Integrity Error",i}return e},e}();d=i([o.Injectable(),r("design:paramtypes",[])],d),t.MessageService=d},45:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(84);n(36),n(188);var a=n(38),d=function(){function e(e,t){this.http=e,this.messageService=t}return e.prototype.call=function(e){var t=this;return this.messageService.block(),this.http.get("/api/"+e).map(function(e){return t.messageService.block(!1),e}).catch(function(e){return t.messageService.block(!1),e})},e.prototype.insert=function(e,t){var n=this;return this.messageService.block(),this.http.put("/api/"+e,t).map(function(e){return n.messageService.block(!1),e.json()}).catch(function(e){return n.messageService.block(!1),e})},e.prototype.get=function(e){var t=this;return this.messageService.block(),this.call(e).map(function(e){return t.messageService.block(!1),e.json()}).catch(function(e){return t.messageService.block(!1),e})},e.prototype.getWithParams=function(e,t){var n=this;this.messageService.block();var i=new s.URLSearchParams;for(var r in t)t.hasOwnProperty(r)&&i.set(r,t[r]);return this.http.get("/api/"+e,{search:i}).map(function(e){return n.messageService.block(!1),e.json()}).catch(function(e){return n.messageService.block(!1),e})},e.prototype.delete=function(e,t){var n=this;return this.messageService.block(),this.http.delete("/api/"+e+"/"+t).map(function(e){return n.messageService.block(!1),e}).catch(function(e){return n.messageService.block(!1),e})},e.prototype.update=function(e,t,n){var i=this;return this.messageService.block(),this.http.post("/api/"+e+(t?"/"+t:""),n).map(function(e){return i.messageService.block(!1),e}).catch(function(e){return i.messageService.block(!1),e})},e}();d=i([o.Injectable(),r("design:paramtypes",["function"==typeof(c=void 0!==s.Http&&s.Http)&&c||Object,"function"==typeof(l=void 0!==a.MessageService&&a.MessageService)&&l||Object])],d),t.RestService=d;var c,l},475:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(559);var i=n(534),r=n(0),o=n(558),s=n(545);o.environment.production&&r.enableProdMode(),i.platformBrowserDynamic().bootstrapModule(s.AppModule)},539:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var r=n(30),o=n(0),s=n(10),a=n(84),d=n(273),c=n(548),l=n(549),u=n(544),p=n(65),m=n(45),h=n(276),f=n(22),v=n(111),y=n(536);n(727);var g=n(557),b=n(556),D=n(492),C=n(555),_=n(554),x=n(551),M=n(552),w=n(540),S=n(38),I=n(543),k=n(550),P=n(546),R=n(541),O=n(277),j=n(162),A=n(272),N=n(553),L=n(795),E=n(535),F=function(){function e(){}return e}();F=i([o.NgModule({declarations:[d.AppComponent,c.LoginComponent,l.NavbarComponent,u.HomeComponent,g.UnitFormComponent,b.SubFormComponent,C.RRuleComponent,_.MonthdayComponent,x.ProductFormComponent,M.ProductSubFormComponent,w.CountingRuleComponent,I.FocusDirective,k.OverrideFormComponent,P.InventoryFormComponent,R.DeliveryFormComponent,O.PrintViewerComponent,N.ReportsComponent],entryComponents:[O.PrintViewerComponent],imports:[r.BrowserModule,E.BrowserAnimationsModule,s.FormsModule,a.HttpModule,L.BlockUIModule,v.MaterialModule.forRoot(),D.FlexLayoutModule,s.ReactiveFormsModule,y.DatepickerModule,f.RouterModule.forRoot([{path:"",component:u.HomeComponent,pathMatch:"full"},{path:"login",component:c.LoginComponent},{path:"units",component:g.UnitFormComponent,canActivate:[h.LoggedInGuard]},{path:"products",component:x.ProductFormComponent,canActivate:[h.LoggedInGuard]},{path:"override",component:k.OverrideFormComponent,canActivate:[h.LoggedInGuard]},{path:"inventory",component:P.InventoryFormComponent,canActivate:[h.LoggedInGuard]},{path:"delivery",component:R.DeliveryFormComponent,canActivate:[h.LoggedInGuard]},{path:"reports",component:N.ReportsComponent,canActivate:[h.LoggedInGuard]}])],providers:[p.AuthService,m.RestService,h.LoggedInGuard,S.MessageService,j.PrintService,A.WindowRef],bootstrap:[d.AppComponent]})],F),t.AppModule=F},540:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=function(){function e(){this.isOverridden=!1,this.coefficientsChange=new o.EventEmitter,this.minQtyChange=new o.EventEmitter,this.maxQtyChange=new o.EventEmitter,this.recursionRuleChange=new o.EventEmitter,this.hasError=new o.EventEmitter,this.days=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","Usage"],this.errorMessage={}}return Object.defineProperty(e.prototype,"minQty",{get:function(){return this._mq},set:function(e){e===-12345678?(this._mq=null,this.ngOnInit()):this._mq=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.coeffChange=function(){this.coefficientsChange.emit(this.coefficients);var e=0;for(var t in this.coefficients)e++,this.coefficients[t]<0&&(this.coefficients[t]=0),this.coefficients[t]?this.sendError("",10+e):this.sendError(t+" coefficient should be a non-zero number",10+e)},e.prototype.minChange=function(){this.minQty<0&&(this.minQty=0),this.minQtyChange.emit(this.minQty),this.sendError("",0),this.checkMinMax()},e.prototype.maxChange=function(){this.maxQty<0&&(this.maxQty=0),this.maxQtyChange.emit(this.maxQty),this.sendError("",1),this.checkMinMax()},e.prototype.recurChange=function(e){this.recursionRuleChange.emit(e.value),e.error?this.sendError("Recursion rule warning: "+e.error,2):this.sendError("",2)},e.prototype.checkMinMax=function(){null!==this.minQty&&null!==this.maxQty&&(this.minQty>this.maxQty?this.sendError("The Min Qty should be less than or equal to Max Qty",3):this.sendError("",3))},e.prototype.sendError=function(e,t){if(this.errorMessage[t]=e,e)this.hasError.emit(e);else{for(var n in this.errorMessage)this.errorMessage[n]&&(e=this.errorMessage[n]);this.hasError.emit(e)}this.showMessage=e},e}();i([o.Input(),r("design:type",Boolean)],s.prototype,"isOverridden",void 0),i([o.Input(),r("design:type",Object)],s.prototype,"coefficients",void 0),i([o.Input(),r("design:type",Object),r("design:paramtypes",[Object])],s.prototype,"minQty",null),i([o.Input(),r("design:type",Object)],s.prototype,"maxQty",void 0),i([o.Input(),r("design:type",Object)],s.prototype,"recursionRule",void 0),i([o.Output(),r("design:type",Object)],s.prototype,"coefficientsChange",void 0),i([o.Output(),r("design:type",Object)],s.prototype,"minQtyChange",void 0),i([o.Output(),r("design:type",Object)],s.prototype,"maxQtyChange",void 0),i([o.Output(),r("design:type",Object)],s.prototype,"recursionRuleChange",void 0),i([o.Output(),r("design:type",Object)],s.prototype,"hasError",void 0),s=i([o.Component({selector:"app-counting-rule",template:n(798),styles:[n(711)]}),r("design:paramtypes",[])],s),t.CountingRuleComponent=s},541:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(65),a=n(45),d=n(542),c=n(274),l=n(10),u=n(38),p=n(114),m=n(111),h=n(277),f=n(162),v=n(2),y=n(72),g=function(){function e(e,t,n,i,r){this.authService=e,this.restService=t,this.msgService=n,this.dialog=i,this.printService=r,this.showZeroDelivery=!1,this.filteredDeliveries=[],this.filteredBranchDeliveries={},this.dataIsReady=!1,this.isWaiting={},this.receiverName="All",this.isToday=!0,this.selectedIndex=0,this.receivers=[],this.receiversSumDeliveries={},this.receiversDeliveryModels={},this.productName_Code={},this.productsList={},this.thereIsProactiveItem=!1}return e.prototype.ngOnInit=function(){var e=this;null!==this.overallDeliveryModel&&void 0!==this.overallDeliveryModel||(this.overallDeliveryModel=new d.DeliveryModel("All",!this.showZeroDelivery)),this.overallDeliveryModel._shouldDisabled=!0,this.unitName=this.authService.unitName,this.isKitchen=this.authService.isKitchen,this.currentDate=new Date,this.selectedDate=new Date,this.restService.get("date").subscribe(function(t){e.currentDate=new Date(t),e.selectedDate=new Date(t)},function(e){console.error(e)}),this.receiversDeliveryModels={All:this.overallDeliveryModel};var t=new c.Delivery;t.realDelivery=0,t.min=0,t.max=0,t.minDelivery=0,t.maxDelivery=0,t.stock=0,this.receiversSumDeliveries={All:t},this.receivers=[],this.restService.get("unit?isBranch=true&isKitchen="+this.isKitchen).subscribe(function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n],o={id:r.uid,name:r.name,warn:"no"};e.receivers.push(o),e.isWaiting[o.name]=!1}e.getDeliveryData()},function(e){console.log(e.message)}),this.productNameCodeCtrl=new l.FormControl,this.filteredNameCode=this.productNameCodeCtrl.valueChanges.map(function(t){return e.filterProducts(t)}),this.productNameCodeCtrl.valueChanges.subscribe(function(t){var n=e.productName_Code[e.receiverName].find(function(e){return e.toLowerCase()===t.toLowerCase()});if(void 0!==n&&null!==n){var i=n.substr(0,n.indexOf("-")-1),r=n.substr(n.indexOf("-")+2),o=new c.Delivery;o.id=null,o.productCode=i,o.productName=r;var s=e.productsList[e.receiverName].find(function(e){return e.code.toLowerCase()===i.toLowerCase()});o.min=s.minQty,o.max=s.maxQty,o.realDelivery=null,o.stock=0,o.minDelivery=o.min-o.stock<0?0:o.min-o.stock,o.maxDelivery=o.max-o.stock,o.stockDate=v(o.stockDate).format("dd MMM YY"),e.receiversDeliveryModels[e.receiverName].add(o),e.thereIsProactiveItem=!!e.overallDeliveryModel._deliveries.find(function(e){return null===e.id}),e.calSumRow(e.receiverName,o,"add"),e.calSumRow("All",o,"add"),e.productName_Code[e.receiverName]=e.productName_Code[e.receiverName].filter(function(e){return e.toLowerCase()!==n.toLowerCase()}),void 0===e.overallDeliveryModel.getByCode(o.productCode)?(e.overallDeliveryModel.add(o),e.thereIsProactiveItem=!!e.overallDeliveryModel._deliveries.find(function(e){return null===e.id}),e.updateOverallDelivery(o.productCode,o,"add","min",0),e.updateOverallDelivery(o.productCode,o,"add","max",0),e.updateOverallDelivery(o.productCode,o,"add","realDelivery",0),e.updateOverallDelivery(o.productCode,o,"add","minDelivery",0),e.updateOverallDelivery(o.productCode,o,"add","maxDelivery",0),e.updateOverallDelivery(o.productCode,o,"add","stock",0)):(e.updateOverallDelivery(o.productCode,o,"add","min",o.min),e.updateOverallDelivery(o.productCode,o,"add","max",o.max),e.updateOverallDelivery(o.productCode,o,"add","realDelivery",o.realDelivery),e.updateOverallDelivery(o.productCode,o,"add","minDelivery",o.minDelivery),e.updateOverallDelivery(o.productCode,o,"add","maxDelivery",o.maxDelivery),e.updateOverallDelivery(o.productCode,o,"add","stock",o.stock)),e.changeFilter(),e.receiversDeliveryModels[e.receiverName]._isSubmitted=!1}},function(e){console.log(e.message)})},e.prototype.dateChanged=function(){this.selectedDate.getFullYear()!==this.currentDate.getFullYear()?this.isToday=!1:this.selectedDate.getMonth()!==this.currentDate.getMonth()?this.isToday=!1:this.selectedDate.getDate()!==this.currentDate.getDate()?this.isToday=!1:this.isToday=!0,this.overallDeliveryModel.clear(),this.getDeliveryData()},e.prototype.removeDeliveryItem=function(e){var t=this;if(0===this.selectedIndex)console.log("Error. Cannot remove added items from 'All' tab");else{this.updateOverallDelivery(e.productCode,e,"sub","realDelivery",e.realDelivery),this.updateOverallDelivery(e.productCode,e,"sub","minDelivery",e.minDelivery),this.updateOverallDelivery(e.productCode,e,"sub","maxDelivery",e.maxDelivery),this.updateOverallDelivery(e.productCode,e,"sub","stock",e.stock),this.updateOverallDelivery(e.productCode,e,"sub","min",e.min),this.updateOverallDelivery(e.productCode,e,"sub","max",e.max),this.receiversDeliveryModels[this.receiverName].deleteByCode(e.productCode);for(var n=[],i=0,r=0,o=0,s=0,a=this.receivers;s<a.length;s++){var d=a[s],c=this.receiversDeliveryModels[d.name]._deliveries.find(function(t){return t.productCode.toLowerCase()===e.productCode.toLowerCase()});void 0!==c&&(n.push(c.id),i+=c.minDelivery,r+=c.maxDelivery,o+=c.stock)}if(void 0===n.find(function(e){return null===e})){var l=this.overallDeliveryModel._deliveries.find(function(t){return t.productCode.toLowerCase()===e.productCode.toLowerCase()});void 0!==l&&(l.minDelivery=i,l.maxDelivery=r,l.stock=o)}var u=this.receivers.find(function(e){return e.name.toLowerCase()===t.receiverName.toLowerCase()});void 0===this.receiversDeliveryModels[this.receiverName]._deliveries.find(function(e){return null===e.id})?void 0===this.receiversDeliveryModels[this.receiverName]._deliveries.find(function(e){return null===e.stock})?u.warn="no":u.warn="count":u.warn="unknown",this.calSumRow(this.receiverName,e,"sub"),this.overallDeliveryModel._deliveries.length>0&&(this.receiversSumDeliveries.All.realDelivery=this.overallDeliveryModel._deliveries.map(function(e){return e.realDelivery}).reduce(function(e,t){return e+t}),this.receiversSumDeliveries.All.min=this.overallDeliveryModel._deliveries.map(function(e){return e.min}).reduce(function(e,t){return e+t}),this.receiversSumDeliveries.All.max=this.overallDeliveryModel._deliveries.map(function(e){return e.max}).reduce(function(e,t){return e+t}),void 0===this.overallDeliveryModel._deliveries.find(function(e){return null===e.stock})&&(this.receiversSumDeliveries.All.minDelivery=this.overallDeliveryModel._deliveries.map(function(e){return e.minDelivery}).reduce(function(e,t){return e+t}),this.receiversSumDeliveries.All.maxDelivery=this.overallDeliveryModel._deliveries.map(function(e){return e.maxDelivery}).reduce(function(e,t){return e+t}),this.receiversSumDeliveries.All.stock=this.overallDeliveryModel._deliveries.map(function(e){return e.stock}).reduce(function(e,t){return e+t}))),this.productName_Code[this.receiverName].push(e.productCode+" - "+e.productName),this.changeFilter(),this.receiversDeliveryModels[this.receiverName]._isSubmitted=!1}},e.prototype.filterProducts=function(e){return e?this.productName_Code[this.receiverName].filter(function(t){return new RegExp(e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"gi").test(t)}):this.productName_Code[this.receiverName]},e.prototype.checkRealDeliveryValue=function(e,t){var n=""===e.srcElement.value?0:parseInt(e.srcElement.value);if(n<0)return e.srcElement.value=0,void(t.realDelivery=0);n<t.minDelivery?this.msgService.warn("The 'Real Delivery' value is less than 'Min' value"):n>t.maxDelivery&&this.msgService.warn("The 'Real Delivery' value is greater than 'Max Delivery' value"),this.updateOverallDelivery(t.productCode,t,"add","realDelivery",n-t.realDelivery),this.receiversSumDeliveries[this.receiverName].realDelivery+=n-t.realDelivery,this.receiversSumDeliveries.All.realDelivery+=n-t.realDelivery,t.realDelivery=n,this.receiversDeliveryModels[this.receiverName]._isSubmitted=!1,this.changeFilter()},e.prototype.tabChanged=function(){0===this.selectedIndex?this.receiverName="All":this.receiverName=this.receivers[this.selectedIndex-1].name},e.prototype.updateOverallDelivery=function(e,t,n,i,r){switch(i){case"min":this.overallDeliveryModel.updateDeliveryProperty(n,e,"min",r);break;case"max":this.overallDeliveryModel.updateDeliveryProperty(n,e,"max",r);break;case"realDelivery":this.overallDeliveryModel.updateDeliveryProperty(n,e,"realDelivery",r);break;case"minDelivery":null!==t.stock&&null!==t.id||(r=null),this.overallDeliveryModel.updateDeliveryProperty(n,e,"minDelivery",r);break;case"maxDelivery":null!==t.stock&&null!==t.id||(r=null),this.overallDeliveryModel.updateDeliveryProperty(n,e,"maxDelivery",r);break;case"stock":null!==t.stock&&null!==t.id||(r=null),this.overallDeliveryModel.updateDeliveryProperty(n,e,"stock",r)}0===this.overallDeliveryModel.getByCode(e).min&&0===this.overallDeliveryModel.getByCode(e).max&&this.overallDeliveryModel.deleteByCode(e),this.overallDeliveryModel.deliveries.sort(function(e,t){return e.productName.toLowerCase()>t.productName.toLowerCase()?1:e.productName.toLowerCase()<t.productName.toLowerCase()?-1:e.productCode.toLowerCase()>t.productCode.toLowerCase()?1:e.productCode.toLowerCase()<e.productCode.toLowerCase()?-1:0})},e.prototype.countToday=function(e){return null!==e&&v(e).format("YYMMDD")===v(this.currentDate).format("YYMMDD")},e.prototype.printDelivery=function(e){if("All"===e._unitName){for(var t=0,n=this.receivers;t<n.length;t++){var i=n[t];if(!this.receiversDeliveryModels[i.name]._isSubmitted)return void this.msgService.warn(i.name+" data is not submitted")}this.sendForPrint(e,!0)}else e._isSubmitted?(e._shouldDisabled=!0,this.sendForPrint(e,!1)):this.msgService.warn("You should first submit the list")},e.prototype.submitDelivery=function(e){var t=this;e.afterSubmit();for(var n=function(n){if(null===n.realDelivery)return i.msgService.warn("Delivery data are submitted, but delivery value of '"+n.productName+"' was blank."),{value:void 0};if(0===n.realDelivery&&i.msgService.warn("Delivery data are submitted, but delivery value of '"+n.productName+"' was zero"),e._isSubmitted=!0,null===n.id){var r=i.receivers.find(function(e){return e.name.toLowerCase()===t.receiverName.toLowerCase()}).id,o=i.productsList[i.receiverName].find(function(e){return e.code.toLowerCase()===n.productCode.toLowerCase()}).id;i.restService.insert("delivery/"+r,d.DeliveryModel.toAnyObject(n,n.isPrinted,o)).subscribe(function(e){n.state="added",n.id=e,t.msgService.message("Delivery data are submitted")},function(n){e._isSubmitted=!1,console.log(n.message),t.msgService.error(n)})}else i.restService.update("delivery",n.id,d.DeliveryModel.toAnyObject(n,n.isPrinted,null)).subscribe(function(e){console.log("Update this item successfully")},function(n){e._isSubmitted=!1,console.log(n.message),t.msgService.error(n)})},i=this,r=0,o=e.deliveries;r<o.length;r++){var s=o[r],a=n(s);if("object"==typeof a)return a.value}},e.prototype.sendForPrint=function(e,t){var n=this;this.printService._isOverallPrint=t,this.printService._unitSupplier=this.unitName,this.printService._unitConsumer=t?"Aggregated":this.receiverName,this.printService._receivers=this.receivers.map(function(e){return e.name}),this.printService._deliveryModels=this.receiversDeliveryModels,this.printService._deliveryModels.All=this.overallDeliveryModel,this.printService._showWarningMessage=!this.receiversDeliveryModels[this.receiverName]._isPrinted,this.printService.currentDate=this.currentDate,this.dialog.open(h.PrintViewerComponent,{height:"600px",width:"1200px"}).afterClosed().subscribe(function(i){if("print"===i)if(t)n.printService.printData();else{for(var r=new y.BehaviorSubject(!1),o=!0,s=0,a=function(t){t.isPrinted=!0,n.restService.update("delivery",t.id,d.DeliveryModel.toAnyObject(t,t.isPrinted,null)).subscribe(function(t){e._isPrinted=e.deliveries.map(function(e){return e.isPrinted}).reduce(function(e,t){return e&&t}),++s>=e.deliveries.length&&r.next(!0)},function(n){t.isPrinted=!1,e._isPrinted=!1,o=!1,++s>=e.deliveries.length&&r.next(!0)})},c=0,l=e.deliveries;c<l.length;c++){var u=l[c];a(u)}r.subscribe(function(e){e&&o&&(n.checkOverallPrintDisability(),n.printService.printData())})}},function(e){return console.log(e.message)})},e.prototype.checkOverallPrintDisability=function(){for(var e=!0,t=0,n=this.receivers;t<n.length;t++){var i=n[t];!this.receiversDeliveryModels[i.name]._isPrinted&&this.receiversDeliveryModels[i.name].deliveries.length>0&&(e=!1)}this.overallDeliveryModel._shouldDisabled=!e},e.prototype.getDeliveryData=function(){for(var e=this,t=v(this.selectedDate).format("YYYYMMDD"),n=function(n){n.warn="no",i.isWaiting[n.name]=!0,i.waiting(),i.restService.get("delivery/"+t+"/"+n.id).subscribe(function(t){e.isWaiting[n.name]=!1,e.waiting(),e.productsList[n.name]=[],e.receiversDeliveryModels[n.name]=new d.DeliveryModel(n.name,!e.showZeroDelivery),e.filteredBranchDeliveries[n.name]=[],e.receiversSumDeliveries[n.name]=new c.Delivery,e.receiversSumDeliveries[n.name].min=0,e.receiversSumDeliveries[n.name].max=0,e.receiversSumDeliveries[n.name].minDelivery=0,e.receiversSumDeliveries[n.name].maxDelivery=0,e.receiversSumDeliveries[n.name].realDelivery=0,e.receiversSumDeliveries[n.name].stock=0;for(var i=0,r=t;i<r.length;i++){var o=r[i];if(null===o.id){var s=new p.Product;s.id=o.productId,s.code=o.productCode,s.name=o.productName,s.minQty=o.min,s.maxQty=o.max,void 0===e.productsList[n.name]&&(e.productsList[n.name]=[]),e.productsList[n.name].push(s),void 0===e.productName_Code[n.name]&&(e.productName_Code[n.name]=[]),e.productName_Code[n.name].push(o.productCode+" - "+o.productName)}else{null!==o.stock&&"number"==typeof o.stock||(n.warn="count");var a=new c.Delivery;a.id=o.id,a.productCode=o.productCode,a.productName=o.productName,null===o.stock&&null===o.realDelivery?a.realDelivery=null:null===o.realDelivery?a.realDelivery=o.max-o.stock<0?0:o.max-o.stock:a.realDelivery=o.realDelivery,a.minDelivery=o.min-o.stock<0?0:o.min-o.stock,a.maxDelivery=o.max-o.stock>=0?o.max-o.stock:0,a.min=o.min,a.max=o.max,a.stock=o.stock,a.isPrinted=o.isPrinted,null===o.stockDate?a.stockDate=null:a.stockDate=v(o.stockDate).format("DD MMM YY"),a.state="exist",a.untilNextCountingDay=o.untilNextCountingDay,e.receiversDeliveryModels[n.name].add(a),e.thereIsProactiveItem=!!e.overallDeliveryModel.deliveries.find(function(e){return null===e.id}),e.calSumRow(n.name,a,"add"),e.calSumRow("All",a,"add"),void 0===e.overallDeliveryModel.getByCode(o.productCode)?(e.overallDeliveryModel.add(a),e.thereIsProactiveItem=!!e.overallDeliveryModel.deliveries.find(function(e){return null===e.id})):(e.updateOverallDelivery(o.productCode,a,"add","min",a.min),e.updateOverallDelivery(o.productCode,a,"add","max",a.max),e.updateOverallDelivery(o.productCode,a,"add","realDelivery",a.realDelivery),e.updateOverallDelivery(o.productCode,a,"add","minDelivery",a.minDelivery),e.updateOverallDelivery(o.productCode,a,"add","maxDelivery",a.maxDelivery),e.updateOverallDelivery(o.productCode,a,"add","stock",a.stock))}}e.receiversDeliveryModels[n.name].deliveries.length>0?e.receiversDeliveryModels[n.name]._isPrinted=e.receiversDeliveryModels[n.name].deliveries.map(function(e){return e.isPrinted}).reduce(function(e,t){return e&&t}):e.receiversDeliveryModels[n.name]._isSubmitted=!0,e.receiversDeliveryModels[n.name]._isPrinted&&(e.receiversDeliveryModels[n.name]._isSubmitted=!0),e.receiversDeliveryModels[n.name].deliveries.sort(function(t,n){return!e.countToday(t.stockDate)&&e.countToday(n.stockDate)?-1:e.countToday(t.stockDate)&&!e.countToday(n.stockDate)?1:t.productName.toLowerCase()>n.productName.toLowerCase()?1:t.productName.toLowerCase()<n.productName.toLowerCase()?-1:t.productCode.toLowerCase()>n.productCode.toLowerCase()?1:t.productCode.toLowerCase()<t.productCode.toLowerCase()?-1:0}),e.filteredBranchDeliveries[n.name]=e.receiversDeliveryModels[n.name].deliveries,e.filteredDeliveries=e.overallDeliveryModel.deliveries},function(t){e.isWaiting[n.name]=!1,e.waiting(),console.log(t.message)})},i=this,r=0,o=this.receivers;r<o.length;r++){n(o[r])}},e.prototype.showProductList=function(){this.productNameCodeCtrl.setValue("")},e.prototype.clearInput=function(e){setTimeout(function(){e.target.value=""},50)},e.prototype.calSumRow=function(e,t,n){if("add"===n){if(null===t.stock||null===t.id)if("All"!==e){var i=this.receivers.find(function(t){return t.name.toLowerCase()===e.toLowerCase()});"no"===i.warn&&(i.warn="unknown")}else this.receiversSumDeliveries.All.minDelivery=null,this.receiversSumDeliveries.All.maxDelivery=null,this.receiversSumDeliveries.All.stock=null;this.receiversSumDeliveries[e].min+=t.min,this.receiversSumDeliveries[e].max+=t.max,null!==this.receiversSumDeliveries[e].minDelivery&&(this.receiversSumDeliveries[e].minDelivery+=t.minDelivery),null!==this.receiversSumDeliveries[e].maxDelivery&&(this.receiversSumDeliveries[e].maxDelivery+=t.maxDelivery),this.receiversSumDeliveries[e].realDelivery+=t.realDelivery,null!==this.receiversSumDeliveries[e].stock&&(this.receiversSumDeliveries[e].stock+=t.stock)}else this.receiversSumDeliveries[e].min-=t.min,this.receiversSumDeliveries[e].max-=t.max,this.receiversSumDeliveries[e].minDelivery-=t.minDelivery,this.receiversSumDeliveries[e].maxDelivery-=t.maxDelivery,this.receiversSumDeliveries[e].realDelivery-=t.realDelivery,this.receiversSumDeliveries[e].stock-=null===t.stock?0:t.stock},e.prototype.waiting=function(){for(var e=!1,t=0,n=this.receivers;t<n.length;t++){var i=n[t];e=e||this.isWaiting[i.name]}this.dataIsReady=!e},e.prototype.changeFilter=function(){this.overallDeliveryModel.filter=!this.showZeroDelivery,this.filteredDeliveries=this.overallDeliveryModel.deliveries;for(var e in this.receiversDeliveryModels)this.receiversDeliveryModels.hasOwnProperty(e)&&(this.receiversDeliveryModels[e].filter=!this.showZeroDelivery,this.filteredBranchDeliveries[e]=this.receiversDeliveryModels[e].deliveries)},e}();g=i([o.Component({selector:"app-delivery-form",template:n(799),styles:[n(712)],animations:[o.trigger("itemState",[o.state("exist",o.style({opacity:1,transform:"translateX(0) scale(1)"})),o.state("delete",o.style({opacity:0,display:"none",transform:"translateX(0) scale(1)"})),o.state("sent",o.style({opacity:0,display:"none",transform:"translateX(0) scale(1)"})),o.transition("exist => delete",[o.animate("1s ease-out",o.style({opacity:0,transform:"translateX(-100%) scale(1)"}))]),o.transition("exist => sent",[o.animate("0.5s ease-out",o.style({opacity:0,transform:"translateX(0) scale(0.5)"}))])])]}),r("design:paramtypes",["function"==typeof(b=void 0!==s.AuthService&&s.AuthService)&&b||Object,"function"==typeof(D=void 0!==a.RestService&&a.RestService)&&D||Object,"function"==typeof(C=void 0!==u.MessageService&&u.MessageService)&&C||Object,"function"==typeof(_=void 0!==m.MdDialog&&m.MdDialog)&&_||Object,"function"==typeof(x=void 0!==f.PrintService&&f.PrintService)&&x||Object])],g),t.DeliveryFormComponent=g;var b,D,C,_,x},542:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(274),r=function(){function e(e,t){this._deliveries=[],this._unitName="",this._shouldDisabled=!1,this._isSubmitted=!1,this._isPrinted=!1,this.filter=!1,this._unitName=e,this.filter=t}return Object.defineProperty(e.prototype,"deliveries",{get:function(){return(this.filter?this._deliveries.filter(function(e){return 0!==e.realDelivery}):this._deliveries).sort(function(e,t){return e.id?t.id?e.productName<t.productName?-1:e.productName>t.productName?1:0:-1:1})},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t=new i.Delivery;for(var n in e)t[n]=e[n];this._deliveries.push(t)},e.prototype.get=function(e){return this._deliveries.find(function(t){return t.id===e})},e.prototype.getByCode=function(e){return this._deliveries.find(function(t){return t.productCode.toLowerCase()===e.toLowerCase()})},e.prototype.deleteByCode=function(e){try{return this._deliveries=this._deliveries.filter(function(t){return t.productCode.toLowerCase()!==e.toLowerCase()}),!0}catch(e){return console.log(e.message),!1}},e.prototype.clear=function(){this._deliveries=[]},e.prototype.replaceDeliveryProperty=function(e,t,n){try{return this._deliveries.find(function(t){return t.productCode.toLowerCase()===e.toLowerCase()})[t]=n,!0}catch(e){return console.log(e.message),!1}},e.prototype.updateDeliveryProperty=function(e,t,n,i){try{var r=this._deliveries.find(function(e){return e.productCode.toLowerCase()===t.toLowerCase()});if(null!==i&&null!==r[n]||"realDelivery"===n||"min"===n||"max"===n)switch(e){case"add":r[n]+=i;break;case"sub":r[n]-=i}else r[n]=null;return!0}catch(e){return console.log(e.message),!1}},e.toAnyObject=function(e,t,n){var i={};return i.real_delivery=e.realDelivery,i.is_delivery_finalised=t,null!==n&&(i.product_id=n),i},e.prototype.afterSubmit=function(){this._deliveries.forEach(function(e){null===e.realDelivery&&(e.realDelivery=0)})},e}();t.DeliveryModel=r},543:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=function(){function e(e,t){this._el=e,this.renderer=t}return e.prototype.ngAfterViewInit=function(){},e}();s=i([o.Directive({selector:"[focus]"}),r("design:paramtypes",["function"==typeof(a=void 0!==o.ElementRef&&o.ElementRef)&&a||Object,"function"==typeof(d=void 0!==o.Renderer2&&o.Renderer2)&&d||Object])],s),t.FocusDirective=s;var a,d},544:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();s=i([o.Component({selector:"app-home",template:n(800),styles:[n(713)]}),r("design:paramtypes",[])],s),t.HomeComponent=s},545:function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(273)),i(n(539))},546:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(10),a=n(65),d=n(45),c=n(547),l=n(275),u=n(1072),p=n(114),m=n(2),h=function(){function e(e,t){this.authService=e,this.restService=t,this.unitName="",this.isSameDates=!0,this.submitShouldDisabled=!0,this.products=[],this.productName_Code=[],this.waiting=!1}return e.prototype.ngOnInit=function(){var e=this;this.unitName=this.authService.unitName,this.currentDate=new Date,this.selectedDate=new Date,this.restService.get("date").subscribe(function(t){e.currentDate=new Date(t),e.selectedDate=new Date(t)},function(e){return console.error(e)}),null!==this.inventoryModel&&void 0!==this.inventoryModel||(this.inventoryModel=new c.InventoryModel(this.unitName)),this.getInventoryData(),this.productNameCodeCtrl=new s.FormControl,this.filteredNameCode=this.productNameCodeCtrl.valueChanges.startWith(null).map(function(t){return e.filterProducts(t)}),this.productNameCodeCtrl.valueChanges.subscribe(function(t){var n=e.productName_Code.find(function(e){return e.toLowerCase()===t.toLowerCase()});if(void 0!==n&&null!==n){var i=new l.Inventory;i.id=null,i.unopenedPack=void 0!==e.unopenedPack.nativeElement.value&&null!==e.unopenedPack.nativeElement.value&&""!==e.unopenedPack.nativeElement.value?e.unopenedPack.nativeElement.value:0,i.productCode=t.substr(0,t.indexOf("-")-1),i.productName=t.substr(t.indexOf("-")+2),i.productId=e.products.find(function(e){return e.code===i.productCode}).id,i.lastCount=new Date(e.currentDate.getFullYear(),e.currentDate.getMonth(),e.currentDate.getDate()),i.state="exist",i.shouldIncluded=!1,e.inventoryModel.add(i),e.unopenedPack.nativeElement.value=null,e.autoNameCode.nativeElement.value=null,e.productName_Code=e.productName_Code.filter(function(e){return e.toLowerCase()!==t.toLowerCase()})}},function(e){console.log(e.message)}),this.compareDates()},e.prototype.filterProducts=function(e){return e?this.productName_Code.filter(function(t){return new RegExp(e,"gi").test(t)}):this.productName_Code},e.prototype.submitInventoryItem=function(e){var t=this;null===e.id?this.restService.insert("stock",c.InventoryModel.toAnyObject(e)).subscribe(function(n){e.state="sent",u.setTimeout(function(){t.inventoryModel._inventories=t.inventoryModel._inventories.filter(function(t){return t.productCode!==e.productCode})},500)},function(e){console.log(e.message)}):this.restService.update("stock",e.id,c.InventoryModel.toAnyObject(e)).subscribe(function(n){e.state="sent",u.setTimeout(function(){t.inventoryModel._inventories=t.inventoryModel._inventories.filter(function(t){return t.productCode!==e.productCode})},500)},function(e){console.log(e.message)})},e.prototype.submitInventories=function(){for(var e=this,t=[],n=[],i=0,r=this.inventoryModel._inventories;i<r.length;i++){var o=r[i];null===o.id?t.push(c.InventoryModel.toAnyObject(o)):n.push(c.InventoryModel.toAnyObject(o))}var s={insert:t,update:n};this.waiting=!0,this.restService.insert("stock/batch",s).subscribe(function(t){u.setTimeout(function(){e.inventoryModel._inventories=[],e.waiting=!1},500)},function(t){e.waiting=!1,console.log(t)})},e.prototype.removeInventoryItem=function(e){var t=this;e.state="delete",u.setTimeout(function(){t.inventoryModel._inventories=t.inventoryModel._inventories.filter(function(t){return t.productName!==e.productName}),t.productName_Code.push(e.productCode+" - "+e.productName)},1e3)},e.prototype.disableInventoryItem=function(e){return null===e.unopenedPack||e.unopenedPack<0},e.prototype.dateChanged=function(){this.compareDates(),this.inventoryModel.clear(),this.productName_Code=[],this.getInventoryData()},e.prototype.compareDates=function(){this.currentDate.getDate()!==this.selectedDate.getDate()?this.isSameDates=!1:this.currentDate.getMonth()!==this.selectedDate.getMonth()?this.isSameDates=!1:this.currentDate.getFullYear()!==this.selectedDate.getFullYear()?this.isSameDates=!1:this.isSameDates=!0},e.prototype.isCountingDatePast=function(e){var t=new Date(e);return this.currentDate.getFullYear()>t.getFullYear()||(this.currentDate.getMonth()>t.getMonth()||this.currentDate.getDate()>t.getDate())},e.prototype.getInventoryData=function(){var e=this,t=m(this.selectedDate).format("YYYYMMDD");this.restService.get("stock/"+t).subscribe(function(t){e.inventoryModel.clear(),e.products=[],e.productName_Code=t.filter(function(e){return null===e.bsddid}).sort(function(e,t){return e.product_name.toLowerCase()>t.product_name.toLowerCase()?1:e.product_name.toLowerCase()<t.product_name.toLowerCase()?-1:e.product_code.toLowerCase()>t.product_code.toLowerCase()?1:e.product_code.toLowerCase()<t.product_code.toLowerCase()?-1:0}).map(function(e){return e.product_code+" - "+e.product_name}),e.restService.get("override?uid="+e.authService.unit_id).subscribe(function(t){var n=t.map(function(e){return e.code+" - "+e.name});e.productName_Code=e.productName_Code.filter(function(e){return n.includes(e)})},function(e){console.log(e.message)});for(var n=0,i=t;n<i.length;n++){var r=i[n];if(e.checkDisability(r),null===r.bsddid){var o=new p.Product;o.id=r.pid,o.code=r.product_code,o.name=r.product_name,e.products.push(o)}else if(null===r.counting_date)console.log("Error in data fetched from server");else{var s=new l.Inventory;if(s.id=r.bsddid,s.productId=r.pid,s.productCode=r.product_code,s.productName=r.product_name,s.unopenedPack=r.product_count,null===r.last_count)s.lastCount=null;else{var a=m(r.last_count).format("YYYY-MM-DD");s.lastCount="Invalid date"===a?e.currentDate:new Date(a)}s.shouldCountToday=!e.isCountingDatePast(r.counting_date),s.shouldIncluded=!0,s.state="exist",e.inventoryModel.add(s)}}e.inventoryModel._inventories.sort(function(e,t){return e.shouldCountToday||!e.shouldIncluded||!t.shouldCountToday&&t.shouldIncluded?!e.shouldCountToday&&e.shouldIncluded||t.shouldCountToday||!t.shouldIncluded?e.productName.toLowerCase()>t.productName.toLowerCase()?1:e.productName.toLowerCase()<t.productName.toLowerCase()?-1:e.productCode.toLowerCase()>t.productCode.toLowerCase()?1:e.productCode.toLowerCase()<t.productCode.toLowerCase()?-1:0:1:-1})},function(e){console.log(e.message)})},e.prototype.checkDisability=function(e){e.unopenedPack<0&&(e.unopenedPack=0);for(var t=!1,n=0,i=this.inventoryModel._inventories;n<i.length;n++){var r=i[n];if(this.disableInventoryItem(r)){t=!0;break}}this.submitShouldDisabled=t},e.prototype.showProductList=function(){this.productNameCodeCtrl.setValue("")},e}();i([o.ViewChild("unopenedPack"),r("design:type",Object)],h.prototype,"unopenedPack",void 0),i([o.ViewChild("autoNameCode"),r("design:type",Object)],h.prototype,"autoNameCode",void 0),h=i([o.Component({selector:"app-inventory-form",template:n(801),styles:[n(714)],animations:[o.trigger("itemState",[o.state("exist",o.style({opacity:1,transform:"translateX(0) scale(1)"})),o.state("delete",o.style({opacity:0,display:"none",transform:"translateX(0) scale(1)"})),o.state("sent",o.style({opacity:0,display:"none",transform:"translateX(0) scale(1)"})),o.transition("exist => delete",[o.animate("1s ease-out",o.style({opacity:0,transform:"translateX(-100%) scale(1)"}))]),o.transition("exist => sent",[o.animate("0.5s ease-out",o.style({opacity:0,transform:"translateX(0) scale(0.5)"}))])])]}),r("design:paramtypes",["function"==typeof(f=void 0!==a.AuthService&&a.AuthService)&&f||Object,"function"==typeof(v=void 0!==d.RestService&&d.RestService)&&v||Object])],h),t.InventoryFormComponent=h;var f,v},547:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(275),r=function(){function e(e){this._inventories=[],this._unitName="",this._unitName=e,this._inventories=[]}return e.prototype.clear=function(){this._inventories=[]},e.prototype.add=function(e){this._inventories.push(e)},e.prototype.get=function(e){return this._inventories.find(function(t){return t.id===e})},e.prototype.getByCode=function(e){return this._inventories.find(function(t){return t.productCode===e})},e.prototype.delete=function(e){this._inventories=this._inventories.filter(function(t){return t.id!==e})},e.toAnyObject=function(e){var t={};return t.bsddid=e.id,t.product_id=e.productId,t.product_count=e.unopenedPack,t.product_code=e.productCode,t.product_name=e.productName,t.last_count=e.lastCount,t},e.fromAnyObject=function(e){var t=new i.Inventory;for(var n in e)switch(n){case"bsddid":t.id=e[n];break;case"product_code":t.productCode=e[n];break;case"product_name":t.productName=e[n];break;case"product_count":t.unopenedPack=e[n];break;case"last_count":t.lastCount=e[n];break;case"pid":t.productId=e[n]}return t},e}();t.InventoryModel=r},548:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(65),a=function(){function e(e){this.authService=e,this.loginEnabled=!1}return e.prototype.onChange=function(){this.loginEnabled=this.username&&this.password},e.prototype.ngOnInit=function(){},e.prototype.ifEnterLogin=function(e){13===e.keyCode&&this.userLogin()},e.prototype.userLogin=function(){this.authService.logIn(this.username,this.password)},e}();a=i([o.Component({selector:"app-login",template:n(802),styles:[n(715)]}),r("design:paramtypes",["function"==typeof(d=void 0!==s.AuthService&&s.AuthService)&&d||Object])],a),t.LoginComponent=a;var d},549:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(65),a=n(22),d=n(2),c=function(){function e(e,t){this.authService=e,this.router=t,this.navLinks=[]}return e.prototype.ngOnInit=function(){var e=this;this.authService.auth$.subscribe(function(t){if(t){e.int&&clearInterval(e.int);var n=d().add(1,"hour");e.int=setInterval(function(){return e.remainedTime=d(new Date(n.diff(d()))).utc().format("mm:ss")},900)}e.auth=t,e.user=e.authService.user,e.isAdmin=t&&"admin"===e.authService.userType,e.isBranch=t&&"branch"===e.authService.userType,e.isPrep=t&&"prep"===e.authService.userType,e.isAdmin&&(e.navLinks.push({label:"Units",link:"units"}),e.navLinks.push({label:"Products",link:"products"}))})},e.prototype.ngOnDestroy=function(){clearInterval(this.int)},e.prototype.logout=function(){clearInterval(this.int),this.authService.logOff()},e}();c=i([o.Component({selector:"app-navbar",template:n(803),styles:[n(716)]}),r("design:paramtypes",["function"==typeof(l=void 0!==s.AuthService&&s.AuthService)&&l||Object,"function"==typeof(u=void 0!==a.Router&&a.Router)&&u||Object])],c),t.NavbarComponent=c;var l,u},550:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(10),a=n(45),d=n(65),c=n(163),l=n(86),u=n(38),p=function(){function e(e,t,n,i){this.restService=e,this.authService=t,this.messageService=n,this.msg=i,this.is_kitchen=!0,this.isAdmin=!1,this.productModels=[],this.isFiltered=!1,this.productName_Code=[],this.productNames=[],this.productCodes=[],this.branchList=[],this.addIsDisable=!1,this.updateIsDisable=!1,this.deleteIsDisable=!1,this.selectedIndex=0,this.hasCountingRuleError=!1,this.selectedProduct="",this.ae=l.ActionEnum}return e.prototype.ngOnInit=function(){var e=this;this.isAdmin="admin"===this.authService.userType,this.isAdmin?this.restService.get("unit?isBranch=true").subscribe(function(t){e.branchData=t.map(function(e){return{id:e.uid,name:e.name,is_kitchen:e.is_kitchen}}),e.getBranchList(),e.loadBranchProducts()},function(e){console.log(e.message)}):this.restService.get("override?uid="+this.authService.unit_id).subscribe(function(t){e.productModels=[];for(var n=function(t){var n=c.ProductModel.fromAnyObject(t),i=new c.ProductModel(n);e.productModels.push(i),e.productNames.find(function(e){return e===n.name})||e.productNames.push(n.name),e.productCodes.find(function(e){return e===n.code})||e.productCodes.push(n.code)},i=0,r=t;i<r.length;i++){n(r[i])}e.refreshDropDown()},function(e){console.log(e.message)}),this.checkDisabilityStatus(),this.productModelCtrl=new s.FormControl,this.filteredNameCode=this.productModelCtrl.valueChanges.startWith(null).map(function(t){return e.filterProducts(t)});var t=!1;this.filteredNameCode.subscribe(function(n){1===n.length?(null==e.filteredProductModel?e.filteredProductModel=new c.ProductModel(e.getProduct(n)):e.filteredProductModel.setProduct(e.getProduct(n)),e.selectedProduct="["+e.filteredProductModel._product.code+"] "+e.filteredProductModel._product.name,e.isFiltered=!0,t=!0):(e.selectedProduct="",e.isFiltered=!1,t=!1)},function(e){console.log(e.message)}),this.productModelCtrl.valueChanges.subscribe(function(n){if(!t){var i=void 0;e.productModelCtrl.value&&(i=e.productModels.find(function(t){return t._product.name.toLowerCase()==e.productModelCtrl.value.toLowerCase()||t._product.code.toLowerCase()==e.productModelCtrl.value.toLowerCase()})),null!==i&&void 0!==i?(null==e.filteredProductModel?e.filteredProductModel=new c.ProductModel(i._product):e.filteredProductModel.setProduct(i._product),e.selectedProduct=e.filteredProductModel._product.name,e.isFiltered=!0):(e.selectedProduct="",e.isFiltered=!1)}},function(e){console.log(e.message)})},e.prototype.refreshDropDown=function(){var e=this;this.productName_Code=[],this.productNames.forEach(function(t,n){return e.productName_Code.push("["+e.productCodes[n]+"] "+t)}),this.productModelCtrl.reset()},e.prototype.doClickedAction=function(e){if(!this.isFiltered||null===this.filteredProductModel)return void this.messageService.message("You should first choose product to override");switch(this.setWaiting(e,!0),e){case l.ActionEnum.add:this.add_updateOverride(!0);break;case l.ActionEnum.update:this.add_updateOverride(!1);break;case l.ActionEnum.delete:this.deleteOverride()}},e.prototype.add_updateOverride=function(e){var t=this,n="";this.isAdmin&&(n="?uid="+this.branchList[this.selectedIndex].id);var i=this.productModels.filter(function(e){return e._product.id===t.filteredProductModel._product.id});if(null===i[0])return console.log("Cannot match id!!!"),void this.messageService.message("Unexpected error has occurred. Please reload your page");this.restService.update("override",this.filteredProductModel._product.id+n,c.ProductModel.toAnyObjectOverride(i[0].getDifferentValues(this.filteredProductModel._product))).subscribe(function(n){t.filteredProductModel._product.isOverridden=!0,i[0].setProduct(t.filteredProductModel._product),e?t.setWaiting(l.ActionEnum.add,!1):t.setWaiting(l.ActionEnum.update,!1),t.checkDisabilityStatus(),t.messageService.message("Counting rule for '"+i[0]._product.name+"' has been overridden in '"+t.branchList[t.selectedIndex].name+"'.")},function(e){console.log(e.message),t.checkDisabilityStatus()})},e.prototype.deleteOverride=function(){var e=this,t="";this.isAdmin&&(t="?uid="+this.branchList[this.selectedIndex].id);var n=this.productModels.filter(function(t){return t._product.id===e.filteredProductModel._product.id});if(null===n[0])return console.log("Cannot match id!!!"),void this.messageService.message("Unexpected error has occurred. Please reload your page");this.restService.delete("override",this.filteredProductModel._product.id+t).subscribe(function(t){e.filteredProductModel._product.isOverridden=!1,n[0].setProduct(c.ProductModel.fromAnyObject(t.json())),e.filteredProductModel.setProduct(c.ProductModel.fromAnyObject(t.json())),e.setWaiting(l.ActionEnum.delete,!1),e.checkDisabilityStatus()},function(t){console.log(t.message),e.checkDisabilityStatus()})},e.prototype.checkDisabilityStatus=function(){this.addIsDisable=!this.isFiltered||this.shouldAddBtnDisable(),this.updateIsDisable=!this.isFiltered||this.shouldUpdateBtnDisable(),this.deleteIsDisable=!this.isFiltered||this.shouldDeleteBtnDisable()},e.prototype.shouldAddBtnDisable=function(){var e=this;if(this.filteredProductModel.waiting.getValue().adding||this.hasCountingRuleError)return!0;var t=this.productModels.filter(function(t){return t._product.id===e.filteredProductModel._product.id});return null===t[0]?(console.log("Id changed!!!"),!0):!t[0].isDifferent(this.filteredProductModel._product)},e.prototype.shouldUpdateBtnDisable=function(){var e=this;if(this.filteredProductModel.waiting.getValue().updating||this.hasCountingRuleError)return!0;var t=this.productModels.filter(function(t){return t._product.id===e.filteredProductModel._product.id});return null===t[0]?(console.log("Id changed!!!"),!0):!t[0].isDifferent(this.filteredProductModel._product)},e.prototype.shouldDeleteBtnDisable=function(){return!(!this.filteredProductModel.waiting.getValue().deleting&&!this.hasCountingRuleError)},e.prototype.changedTab=function(){var e=this;this.filteredProductModel=null,this.isFiltered=!1;var t=this.selectedProduct;this.loadBranchProducts(function(){null!==t&&""!==t&&(e.selectedProduct=t,e.productModelCtrl.setValue(e.selectedProduct),e.productModelCtrl.markAsTouched())})},e.prototype.loadBranchProducts=function(e){var t=this;void 0===e&&(e=function(){}),this.isAdmin&&this.restService.get("override?uid="+this.branchList[this.selectedIndex].id).subscribe(function(n){t.productModels=[],t.productNames=[],t.productCodes=[];for(var i=0,r=n;i<r.length;i++){var o=r[i],s=c.ProductModel.fromAnyObject(o),a=new c.ProductModel(s);t.productModels.push(a),t.productNames.push(s.name),t.productCodes.push(s.code)}t.refreshDropDown(),e()},function(e){console.log(e.message)})},e.prototype.countingRuleErrorHandler=function(e){e?(this.messageService.warn(e),this.hasCountingRuleError=!0):this.hasCountingRuleError=!1,this.checkDisabilityStatus()},e.prototype.setWaiting=function(e,t){var n={adding:!1,updating:!1,deleting:!1};switch(e){case l.ActionEnum.add:n.adding=t;break;case l.ActionEnum.update:n.updating=t;break;case l.ActionEnum.delete:n.deleting=t}this.filteredProductModel.waiting.next(n)},e.prototype.filterProducts=function(e){return e?this.productName_Code.filter(function(t){return new RegExp(e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"gi").test(t)}):this.productName_Code},e.prototype.getProduct=function(e){var t;return t=this.productModels[this.productName_Code.findIndex(function(t){return e[0]===t})],t._product},e.prototype.showProductList=function(e){null===this.productModelCtrl.value?this.productModelCtrl.setValue(""):e.target.select()},e.prototype.changeFilter=function(){this.selectedProduct=null,this.getBranchList(),this.changedTab()},e.prototype.getBranchList=function(){var e=this;this.branchList=this.branchData.filter(function(t){return t.is_kitchen===e.is_kitchen}).sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})},e}();i([o.ViewChild("autoNameCode"),r("design:type",Object)],p.prototype,"autoNameCode",void 0),p=i([o.Component({selector:"app-override-form",template:n(804),styles:[n(717)]}),r("design:paramtypes",["function"==typeof(m=void 0!==a.RestService&&a.RestService)&&m||Object,"function"==typeof(h=void 0!==d.AuthService&&d.AuthService)&&h||Object,"function"==typeof(f=void 0!==u.MessageService&&u.MessageService)&&f||Object,"function"==typeof(v=void 0!==u.MessageService&&u.MessageService)&&v||Object])],p),t.OverrideFormComponent=p;var m,h,f,v},551:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(72),a=n(10),d=n(163),c=n(86),l=n(45),u=n(38),p=function(){function e(e,t,n){this.restService=e,this.messageService=t,this.elementRef=n,this.isAdding=new s.BehaviorSubject(!1),this.actionIsSuccess=new s.BehaviorSubject(!1),this.productModels=[],this.isFiltered=!1,this.productName_Code=[],this.productNames=[],this.productCodes=[],this.selectedIndex=0,this.nameChose=!1,this.codeChose=!1}return e.prototype.ngOnInit=function(){var e=this;this.restService.get("product").subscribe(function(t){e.productModels=[];for(var n=function(t){var n=d.ProductModel.fromAnyObject(t),i=new d.ProductModel(n);e.productModels.push(i),e.productNames.find(function(e){return e===n.name})||e.productNames.push(n.name),e.productCodes.find(function(e){return e===n.code})||e.productCodes.push(n.code)},i=0,r=t;i<r.length;i++){n(r[i])}e.refreshProductsDropDown()},function(e){console.log(e.message)}),this.productModelCtrlName=new a.FormControl,this.productModelCtrlCode=new a.FormControl,this.filteredName=this.productModelCtrlName.valueChanges.startWith(null).map(function(t){return e.filterProducts(t,"name")}),this.filteredCode=this.productModelCtrlCode.valueChanges.startWith(null).map(function(t){return e.filterProducts(t,"code")});var t=!1;this.filteredName.subscribe(function(n){1===n.length?(t||(e.codeChose=!1,e.nameChose=!1),e.isFiltered=!1,e.filteredProductModel=e.getProduct(n,"name"),e.nameChose=!0,t=!0,e.codeChose||e.productModelCtrlCode.setValue(e.filteredProductModel._product.code),e.isFiltered=!0):(e.nameChose=!1,e.isFiltered=!1,t=!1)},function(e){console.log(e.message)}),this.filteredCode.subscribe(function(n){1===n.length?(t||(e.codeChose=!1,e.nameChose=!1),e.isFiltered=!1,e.filteredProductModel=e.getProduct(n,"code"),console.log(e.filteredProductModel),e.codeChose=!0,t=!0,e.nameChose||e.productModelCtrlName.setValue(e.filteredProductModel._product.name),e.isFiltered=!0):(e.codeChose=!1,e.isFiltered=!1,t=!1)},function(e){console.log(e.message)}),this.productModelCtrlName.valueChanges.subscribe(function(n){if(!t){var i=e.productModels.find(function(t){return t._product.name.toLowerCase()==e.productModelCtrlName.value.toLowerCase()});null!==i&&void 0!==i?(e.isFiltered=!1,e.filteredProductModel=i,e.nameChose=!0,e.codeChose||e.productModelCtrlCode.setValue(e.filteredProductModel._product.code),e.isFiltered=!0):(e.isFiltered=!1,e.nameChose=!1)}},function(e){console.log(e.message)}),this.productModelCtrlCode.valueChanges.subscribe(function(n){if(!t){var i=e.productModels.find(function(t){return t._product.code.toLowerCase()==e.productModelCtrlCode.value.toLowerCase()});null!==i&&void 0!==i?(e.isFiltered=!1,e.filteredProductModel=i,e.codeChose=!0,e.nameChose||e.productModelCtrlName.setValue(e.filteredProductModel._product.name),e.isFiltered=!0):(e.isFiltered=!1,e.codeChose=!1)}},function(e){console.log(e.message)})},e.prototype.refreshProductsDropDown=function(){var e=this;this.productName_Code=[],this.productNames.forEach(function(t){return e.productName_Code.push(t)}),this.productCodes.forEach(function(t){return e.productName_Code.push(t)})},e.prototype.doClickedAction=function(e){var t=e.type,n=e.data;switch(this.disableEnable(n.id,t,!0),t){case c.ActionEnum.add:this.addProduct(n);break;case c.ActionEnum.delete:this.deleteProduct(n.id);break;case c.ActionEnum.update:this.updateProduct(n.id,n)}},e.prototype.addProduct=function(e){var t=this,n=this.productModels.find(function(t){return t._product.name.toLowerCase()===e.name.toLowerCase()});if(null!==n&&void 0!==n)return this.messageService.warn("The '"+n._product.name+"' name is already exist."),void this.disableEnable(e.id,c.ActionEnum.add,!1);var i=this.productModels.find(function(t){return t._product.code.toLowerCase()===e.code.toLowerCase()});if(null!==i&&void 0!==i)return this.messageService.warn("The '"+i._product.code+"' code is already exist."),void this.disableEnable(e.id,c.ActionEnum.add,!1);var r=e.name;this.restService.insert("product",d.ProductModel.toAnyObject(e)).subscribe(function(n){e.id=n;var i=new d.ProductModel(e);t.actionIsSuccess.next(!0),t.productModels.push(i),t.productNames.push(i._product.name),t.productCodes.push(i._product.code),t.refreshProductsDropDown(),t.disableEnable(e.id,c.ActionEnum.add,!1),t.actionIsSuccess.next(!1),t.messageService.message("'"+r+"' is added to products.")},function(n){t.messageService.error(n),o.isDevMode()&&console.log(n),t.disableEnable(e.id,c.ActionEnum.add,!1)})},e.prototype.deleteProduct=function(e){var t=this;this.restService.delete("product",e).subscribe(function(n){var i=t.productModels.filter(function(t){return t._product.id===e});t.productModels=t.productModels.filter(function(t){return t._product.id!==e}),t.productNames=t.productNames.filter(function(e){return e!==i[0]._product.name}),t.productCodes=t.productCodes.filter(function(e){return e!==i[0]._product.code}),t.refreshProductsDropDown(),t.isFiltered=!1,t.filteredProductModel=null,t.productModelCtrlName.setValue(""),t.messageService.message("Product is deleted.")},function(n){t.messageService.error(n),o.isDevMode()&&console.log(n),t.disableEnable(e,c.ActionEnum.delete,!1)})},e.prototype.updateProduct=function(e,t){var n=this,i=this.productModels.find(function(e){return e._product.name.toLowerCase()===t.name.toLowerCase()});if(null!==i&&void 0!==i&&t.name!==this.filteredProductModel._product.name)return this.messageService.warn("The '"+i._product.name+"' name is already exist."),void this.disableEnable(e,c.ActionEnum.update,!1);var r=this.productModels.find(function(e){return e._product.code.toLowerCase()===t.code.toLowerCase()});if(null!==r&&void 0!==r&&t.code!==this.filteredProductModel._product.code)return this.messageService.warn("The '"+r._product.code+"' code is already exist."),void this.disableEnable(e,c.ActionEnum.update,!1);var s=this.productModels.findIndex(function(t){return t._product.id==e}),a=this.productModels[s]._product.code,l=this.productModels[s]._product.name;this.restService.update("product",e,d.ProductModel.toAnyObject(this.productModels[s].getDifferentValues(t))).subscribe(function(i){n.actionIsSuccess.next(!0),n.productModels[s].setProduct(t);var r=n.productNames.findIndex(function(e){return e===l});n.productNames[r]=t.name;var o=n.productCodes.findIndex(function(e){return e===a});n.productCodes[o]=t.code,n.refreshProductsDropDown(),n.disableEnable(e,c.ActionEnum.update,!1),n.messageService.message("'"+name+"' is updated in products."),n.actionIsSuccess.next(!1)},function(t){n.messageService.error(t),o.isDevMode()&&console.log(t),n.disableEnable(e,c.ActionEnum.update,!1)})},e.prototype.disableEnable=function(e,t,n){var i=this.productModels.find(function(t){return t._product.id==e}),r=i?i.waiting.getValue():null;switch(t){case c.ActionEnum.update:r.updating=n;break;case c.ActionEnum.delete:r.deleting=n;break;case c.ActionEnum.add:this.isAdding.next(n)}i&&i.waiting.next(r)},e.prototype.filterProducts=function(e,t){var n=[];return"name"===t?(n=e?this.productNames.filter(function(t){return new RegExp(e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"gi").test(t)}):this.productNames,n.length>0&&(this.filteredCode.source=this.getProductCode(n))):"code"===t&&(n=e?this.productCodes.filter(function(t){return new RegExp(e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"gi").test(t)}):this.productCodes,n.length>0&&(this.filteredName.source=this.getProductName(n))),n},e.prototype.getProductName=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.productModels.find(function(t){return t._product.code==e})._product.name)}),n},e.prototype.getProductCode=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.productModels.find(function(t){return t._product.name==e})._product.code)}),n},e.prototype.getProduct=function(e,t){var n;return"name"===t?n=this.productModels[this.productName_Code.findIndex(function(t){return e[0]===t})]:"code"===t&&(n=this.productModels[this.productName_Code.findIndex(function(t){return e[0]===t})-this.productNames.length]),n},e.prototype.showProductList=function(e,t){"name"===t?null===this.productModelCtrlName.value?this.productModelCtrlName.setValue(""):e.target.select():"code"===t&&(null===this.productModelCtrlCode.value?this.productModelCtrlCode.setValue(""):e.target.select())},e}();i([o.ViewChild("autoNameInput"),r("design:type",Object)],p.prototype,"autoNameInput",void 0),p=i([o.Component({selector:"app-product-form",template:n(806),styles:[n(719)]}),r("design:paramtypes",["function"==typeof(m=void 0!==l.RestService&&l.RestService)&&m||Object,"function"==typeof(h=void 0!==u.MessageService&&u.MessageService)&&h||Object,"function"==typeof(f=void 0!==o.ElementRef&&o.ElementRef)&&f||Object])],p),t.ProductFormComponent=p;var m,h,f},552:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(72),a=n(114),d=n(163),c=n(86),l=n(45),u=n(38),p=function(){function e(e,t){this.restService=e,this.messageService=t,this.isAdd=!0,this.action=new o.EventEmitter,this.hasCountingRuleError=!1,this.countingRuleError="",this.formTitle="",this.ae=c.ActionEnum,this.addIsDisable=!1,this.updateIsDisable=!1,this.deleteIsDisable=!1,this.measuringUnits=["Kg","gr","L","lb","oz","fl oz","mL","units","packs","dozens","barrels"],this.prepUnits=[]}return Object.defineProperty(e.prototype,"productModel",{get:function(){return this.tempProductModel},set:function(e){this.tempProductModel=e,this.ngOnInit()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;if(this.product=new a.Product,this.restService.get("unit?isBranch=false").subscribe(function(t){e.prepUnits=[];for(var n=0,i=t;n<i.length;n++){var r=i[n],o={id:r.uid,name:r.name};e.prepUnits.push(o)}},function(e){console.log(e)}),this.actionIsSuccess.subscribe(function(t){if(t===!0){if(e.isAdd===!0){e.product.id=-1,e.product.name="",e.product.code="",e.product.size=null,e.product.measuringUnit=null,e.product.prep_unit_id=null,e.product.minQty=-12345678,e.product.maxQty=null,e.product.price=null;for(var n in e.product.coefficients)e.product.coefficients[n]=1;e.product.countingRecursion=""}e.disabilityStatus()}},function(e){console.log(e.message)}),this.isAdd){this.isAdding.subscribe(function(t){e._isAdding=t,e.disabilityStatus()},function(e){console.log(e.message)}),this.formTitle="New Product",this.product.id=-1,this.product.name="",this.product.code="",this.product.size=null,this.product.measuringUnit=null,this.product.prep_unit_id=null,this.product.countingRecursion="",this.product.minQty=null,this.product.maxQty=null,this.product.price=null;for(var t in this.product.coefficients)this.product.coefficients[t]=1}else{this.productModel.waiting.subscribe(function(t){e._isUpdating=t.updating,e._isDeleting=t.deleting,e.disabilityStatus()},function(e){console.log(e.message)}),this.product.id=this.tempProductModel._product.id,this.product.name=this.tempProductModel._product.name,this.product.code=this.tempProductModel._product.code,this.product.size=this.tempProductModel._product.size,this.product.measuringUnit=this.tempProductModel._product.measuringUnit,this.product.prep_unit_id=this.tempProductModel._product.prep_unit_id,this.product.maxQty=this.tempProductModel._product.maxQty,this.product.minQty=this.tempProductModel._product.minQty,this.product.price=this.tempProductModel._product.price;for(var t in this.tempProductModel._product.coefficients)this.product.coefficients[t]=this.tempProductModel._product.coefficients[t];this.product.countingRecursion=this.tempProductModel._product.countingRecursion,this.formTitle=this.product.name}this.disabilityStatus()},e.prototype.actionEmitter=function(e){var t={type:e,data:this.product};this.action.emit(t)},e.prototype.disabilityStatus=function(){this.isAdd?this.addIsDisable=this.shouldDisableAddBtn():(this.deleteIsDisable=this.shouldDisableDeleteBtn(),this.updateIsDisable=this.shouldDisableUpdateBtn())},e.prototype.isCorrectFormData=function(){for(var e in this.product.coefficients)if(this.product.coefficients[e]<0&&(this.product.coefficients[e]=1),this.product.coefficients[e]>99999&&(this.product.coefficients[e]=99999),0===this.product.coefficients[e]||null===this.product.coefficients[e])return!1;return this.product.size<0&&(this.product.size=1),this.product.size>99999&&(this.product.size=99999),""!==this.product.name&&""!==this.product.code&&null!==this.product.size&&0!==this.product.size&&null!==this.product.measuringUnit&&null!==this.product.prep_unit_id&&!this.hasCountingRuleError},e.prototype.shouldDisableAddBtn=function(){return this._isAdding===!0||!this.isCorrectFormData()},e.prototype.shouldDisableUpdateBtn=function(){return this._isUpdating===!0||(this.productModel.isDifferent(this.product)!==!0||!this.isCorrectFormData())},e.prototype.shouldDisableDeleteBtn=function(){return this._isDeleting===!0},e.prototype.countingRuleErrorHandler=function(e){e?(this.messageService.warn(e),this.hasCountingRuleError=!0):this.hasCountingRuleError=!1,this.disabilityStatus()},e}();i([o.Input(),r("design:type",Boolean)],p.prototype,"isAdd",void 0),i([o.Input(),r("design:type","function"==typeof(m=void 0!==s.Observable&&s.Observable)&&m||Object)],p.prototype,"isAdding",void 0),i([o.Input(),r("design:type","function"==typeof(h=void 0!==s.Observable&&s.Observable)&&h||Object)],p.prototype,"actionIsSuccess",void 0),i([o.Input(),r("design:type","function"==typeof(f=void 0!==d.ProductModel&&d.ProductModel)&&f||Object),r("design:paramtypes",["function"==typeof(v=void 0!==d.ProductModel&&d.ProductModel)&&v||Object])],p.prototype,"productModel",null),i([o.Output(),r("design:type",Object)],p.prototype,"action",void 0),p=i([o.Component({selector:"app-product-sub-form",template:n(807),styles:[n(720)]}),r("design:paramtypes",["function"==typeof(y=void 0!==l.RestService&&l.RestService)&&y||Object,"function"==typeof(g=void 0!==u.MessageService&&u.MessageService)&&g||Object])],p),t.ProductSubFormComponent=p;var m,h,f,v,y,g},553:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(45),a=n(726),d=n(38),c=n(278),l=n(115),u=n(2),p=function(){function e(e,t){this.restService=e,this.messageService=t,this.productModels=[],this.unitModels=[],this.branches=[],this.branchIdForProductReport=0,this.branchIdForDeliveryReport=0,this.deliveryReportBtnDisabled=!0,this.inventoryReportBtnDisabled=!0}return e.prototype.ngOnInit=function(){var e=this;this.restService.get("unit?isBranch=true").subscribe(function(t){e.unitModels=[];for(var n=0,i=t;n<i.length;n++){var r=i[n],o=new l.Unit;o.id=r.uid,o.name=r.name,o.username=r.username,o.password="",o.is_branch=r.is_branch,o.is_kitchen=r.is_kitchen;var s=new c.UnitModel(o);e.unitModels.push(s)}e.branches=e.unitModels.map(function(e){return e._unit}),e.branchesWithoutAllOption=e.branches.map(function(e){return e});var a=new l.Unit;a.id=0,a.name="All",e.branches.push(a)},function(t){e.messageService.error(t),o.isDevMode()&&console.log(t)})},e.prototype.loadDataForProductsReport=function(){var e=this,t=u().format("YYYY-MM-DD");0===this.branchIdForProductReport?this.restService.get("reports/all_products/").subscribe(function(n){e.downloadCSV(e.convertAllProductsToCSV(n),"all-products-"+t+".csv")},function(e){console.log(e.message)}):this.restService.get("reports/products/"+this.branchIdForProductReport).subscribe(function(n){var i=e.branches.find(function(t){return t.id===e.branchIdForProductReport}),r=i.name+"-products-"+t+".csv";e.downloadCSV(e.convertBranchProductsToCSV(n,i),r)},function(e){console.error(e.message)})},e.prototype.prepareInventoryCountingReport=function(){var e=this;if(!this.branchIdForInventoryReport)return void this.messageService.message("Please select a branch");this.restService.get("reports/inventory_counting/"+this.branchIdForInventoryReport).subscribe(function(t){var n=e.branches.find(function(t){return t.id===e.branchIdForInventoryReport}),i=u().format("YYYY-MM-DD"),r=n.name+"-inventory-counting-report-"+i+".csv";e.downloadCSV(e.wrapInventoryCountingReportResults(t),r)},function(e){console.log(e)})},e.prototype.wrapInventoryCountingReportResults=function(e){var t=["Product Name","Product Code","Last Counted","Inventory Count","Next Count Date","Estimate Stock Availability","Branch Name"],n=e.map(function(e){return{"Product Name":e.product_name,"Product Code":e.product_code,"Branch Name":e.branch_name,"Last Counted":u(e.last_counted).format("ddd DD MMM YYYY"),"Inventory Count":e.product_count,"Next Count Date":u(e.next_count_date).format("ddd DD MMM YYYY"),"Estimate Stock Availability":e.estimate}});return this.convertToCSV(t,n)},e.prototype.checkDisabilityStatus=function(){this.startDate&&this.endDate?this.deliveryReportBtnDisabled=!1:this.deliveryReportBtnDisabled=!0,this.branchIdForInventoryReport?this.inventoryReportBtnDisabled=!1:this.inventoryReportBtnDisabled=!0},e.prototype.prepareDeliveryReport=function(){var e=this;if(!this.startDate||!this.endDate)return void this.messageService.message("Please select a date range");var t=u(this.startDate),n=u(this.endDate);if(t.isAfter(n))return void this.messageService.warn("Selected date range is not valid");var i,r=t.format("YYYY-MM-DD"),o=n.format("YYYY-MM-DD");i=0===this.branchIdForDeliveryReport?"reports/delivery/"+r+"/"+o:"reports/branch_delivery/"+this.branchIdForDeliveryReport+"/"+r+"/"+o,this.restService.get(i).subscribe(function(t){e.downloadCSV(e.wrapDeliveryReportResults(t),"delivery-report-"+r+"-"+o+".csv")},function(e){console.log(e)})},e.prototype.wrapDeliveryReportResults=function(e){var t=["Product Name","Product Code","Delivered To","Date","Quantity","Product Price","Subtotal"],n=e.map(function(e){return{"Product Name":e.product_name,"Product Code":e.product_code,"Delivered To":e.branch_name,Date:u(e.counting_date).format("YYYY-MM-DD"),Quantity:e.real_delivery,"Product Price":e.product_price?"£"+e.product_price:"",Subtotal:e.subtotal?"£"+e.subtotal:0}}),i=e.reduce(function(e,t){return e+(t.subtotal?parseFloat(t.subtotal):0)},0);return n.push({"Product Name":"Total",Subtotal:"£"+i.toFixed(2)}),this.convertToCSV(t,n)},e.prototype.convertBranchProductsToCSV=function(e,t){e=e.filter(function(e){return e.prep_unit_is_kitchen===t.is_kitchen});var n=["Product Id","Name","Code","Size","Measuring Unit","Price","Preparing Unit Name","Min Quantity","Max Quantity","Usage","Is Overridden","Monday Coef.","Tuesday Coef.","Wednesday Coef.","Thursday Coef.","Friday Coef.","Friday Coef.","Saturday Coef.","Sunday Coef.","Inventory Counting Recursion"],i=e.map(function(e){return{"Product Id":e.pid,Name:e.name,Code:e.code,Size:e.size,"Measuring Unit":e.measuring_unit,Price:e.price?"£"+e.price.substring(1):"","Preparing Unit Name":e.prep_unit_name,"Min Quantity":e.default_min,"Max Quantity":e.default_max,"Is Overridden":void 0!==e.isOverridden&&e.isOverridden,"Inventory Counting Recursion":e.recursion,Usage:e.default_usage,"Monday Coef.":e.default_mon_multiple,"Tuesday Coef.":e.default_tue_multiple,"Wednesday Coef.":e.default_wed_multiple,"Thursday Coef.":e.default_thu_multiple,"Friday Coef.":e.default_fri_multiple,"Saturday Coef.":e.default_sat_multiple,"Sunday Coef.":e.default_sun_multiple}});return this.convertToCSV(n,i)},e.prototype.convertAllProductsToCSV=function(e){var t=["Product Id","Name","Code","Size","Measuring Unit","Price","Preparing Unit Name","Min Quantity","Max Quantity","Usage","Monday Coef.","Tuesday Coef.","Wednesday Coef.","Thursday Coef.","Friday Coef.","Friday Coef.","Saturday Coef.","Sunday Coef.","Inventory Counting Recursion"],n=e.map(function(e){return{"Product Id":e.pid,Name:e.name,Code:e.code,Size:e.size,"Measuring Unit":e.measuring_unit,Price:e.price?"£"+e.price.substring(1):"","Preparing Unit Name":e.prep_unit_name,"Min Quantity":e.default_min,"Max Quantity":e.default_max,Usage:e.default_usage,"Monday Coef.":e.default_mon_multiple,"Tuesday Coef.":e.default_tue_multiple,"Wednesday Coef.":e.default_wed_multiple,"Thursday Coef.":e.default_thu_multiple,"Friday Coef.":e.default_fri_multiple,"Saturday Coef.":e.default_sat_multiple,"Sunday Coef.":e.default_sun_multiple,"Inventory Counting Recursion":e.recursion.replace(/,/g," - ")}});return this.convertToCSV(t,n)},e.prototype.convertToCSV=function(e,t){var n,i,r,o;return r=",",o="\n",n="",n+=e.join(r),n+=o,t.forEach(function(t){i=0,e.forEach(function(e){i>0&&(n+=r),n+=void 0!==t[e]?t[e]:"",i++}),n+=o}),n},e.prototype.downloadCSV=function(e,t){if(void 0===e)return void console.error("no data set for creating file");var n=new Blob([e],{type:"text/csv;charset=utf-8"});a.saveAs(n,t)},e}();p=i([o.Component({selector:"app-reports",template:n(808),styles:[n(721)]}),r("design:paramtypes",["function"==typeof(m=void 0!==s.RestService&&s.RestService)&&m||Object,"function"==typeof(h=void 0!==d.MessageService&&d.MessageService)&&h||Object])],p),t.ReportsComponent=p;var m,h},554:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=function(){function e(){this._days=[],this.daysChange=new o.EventEmitter,this.calDays=[]}return Object.defineProperty(e.prototype,"days",{get:function(){return this._days},set:function(e){this._days=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){for(var e=0;e<5;e++){for(var t=[],n=0;n<6||4===e&&n<7;n++){var i=6*e+n+1;this.reverse&&(i=31-i),t.push(i)}this.calDays.push(t)}},e.prototype.monthDaysChange=function(e){var t=e.value;this.reverse&&t++,e.source.checked?this.days.indexOf(t)===-1&&this.days.push(t):this.days.indexOf(t)!==-1&&this.days.splice(this.days.indexOf(t),1),this.daysChange.emit(this._days)},e}();i([o.Input(),r("design:type",Array),r("design:paramtypes",[Array])],s.prototype,"days",null),i([o.Output(),r("design:type",Object)],s.prototype,"daysChange",void 0),i([o.Input(),r("design:type",Boolean)],s.prototype,"reverse",void 0),s=i([o.Component({selector:"app-monthday",template:n(809),styles:[n(722)]}),r("design:paramtypes",[])],s),t.MonthdayComponent=s},555:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(94),a=n(2),d=function(){function e(){this.RRuleStrChange=new o.EventEmitter,this.freqs=["Daily","Weekly","Monthly","Never"],this.freqsConst=[s.RRule.DAILY,s.RRule.WEEKLY,s.RRule.MONTHLY,null],this.freqsName=["day","week","month"],this.weekdays=["Mon","Tue","Wed","Thr","Fri","Sat","Sun"],this.weekdaysConst=[s.RRule.MO,s.RRule.TU,s.RRule.WE,s.RRule.TH,s.RRule.FR,s.RRule.SA,s.RRule.SU],this.weekpos=[1,2,3,4,-1],this.weekposName=["First","Second","Third","Fourth","Last"],this.byweekday=[],this.text="",this.showWeekdays=!1,this.showMonthOptions=!1,this.monthlyInputMode="",this.monthDaysOption=[],this.monthDaysPast=[],this.monthDaysRemained=[],this.bymonthday=[],this.bysetpos=[],this.freq=""}return Object.defineProperty(e.prototype,"RRuleStr",{get:function(){return this._rstr},set:function(e){""!==e&&this._rstr||(this._rstr=e,this.ngOnInit(),this.text="")},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.rule=s.RRule.fromString(this.RRuleStr),this.options=this.rule.options,this.freq=this.options.freq,this.options.bysetpos&&(this.bysetpos=this.options.bysetpos),this.options.bymonthday&&(this.bymonthday=this.options.bymonthday),this.options.byweekday&&this.options.byweekday.length?this.byweekday=this.options.byweekday.map(function(t){return e.weekdaysConst[t]}):this.options.byweekday&&(this.byweekday=this.options.byweekday),this.bysetpos.length>0?this.monthlyInputMode="week":this.bymonthday.length>0&&(this.monthlyInputMode="month"),this.calcPastOrRemained()},e.prototype.onChange=function(){try{for(var e in this.options)this.options[e]&&0!==this.options[e].length&&["bynmonthday","bynweeday","bynsetpos","byhour","byminute","bysecond"].indexOf(e)===-1||delete this.options[e];this.options.freq!==this.freq?(this.options.freq=this.freq,this.options.freq===s.RRule.DAILY?(delete this.options.byweekday,delete this.options.bysetpos,this.bysetpos=[],this.byweekday=[],delete this.options.bymonthday,this.bymonthday=[],this.monthDaysPast=[],this.monthDaysRemained=[]):this.options.freq===s.RRule.WEEKLY?(delete this.options.bysetpos,this.bysetpos=[],delete this.options.bymonthday,this.bymonthday=[],this.monthDaysPast=[],this.monthDaysRemained=[]):this.options.freq===s.RRule.MONTHLY&&(delete this.options.byweekday,delete this.options.bysetpos,"month"===this.monthlyInputMode?(this.bymonthday=[a().get("D")],this.options.bymonthday=this.bymonthday):(delete this.options.bymonthday,this.bymonthday=[]),this.bysetpos=[],this.byweekday=[])):this.options.freq=this.freq,this.options.bymonth=[],this.rule=new s.RRule(this.options),this.rule.options.bymonth=[],this.calcPastOrRemained(),this.emitChange(),this.showMonthOptions=this.options.freq===s.RRule.MONTHLY,this.showWeekdays=this.options.freq===s.RRule.WEEKLY||this.options.freq===s.RRule.MONTHLY&&"week"===this.monthlyInputMode,this.showWeekdays||(this.options.byweekday=[]),this.populateNextOccurrences()}catch(e){console.log(e)}},e.prototype.calcPastOrRemained=function(){this.monthDaysPast=this.bymonthday.filter(function(e){return e>0}),this.monthDaysPast.length&&this.monthDaysOption.indexOf("past")&&this.monthDaysOption.push("past"),this.monthDaysRemained=this.bymonthday.filter(function(e){return e<0}),this.monthDaysRemained.length&&this.monthDaysOption.push("remained"),this.showMonthDaysPast=this.monthDaysOption.indexOf("past")!==-1,this.showMonthDaysRemained=this.monthDaysOption.indexOf("remained")!==-1},e.prototype.emitChange=function(){this.RRuleStrChange.emit({value:this.rule.options.freq?this.rule.toString():"",error:this.validate()})},e.prototype.populateNextOccurrences=function(){if(this.rule.options.freq){var e=new Date,t=a(e).add(366,"d").toDate();this.text=this.rule.between(e,t).map(function(e){return a(e).format("ddd DD-MMM-YY")}).splice(0,10).concat([this.rule.toString()]).join("\n")}else this.text=""},e.prototype.validate=function(){var e="";return this.options.freq!==s.RRule.WEEKLY||this.byweekday.length?this.rule.options.freq===s.RRule.MONTHLY&&"week"===this.monthlyInputMode?this.bysetpos.length&&!this.byweekday.length?e="choose weekdays":this.options.freq===s.RRule.MONTHLY&&this.byweekday.length&&!this.bysetpos.length?e="choose week numbers in month":this.byweekday.length||this.bysetpos.length||(e="choose week numbers and weekdays"):this.rule.options.freq===s.RRule.MONTHLY&&"month"===this.monthlyInputMode&&(this.showMonthDaysPast&&!this.monthDaysPast.length?e="No days past month is chosen":this.showMonthDaysRemained&&!this.monthDaysRemained.length?e="No days from month remainder is chosen":this.showMonthDaysRemained||this.showMonthDaysPast||(e="choose a day")):e="choose a weekday",e},e.prototype.onMonthlyInputModeChange=function(e){this.onChange()},e.prototype.byweekdayChange=function(e){this.multipleChoice(e,"byweekday"),this.options.byweekday=this.byweekday,delete this.options.bymonthday,this.onChange()},e.prototype.monthDaysPastOrRemainedChange=function(e){this.multipleChoice(e,"monthDaysOption"),this.monthDaysOption.indexOf("past")===-1&&(this.monthDaysPast=[],this.bymonthday=this.bymonthday.filter(function(e){return e<0})),this.monthDaysOption.indexOf("remained")===-1&&(this.monthDaysRemained=[],this.bymonthday=this.bymonthday.filter(function(e){return e>0})),this.options.bymonthday=this.bymonthday,this.calcPastOrRemained(),this.onChange()},e.prototype.monthDaysRemainedChange=function(e){this.monthDaysRemained=e,this.bymonthday=this.bymonthday.filter(function(e){return e>0}).concat(this.monthDaysRemained.map(function(e){return-e})),this.options.bymonthday!==this.bymonthday&&(this.options.bymonthday=this.bymonthday,this.onChange())},e.prototype.monthDaysPastChange=function(e){this.monthDaysPast=e,this.bymonthday=this.bymonthday.filter(function(e){return e<0}).concat(this.monthDaysPast),this.options.bymonthday!==this.bymonthday&&(this.options.bymonthday=this.bymonthday,this.onChange())},e.prototype.weekposChange=function(e){this.multipleChoice(e,"bysetpos"),this.options.bysetpos=this.bysetpos,delete this.options.bymonthday,this.onChange()},e.prototype.multipleChoice=function(e,t){e.source.checked?this[t].indexOf(e.value)===-1&&this[t].push(e.value):this[t].indexOf(e.value)!==-1&&this[t].splice(this[t].indexOf(e.value),1)},e}();i([o.Input(),r("design:type",Object),r("design:paramtypes",[Object])],d.prototype,"RRuleStr",null),i([o.Output(),r("design:type",Object)],d.prototype,"RRuleStrChange",void 0),d=i([o.Component({selector:"app-rrule",template:n(810),styles:[n(723)]}),r("design:paramtypes",[])],d),t.RRuleComponent=d},556:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(72),a=n(86),d=n(115),c=function(){function e(){this.isAdd=!0,this.isAdding=!1,this.action=new o.EventEmitter,this.unit=new d.Unit,this.ae=a.ActionEnum,this.formTitle="",this.addIsDisable=!0,this.updateIsDisable=!0,this.deleteIsDisable=!1}return e.prototype.ngOnInit=function(){var e=this;this.actionIsSuccess.subscribe(function(t){t===!0&&(e.isAdd===!0&&(e.unit.id=-1,e.unit.name="",e.unit.username="",e.unit.password="",e.unit.is_branch=null,e.unit.is_kitchen=null),e.disabilityStatus())},function(e){console.log(e)}),this.isAdd?(this.formTitle="New Unit",this.unit.id=-1,this.unit.name="",this.unit.username="",this.unit.password="",this.unit.is_branch=null,this.unit.is_kitchen=null):(this.unit.id=this.unitModel._unit.id,this.unit.name=this.unitModel._unit.name,this.unit.username=this.unitModel._unit.username,this.unit.is_branch=this.unitModel._unit.is_branch,this.unit.is_kitchen=this.unitModel._unit.is_kitchen,this.unit.password="",this.unit.is_branch?this.formTitle=this.unit.name+" - Branch":this.formTitle=this.unit.name+" - Prep Unit")},e.prototype.disabilityStatus=function(){this.isAdd?this.addIsDisable=this.shouldDisableAddBtn():(this.deleteIsDisable=this.shouldDisableDeleteBtn(),this.updateIsDisable=this.shouldDisableUpdateBtn())},e.prototype.actionEmitter=function(e){var t={type:e,data:this.unit};this.action.emit(t)},e.prototype.isCorrectFormData=function(e){return(e!==!0||""!==this.unit.password)&&(""!==this.unit.name&&""!==this.unit.username&&null!==this.unit.is_branch)},e.prototype.shouldDisableAddBtn=function(){return this.isAdding===!0||!this.isCorrectFormData(!0)},e.prototype.shouldDisableUpdateBtn=function(){return this.unitModel.waiting.updating===!0||(this.unitModel.isDifferent(this.unit)!==!0||!this.isCorrectFormData(!1))},e.prototype.shouldDisableDeleteBtn=function(){return this.unitModel.waiting.deleting===!0},e}();i([o.Input(),r("design:type",Object)],c.prototype,"isAdd",void 0),i([o.Input(),r("design:type",Object)],c.prototype,"isAdding",void 0),i([o.Input(),r("design:type",Object)],c.prototype,"unitModel",void 0),i([o.Input(),r("design:type","function"==typeof(l=void 0!==s.Observable&&s.Observable)&&l||Object)],c.prototype,"actionIsSuccess",void 0),i([o.Output(),r("design:type",Object)],c.prototype,"action",void 0),c=i([o.Component({selector:"app-sub-form",template:n(811),styles:[n(724)]}),r("design:paramtypes",[])],c),t.SubFormComponent=c;var l},557:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(72),a=n(278),d=n(86),c=n(115),l=n(45),u=n(38),p=function(){function e(e,t){this.restService=e,this.messageService=t,this.unitModels=[],this.isAdding=!1,this.actionIsSuccess=new s.BehaviorSubject(!1)}return e.prototype.ngOnInit=function(){var e=this;this.restService.get("unit").subscribe(function(t){e.unitModels=[];for(var n=0,i=t;n<i.length;n++){var r=i[n],o=new c.Unit;o.id=r.uid,o.name=r.name,o.username=r.username,o.password="",o.is_branch=r.is_branch,o.is_kitchen=r.is_kitchen;var s=new a.UnitModel(o);e.unitModels.push(s)}e.sortUnitModelList()},function(t){e.messageService.error(t),o.isDevMode()&&console.log(t)})},e.prototype.doClickedAction=function(e){var t=e.type,n=e.data;switch(this.disableEnable(n.id,t,!0),t){case d.ActionEnum.add:this.addUnit(n);break;case d.ActionEnum.delete:this.deleteUnit(n.id);break;case d.ActionEnum.update:this.updateUnit(n.id,n)}},e.prototype.addUnit=function(e){var t=this,n=e.name;this.restService.insert("unit",e).subscribe(function(i){e.id=i,e.password="";var r=new a.UnitModel(e);t.actionIsSuccess.next(!0),t.unitModels.push(r),t.sortUnitModelList(),t.disableEnable(e.id,d.ActionEnum.add,!1),t.actionIsSuccess.next(!1),t.messageService.message("'"+n+"' is added to units as a new "+(e.is_branch?"Branch":"Prep Unit"))},function(n){t.messageService.error(n),o.isDevMode()&&console.log(n),t.disableEnable(e.id,d.ActionEnum.add,!1)})},e.prototype.deleteUnit=function(e){var t=this;this.restService.delete("unit",e).subscribe(function(n){t.unitModels=t.unitModels.filter(function(t){return t._unit.id!==e}),t.messageService.message("Unit is deleted.")},function(n){t.messageService.error(n),o.isDevMode()&&console.log(n),t.disableEnable(e,d.ActionEnum.delete,!1)})},e.prototype.updateUnit=function(e,t){var n=this,i=this.unitModels.findIndex(function(t){return t._unit.id==e});this.restService.update("unit",e,this.unitModels[i].getDifferentValues(t)).subscribe(function(r){n.actionIsSuccess.next(!0),t.password="",n.unitModels[i].setUnit(t),n.sortUnitModelList(),n.disableEnable(e,d.ActionEnum.update,!1),n.messageService.message(t.name+" ("+(t.is_branch?"branch":"prep unit")+") is updated."),n.actionIsSuccess.next(!1)},function(t){n.messageService.error(t),o.isDevMode()&&console.log(t),n.disableEnable(e,d.ActionEnum.update,!1)})},e.prototype.disableEnable=function(e,t,n){var i=this.unitModels.find(function(t){return t._unit.id==e});switch(t){case d.ActionEnum.update:i.waiting.updating=n;break;case d.ActionEnum.delete:i.waiting.deleting=n;break;case d.ActionEnum.add:this.isAdding=n}},e.prototype.sortUnitModelList=function(){this.unitModels.sort(function(e,t){return e._unit.is_branch===!1&&t._unit.is_branch===!0?-1:e._unit.is_branch===!0&&t._unit.is_branch===!1?1:e._unit.name>t._unit.name?1:e._unit.name<t._unit.name?-1:0})},e}();p=i([o.Component({selector:"app-unit-form",template:n(812),styles:[n(725)]}),r("design:paramtypes",["function"==typeof(m=void 0!==l.RestService&&l.RestService)&&m||Object,"function"==typeof(h=void 0!==u.MessageService&&u.MessageService)&&h||Object])],p),t.UnitFormComponent=p;var m,h},558:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.environment={production:!0}},559:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(573),n(566),n(562),n(568),n(567),n(565),n(564),n(572),n(561),n(560),n(570),n(563),n(571),n(569),n(574),n(1076)},65:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(11),a=n(45),d=n(22),c=n(38),l=function(){function e(e,t,n){var i=this;this.restService=e,this.router=t,this.messageService=n,this.authStream=new s.Subject,this.user="",this.userType="",this.unitName="",this.auth$=this.authStream.asObservable(),this.originBeforeLogin="/",this.restService.call("validUser").subscribe(function(e){i.afterLogin(e),i.messageService.message("You are already logged in as "+i.user+".")},function(e){o.isDevMode()&&console.log(e),i.authStream.next(!1),i.router.navigate(["login"])})}return e.prototype.logIn=function(e,t){var n=this;this.restService.update("login",null,{username:e,password:t}).subscribe(function(e){setTimeout(function(){return n.logOff()},36e5),n.afterLogin(e),n.messageService.message(n.user+" logged in.")},function(e){n.authStream.next(!1),n.messageService.error(e),o.isDevMode()&&console.log(e)})},e.prototype.afterLogin=function(e){var t=e.json();this.user=t.user,this.unitName=t.name,this.userType=t.userType,this.isKitchen=t.isKitchen,this.unit_id=t.uid,this.authStream.next(!0);var n=this.originBeforeLogin;null!==n&&"/"!==n?"branch"===this.userType?n.indexOf("inventory")!==-1||n.indexOf("override")!==-1?this.router.navigate([n]):this.router.navigate(["inventory"]):"prep"===this.userType?n.indexOf("delivery")!==-1?this.router.navigate([n]):this.router.navigate(["delivery"]):"admin"===this.userType&&(n.indexOf("units")!==-1||n.indexOf("products")!==-1||n.indexOf("override")!==-1||n.indexOf("reports")!==-1?this.router.navigate([n]):this.router.navigate([""])):"branch"===this.userType?this.router.navigate(["inventory"]):"prep"===this.userType?this.router.navigate(["delivery"]):this.router.navigate(["/"])},e.prototype.logOff=function(){var e=this;this.restService.call("logout").subscribe(function(){e.messageService.message(e.user+" logged out."),e.user="",e.userType="",e.unitName="",e.authStream.next(!1),e.router.navigate(["login"])},function(t){e.messageService.error(t),o.isDevMode()&&console.log(t)})},e}();l=i([o.Injectable(),r("design:paramtypes",["function"==typeof(u=void 0!==a.RestService&&a.RestService)&&u||Object,"function"==typeof(p=void 0!==d.Router&&d.Router)&&p||Object,"function"==typeof(m=void 0!==c.MessageService&&c.MessageService)&&m||Object])],l),t.AuthService=l;var u,p,m},710:function(e,t,n){t=e.exports=n(23)(),t.push([e.i,"",""]),e.exports=e.exports.toString()},711:function(e,t,n){t=e.exports=n(23)(),t.push([e.i,".numInput{max-width:100px;min-width:80px}.errorMessage{font-weight:700;color:darkred}",""]),e.exports=e.exports.toString()},712:function(e,t,n){t=e.exports=n(23)(),t.push([e.i,".notEqualValues{background-color:#faebd7}.warnColoring{color:darkred}.normalColoring{color:#000}.waiting{margin-top:60px!important;margin-bottom:60px!important;-ms-flex-line-pack:center!important;align-content:center!important}.waitingMessage{color:#fff;font-weight:700;text-align:center}",""]),e.exports=e.exports.toString()},713:function(e,t,n){t=e.exports=n(23)(),t.push([e.i,"",""]),e.exports=e.exports.toString()},714:function(e,t,n){t=e.exports=n(23)(),t.push([e.i,".warnColoring{color:red}.normalColoring{color:#000}",""]),e.exports=e.exports.toString()},715:function(e,t,n){t=e.exports=n(23)(),t.push([e.i,"",""]),e.exports=e.exports.toString()},716:function(e,t,n){t=e.exports=n(23)(),t.push([e.i,"a.toolbar{color:#fff}a.toolbar:hover{color:brown}a.toolbar:visited{color:#fff}a.toolbar:active,a.toolbar:after{color:#faebd7}",""]),e.exports=e.exports.toString()},717:function(e,t,n){t=e.exports=n(23)(),t.push([e.i,".repContainer{padding-top:30px}.repContainer div{padding:5px 0}",""]),e.exports=e.exports.toString()},718:function(e,t,n){t=e.exports=n(23)(),t.push([e.i,"@media screen{#printpage,#printpage *{display:none}}@media print{body *{visibility:hidden;background:transparent}#printpage,#printpage *,body *{-webkit-print-color-adjust:exact!important}#printpage,#printpage *{visibility:visible}#printpage{position:absolute;left:0;top:0}}",""]),e.exports=e.exports.toString()},719:function(e,t,n){t=e.exports=n(23)(),t.push([e.i,".OuterDivStyle{background-color:#607d8b;width:700px;padding:10px;border-radius:7px;text-align:left;margin-left:3px}.InnerDivStyle{background-color:#fff;width:90%;padding:10px;margin-left:2%}.SpanStyle{font-size:x-large;font-weight:700;margin-left:7px}",""]),e.exports=e.exports.toString()},720:function(e,t,n){t=e.exports=n(23)(),t.push([e.i,"input{min-width:100px}.ButtonStyle{margin-left:12px;margin-top:20px;margin-bottom:5px;border-radius:5px;border-width:5px;border-color:#728653;background-color:#607d8b;font-weight:700}md-card{border:2px solid #607d8b;direction:ltr}.numInput{max-width:100px;min-width:80px}",""]),e.exports=e.exports.toString()},721:function(e,t,n){t=e.exports=n(23)(),t.push([e.i,"",""]),e.exports=e.exports.toString()},722:function(e,t,n){t=e.exports=n(23)(),t.push([e.i,"",""]),e.exports=e.exports.toString()},723:function(e,t,n){t=e.exports=n(23)(),t.push([e.i,".h{visibility:hidden}.v{visibility:visible}",""]),e.exports=e.exports.toString()},724:function(e,t,n){t=e.exports=n(23)(),t.push([e.i,".InputStyle{width:35%;margin-top:8px;border:1.5px solid #728653;text-indent:2%}.DivStyle{width:90%;border:2px solid #728653;direction:ltr}.TopSpanStyle{margin-top:8px}.SpanStyle,.TopSpanStyle{width:85px;display:inline-block;text-align:right;font-size:small;font-weight:700}.SpanStyle{margin-top:4px}.ButtonStyle{margin-left:12px;margin-top:20px;margin-bottom:5px;border-radius:5px;border-width:5px;border-color:#728653;background-color:#607d8b;font-weight:700}.RadioButtonStyle{margin-left:20px}md-card{border:2px solid #607d8b;direction:ltr}",""]),e.exports=e.exports.toString()},725:function(e,t,n){t=e.exports=n(23)(),t.push([e.i,".OuterDivStyle{background-color:#607d8b;width:700px;padding:10px;border-radius:7px;text-align:left;margin-left:3px}.InnerDivStyle{background-color:#fff;width:90%;padding:10px;margin-left:2%}.SpanStyle{font-size:x-large;font-weight:700;margin-left:7px}",""]),e.exports=e.exports.toString()},729:function(e,t,n){function i(e){return n(r(e))}function r(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./af":316,"./af.js":316,"./ar":322,"./ar-dz":317,"./ar-dz.js":317,"./ar-ly":318,"./ar-ly.js":318,"./ar-ma":319,"./ar-ma.js":319,"./ar-sa":320,"./ar-sa.js":320,"./ar-tn":321,"./ar-tn.js":321,"./ar.js":322,"./az":323,"./az.js":323,"./be":324,"./be.js":324,"./bg":325,"./bg.js":325,"./bn":326,"./bn.js":326,"./bo":327,"./bo.js":327,"./br":328,"./br.js":328,"./bs":329,"./bs.js":329,"./ca":330,"./ca.js":330,"./cs":331,"./cs.js":331,"./cv":332,"./cv.js":332,"./cy":333,"./cy.js":333,"./da":334,"./da.js":334,"./de":336,"./de-at":335,"./de-at.js":335,"./de.js":336,"./dv":337,"./dv.js":337,"./el":338,"./el.js":338,"./en-au":339,"./en-au.js":339,"./en-ca":340,"./en-ca.js":340,"./en-gb":341,"./en-gb.js":341,"./en-ie":342,"./en-ie.js":342,"./en-nz":343,"./en-nz.js":343,"./eo":344,"./eo.js":344,"./es":346,"./es-do":345,"./es-do.js":345,"./es.js":346,"./et":347,"./et.js":347,"./eu":348,"./eu.js":348,"./fa":349,"./fa.js":349,"./fi":350,"./fi.js":350,"./fo":351,"./fo.js":351,"./fr":354,"./fr-ca":352,"./fr-ca.js":352,"./fr-ch":353,"./fr-ch.js":353,"./fr.js":354,"./fy":355,"./fy.js":355,"./gd":356,"./gd.js":356,"./gl":357,"./gl.js":357,"./he":358,"./he.js":358,"./hi":359,"./hi.js":359,"./hr":360,"./hr.js":360,"./hu":361,"./hu.js":361,"./hy-am":362,"./hy-am.js":362,"./id":363,"./id.js":363,"./is":364,"./is.js":364,"./it":365,"./it.js":365,"./ja":366,"./ja.js":366,"./jv":367,"./jv.js":367,"./ka":368,"./ka.js":368,"./kk":369,"./kk.js":369,"./km":370,"./km.js":370,"./ko":371,"./ko.js":371,"./ky":372,"./ky.js":372,"./lb":373,"./lb.js":373,"./lo":374,"./lo.js":374,"./lt":375,"./lt.js":375,"./lv":376,"./lv.js":376,"./me":377,"./me.js":377,"./mi":378,"./mi.js":378,"./mk":379,"./mk.js":379,"./ml":380,"./ml.js":380,"./mr":381,"./mr.js":381,"./ms":383,"./ms-my":382,"./ms-my.js":382,"./ms.js":383,"./my":384,"./my.js":384,"./nb":385,"./nb.js":385,"./ne":386,"./ne.js":386,"./nl":388,"./nl-be":387,"./nl-be.js":387,"./nl.js":388,"./nn":389,"./nn.js":389,"./pa-in":390,"./pa-in.js":390,"./pl":391,"./pl.js":391,"./pt":393,"./pt-br":392,"./pt-br.js":392,"./pt.js":393,"./ro":394,"./ro.js":394,"./ru":395,"./ru.js":395,"./se":396,"./se.js":396,"./si":397,"./si.js":397,"./sk":398,"./sk.js":398,"./sl":399,"./sl.js":399,"./sq":400,"./sq.js":400,"./sr":402,"./sr-cyrl":401,"./sr-cyrl.js":401,"./sr.js":402,"./ss":403,"./ss.js":403,"./sv":404,"./sv.js":404,"./sw":405,"./sw.js":405,"./ta":406,"./ta.js":406,"./te":407,"./te.js":407,"./tet":408,"./tet.js":408,"./th":409,"./th.js":409,"./tl-ph":410,"./tl-ph.js":410,"./tlh":411,"./tlh.js":411,"./tr":412,"./tr.js":412,"./tzl":413,"./tzl.js":413,"./tzm":415,"./tzm-latn":414,"./tzm-latn.js":414,"./tzm.js":415,"./uk":416,"./uk.js":416,"./uz":417,"./uz.js":417,"./vi":418,"./vi.js":418,"./x-pseudo":419,"./x-pseudo.js":419,"./yo":420,"./yo.js":420,"./zh-cn":421,"./zh-cn.js":421,"./zh-hk":422,"./zh-hk.js":422,"./zh-tw":423,"./zh-tw.js":423};i.keys=function(){return Object.keys(o)},i.resolve=r,e.exports=i,i.id=729},797:function(e,t){e.exports='<p-blockUI [blocked]="blocked">\n  <div style="position:absolute;top:25%;left:40%;text-align: center;width:20%;height:200px">\n    <i class="fa fa-circle-o-notch fa-spin fa-5x" style="position:absolute;top:25%;left:50%"></i>\n  </div>\n</p-blockUI>\n\n<app-navbar></app-navbar>\n<div *ngIf="showError" style="width:100%;background:darkred;color:white"><i class="fa fa-close" style="padding:5px" (click)="closeError()"></i> {{error}}</div>\n<div class="flex-container" style="overflow: auto;"\n     fxLayout="row" fxLayout.xs="column"\n     fxLayoutAlign="center center" fxLayoutAlign.xs="start start">\n  <!--<div class="flex-item" fxFlex="33"></div>-->\n  <div class="flex-item" fxFlex="80"><router-outlet></router-outlet></div>\n  <!--<div class="flex-item" fxFlex="33"></div>-->\n</div>\n\n'},798:function(e,t){e.exports='<span *ngIf="!isOverridden">Inventory Rules By Default:</span>\n<span *ngIf="isOverridden">Inventory Rules Overrides:</span>\n<br/>\n<md-card>\n  <div class="errorMessage">{{showMessage}}</div>\n  <div class="flex-container" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="center top" fxLayoutAlign.xs="start start">\n    <div class="flex-item" style="margin: 5px;" fxFlex="30%">\n      <div class="flex-container" fxLayout="column" fxLayoutAlign="left top">\n        <div class="flex-item" style="margin-left: 5px;" fxFlex="20%">\n          <md-card-content>\n            <md-input-container>\n              <input mdInput min="0" class="numInput minQty" type="number" placeholder="Min Qty" [(ngModel)]="minQty" (ngModelChange)="minChange()" id="minQty" min="0" maxlength="5"/>\n            </md-input-container>\n            <md-input-container>\n              <input mdInput min="0" class="numInput maxQty" type="number" placeholder="Max Qty" [(ngModel)]="maxQty" (ngModelChange)="maxChange()" id="maxQty" maxlength="5"/>\n            </md-input-container>\n          </md-card-content>\n        </div>\n        <div class="flex-item" fxFlex="80%">\n          <md-card-content>\n            <span>Coefficients</span>\n            <md-card>\n              <md-card-content>\n                <div>\n                  <br/>\n                  <div *ngFor="let day of days">\n                    <md-input-container>\n\n                      <input mdInput min="0" class="numInput" type="number" placeholder="{{day}}" [(ngModel)]="coefficients[day]" (ngModelChange)="coeffChange()" id="{{day}}"/>\n                    </md-input-container>\n                  </div>\n                </div>\n              </md-card-content>\n            </md-card>\n          </md-card-content>\n        </div>\n      </div>\n    </div>\n    <div class="flex-item" style="margin: 5px;" fxFlex="70%">\n      <md-card-content>\n        <span>Inventory Counting Recursion</span>\n        <md-card>\n          <md-card-content>\n            <app-rrule [RRuleStr]="recursionRule" (RRuleStrChange)="recurChange($event)"></app-rrule>\n          </md-card-content>\n        </md-card>\n      </md-card-content>\n    </div>\n  </div>\n</md-card>\n'},799:function(e,t){e.exports='<md-card class="outerCard">\n  <div class="flex-container"\n       fxLayout="row" fxLayout.xs="column" fxLayout.sm="column"\n       fxLayoutAlign="center center" fxLayoutAlign.xs="start start" fxLayoutAlign.sm="start start">\n    <md-card-title class="flex-item cardTitle" fxFlex="70">{{unitName}} Delivery</md-card-title>\n    <material-datepicker class="flex-item" fxFlex="30" [(date)]="selectedDate" (onSelect)="dateChanged()">\n    </material-datepicker>\n  </div>\n  <div>\n    <md-card class="mat-card" style="width:295px; margin-bottom:10px;padding:5px; border-radius:25px;">\n      <label for="show-zero-delivery" style="padding:0 10px">Zero deliveries:</label>\n      <md-radio-group [(ngModel)]="showZeroDelivery" (change)="changeFilter()" id="show-zero-delivery">\n        <md-radio-button style="padding: 0 10px;" [value]="false">Hide</md-radio-button>\n        <md-radio-button style="padding: 0 10px;" [value]="true">Show</md-radio-button>\n      </md-radio-group>\n    </md-card>\n  </div>\n  <md-tab-group *ngIf="dataIsReady" class="materialTab" [(selectedIndex)]="selectedIndex" (selectChange)="tabChanged()">\n    <md-tab label="All" *ngIf="overallDeliveryModel._deliveries !== undefined">\n      <md-card class="innerCard">\n        <md-card-title>To Do: Delivery</md-card-title>\n        <md-card-content>\n          <md-card style="overflow: auto;">\n            <md-card-content>\n              <table class="table">\n                <thead>\n                  <tr>\n                    <th [style.width]="thereIsProactiveItem ? \'unset\' : \'20px\'">#</th>\n                    <th>Code</th>\n                    <th>Product</th>\n                    <th>Real Delivery</th>\n                    <th>Min Delivery</th>\n                    <th>Max Delivery</th>\n                    <th>Min Required</th>\n                    <th>Max Stock</th>\n                    <th>Branches Stock</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr *ngFor="let delItem of filteredDeliveries;let i = index">\n                    <td *ngIf="delItem.id !== null" style="width:20px">{{i + 1}}</td>\n                    <td *ngIf="delItem.id === null" style="width: unset">\n                      <md-chip-list>\n                        <md-chip color="primary" selected="true">Added</md-chip>\n                      </md-chip-list>\n                    </td>\n                    <td>{{delItem.productCode}}</td>\n                    <td>{{delItem.productName}}</td>\n                    <td>{{delItem.realDelivery}}</td>\n                    <td *ngIf="delItem.minDelivery !== null">{{delItem.minDelivery}}</td>\n                    <td *ngIf="delItem.minDelivery === null"><i class="fa fa-question warnColoring" aria-hidden="true"></i></td>\n                    <td *ngIf="delItem.maxDelivery !== null">{{delItem.maxDelivery}}</td>\n                    <td *ngIf="delItem.maxDelivery === null"><i class="fa fa-question warnColoring" aria-hidden="true"></i></td>\n                    <td>{{delItem.min}}</td>\n                    <td>{{delItem.max}}</td>\n                    <td *ngIf="delItem.stock !== null">{{delItem.stock}}</td>\n                    <td *ngIf="delItem.stock === null"><i class="fa fa-question warnColoring" aria-hidden="true"></i></td>\n                </tr>\n                  <tr>\n                    <td [style.width]="thereIsProactiveItem ? \'unset\' : \'20px\' "></td>\n                    <td colspan="2">Sum</td>\n                    <td>{{receiversSumDeliveries[\'All\'].realDelivery}}</td>\n                    <td *ngIf="receiversSumDeliveries[\'All\'].minDelivery !== null">{{receiversSumDeliveries[\'All\'].minDelivery}}</td>\n                    <td *ngIf="receiversSumDeliveries[\'All\'].minDelivery === null"><i class="fa fa-question warnColoring" aria-hidden="true"></i></td>\n                    <td *ngIf="receiversSumDeliveries[\'All\'].maxDelivery !== null">{{receiversSumDeliveries[\'All\'].maxDelivery}}</td>\n                    <td *ngIf="receiversSumDeliveries[\'All\'].maxDelivery === null"><i class="fa fa-question warnColoring" aria-hidden="true"></i></td>\n                    <td>{{receiversSumDeliveries[\'All\'].min}}</td>\n                    <td>{{receiversSumDeliveries[\'All\'].max}}</td>\n                    <td *ngIf="receiversSumDeliveries[\'All\'].stock !== null">{{receiversSumDeliveries[\'All\'].stock}}</td>\n                    <td *ngIf="receiversSumDeliveries[\'All\'].stock === null"><i class="fa fa-question warnColoring" aria-hidden="true"></i></td>\n                  </tr>\n                </tbody>\n              </table>\n            </md-card-content>\n          </md-card>\n        </md-card-content>\n        <md-card-content>\n          <button md-raised-button class="ButtonStyle"\n                  *ngIf="isToday"\n                  [(disabled)]="overallDeliveryModel._shouldDisabled"\n                  (click)="printDelivery(overallDeliveryModel)">Print</button>\n        </md-card-content>\n      </md-card>\n    </md-tab>\n    <md-tab *ngFor="let rcv of receivers" class="delayedTab">\n      <ng-template md-tab-label>\n        <i *ngIf="rcv.warn === \'count\'" class="fa fa-exclamation warnColoring" aria-hidden="true"></i>\n        {{rcv.name}}\n      </ng-template>\n      <ng-template md-tab-label *ngIf="rcv.warn === \'login\'">\n        <i class="fa fa-exclamation warnColoring" aria-hidden="true"></i>\n        <i class="fa fa-exclamation warnColoring" aria-hidden="true"></i> {{rcv.name}}\n      </ng-template>\n      <ng-template md-tab-label *ngIf="rcv.warn === \'count\'">\n        <i class="fa fa-exclamation warnColoring" aria-hidden="true"></i> {{rcv.name}}\n      </ng-template>\n      <ng-template md-tab-label *ngIf="rcv.warn === \'no\'">\n        {{rcv.name}}\n      </ng-template>\n      <md-card class="innerCard"\n               *ngIf="!isWaiting[rcv.name] && receiversDeliveryModels[rcv.name] !== undefined && receiversDeliveryModels[rcv.name] !== null">\n        <md-card-title>To Do: Delivery</md-card-title>\n        <md-card-content>\n          <md-card style="min-width: 600px !important; overflow-x: auto;">\n            <md-card-content>\n              <table class="table">\n                <thead>\n                <tr>\n                  <th>#</th>\n                  <th>Code</th>\n                  <th>Product</th>\n                  <th>Real Delivery</th>\n                  <th>Min Delivery</th>\n                  <th>Max Delivery</th>\n                  <th>Min Required</th>\n                  <th>Max Stock</th>\n                  <th>Current Stock</th>\n                  <th>Stock Date</th>\n                  <th>Days to Next Counting</th>\n                </tr>\n                </thead>\n                <tbody style="height: 200px;">\n                <tr *ngFor="let delItem of filteredBranchDeliveries[rcv.name];let i = index">\n                  <td class="buttonItem" *ngIf="delItem.id !== null && delItem.state !== \'added\'">{{i+1}}</td>\n                  <td class="buttonItem" *ngIf="delItem.id === null">\n                    <button md-mini-fab\n                            (click)="removeDeliveryItem(delItem)">\n                      <i class="fa fa-times" aria-hidden="true"></i>\n                    </button>\n                  </td>\n                  <td class="buttonItem" *ngIf="delItem.id !== null && delItem.state === \'added\'">\n                    <md-chip-list>\n                      <md-chip color="primary" selected="true">Added</md-chip>\n                    </md-chip-list>\n                  </td>\n                  <td class="codeItem"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    {{delItem.productCode}}\n                  </td>\n                  <td class="nameItem "\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    {{delItem.productName}}\n                  </td>\n                  <td class="inputItem">\n                    <md-input-container>\n                      <input mdInput type="number"\n                             min="0"\n                             [ngClass]="[(rcv.warn ||((delItem.minDelivery > delItem.realDelivery || delItem.maxDelivery < delItem.realDelivery ) && isToday)) ? \'notEqualValues\' : \'equalValues\']"\n                             [(disabled)]="!isToday"\n                             placeholder="Real Delivery"\n                             [ngModel]="delItem.realDelivery"\n                             (change)="checkRealDeliveryValue($event, delItem)"/>\n                    </md-input-container>\n                  </td>\n                  <td class="column" *ngIf="delItem.stock !== null && delItem.id !== null"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    {{delItem.minDelivery}}\n                  </td>\n                  <td class="column" *ngIf="delItem.stock === null || delItem.id === null"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    <i class="fa fa-question warnColoring" aria-hidden="true"></i>\n                  </td>\n                  <td class="column" *ngIf="delItem.stock !== null && delItem.id !== null"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    {{delItem.maxDelivery}}\n                  </td>\n                  <td class="column" *ngIf="delItem.stock === null || delItem.id === null"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    <i class="fa fa-question warnColoring" aria-hidden="true"></i>\n                  </td>\n                  <td class="column"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">{{delItem.min}}\n                  </td>\n                  <td class="column"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">{{delItem.max}}\n                  </td>\n                  <td class="column" *ngIf="delItem.stock !== null && delItem.id !== null"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    {{delItem.stock}}\n                  </td>\n                  <td class="column" *ngIf="delItem.stock === null || delItem.id === null"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    <i class="fa fa-question warnColoring" aria-hidden="true"></i>\n                  </td>\n                  <td style="min-width: 80px !important;" class="column"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    {{delItem.stockDate}}\n                  </td>\n                  <td *ngIf="delItem.untilNextCountingDay!==null" class="column" [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">{{delItem.untilNextCountingDay}}</td>\n                  <td *ngIf="delItem.untilNextCountingDay===null" class="column"><i class="fa fa-question warnColoring" aria-hidden="true"></i></td>\n                </tr>\n                <tr>\n                  <td class="buttonItem"></td>\n                  <td class="nameItem" colspan="2">Sum</td>\n                  <td class="inputItem">{{receiversSumDeliveries[rcv.name].realDelivery}}</td>\n                  <td class="column" *ngIf="rcv.warn === \'no\'">\n                    {{receiversSumDeliveries[rcv.name].minDelivery}}\n                  </td>\n                  <td class="column" *ngIf="rcv.warn === \'count\' || rcv.warn === \'unknown\'">\n                    <i class="fa fa-question warnColoring" aria-hidden="true"></i>\n                  </td>\n                  <td class="column" *ngIf="rcv.warn === \'no\'">\n                    {{receiversSumDeliveries[rcv.name].maxDelivery}}\n                  </td>\n                  <td class="column" *ngIf="rcv.warn === \'count\' || rcv.warn === \'unknown\'">\n                    <i class="fa fa-question warnColoring" aria-hidden="true"></i>\n                  </td>\n                  <td class="column">{{receiversSumDeliveries[rcv.name].min}}</td>\n                  <td class="column">{{receiversSumDeliveries[rcv.name].max}}</td>\n                  <td class="column" *ngIf="rcv.warn === \'no\'">\n                    {{receiversSumDeliveries[rcv.name].stock}}\n                  </td>\n                  <td class="column" *ngIf="rcv.warn === \'count\' || rcv.warn === \'unknown\'">\n                    <i class="fa fa-question warnColoring" aria-hidden="true"></i>\n                  </td>\n                  <td style="min-width: 80px !important;" class="column">-</td>\n                  <td>-</td>\n                </tr>\n                <tr\n                  *ngIf="isToday && !receiversDeliveryModels[rcv.name]._shouldDisabled && productsList[rcv.name] !== undefined && productsList[rcv.name].length > 0">\n                  <td class="buttonItem"></td>\n                  <td class="codeItem" colspan="2">\n                    <md-input-container>\n                      <input mdInput type="text" [(disabled)]="receiversDeliveryModels[rcv.name]._shouldDisabled"\n                             class="pnc" placeholder="Product name/code" [mdAutocomplete]="auto"\n                             [formControl]="productNameCodeCtrl" (focus)="showProductList()"\n                             (blur)="clearInput($event)"/>\n                      <md-autocomplete #auto="mdAutocomplete">\n                        <md-option *ngFor="let nameCode of filteredNameCode | async" [value]="nameCode">\n                          {{nameCode}}\n                        </md-option>\n                      </md-autocomplete>\n                    </md-input-container>\n                  </td>\n                  <td class="nameItem"></td>\n                  <td class="inputItem"></td>\n                  <td class="column"></td>\n                  <td class="column"></td>\n                  <td class="column"></td>\n                  <td class="column"></td>\n                  <td style="min-width: 80px !important;" class="column"></td>\n                </tr>\n                </tbody>\n              </table>\n            </md-card-content>\n          </md-card>\n        </md-card-content>\n        <md-card-content>\n          <button md-raised-button class="ButtonStyle"\n                  *ngIf="isToday"\n                  [disabled]="!receiversDeliveryModels[rcv.name]._isSubmitted || receiversDeliveryModels[rcv.name]._deliveries.length <= 0"\n                  (click)="printDelivery(receiversDeliveryModels[rcv.name])">Print</button>\n          <button md-raised-button class="ButtonStyle"\n                  *ngIf="isToday"\n                  (click)="submitDelivery(receiversDeliveryModels[rcv.name])">Submit</button>\n        </md-card-content>\n      </md-card>\n    </md-tab>\n  </md-tab-group>\n  <div *ngIf="!dataIsReady">\n    <div class="flex-container waiting" fxLayout="row" fxLayoutAlign="center center">\n      <div class="flex-item" fxFlex="80">\n        <div class="flex-container" fxLayout="column" fxLayoutAlign="center center">\n          <div class="flex-item" fxFlex="80">\n            <i style="color: white !important;" class="fa fa-circle-o-notch fa-spin fa-3x fa-fw"></i>\n            <span class="sr-only">Loading...</span>\n          </div>\n          <div class="flex-item" fxFlex="20">\n            <br/>\n            <span class="waitingMessage">Please wait until we fetch and process delivery data</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</md-card>\n'},800:function(e,t){e.exports="\n"},801:function(e,t){e.exports='<md-card style="background-color: #607D8B; border-radius: 7px; text-align: left; margin: 10px;">\n  <md-card-title class="cardTitle">{{unitName}} Inventory</md-card-title>\n  <md-card class="innerCard">\n    <div class="flex-container"\n         fxLayout="row" fxLayout.xs="column" fxLayout.sm="column"\n         fxLayoutAlign="center center" fxLayoutAlign.xs="start start" fxLayoutAlign.sm="start start">\n      <md-card-title class="flex-item" fxFlex="70">To Do: Inventory Takings</md-card-title>\n      <material-datepicker class="flex-item" fxFlex="30" [(date)]="selectedDate" (onSelect)="dateChanged()">\n      </material-datepicker>\n    </div>\n    <md-card-content>\n      <md-card style="overflow: auto;">\n        <md-card-content>\n          <table class="table">\n            <thead>\n              <tr>\n                <td class="buttonItem col-xs-1">&nbsp;</td>\n                <td class="inputItem col-xs-3">Unopened Packs</td>\n                <td class="codeItem col-xs-3">Code</td>\n                <td class="nameItem col-xs-3">Product</td>\n                <td style="min-width: 80px !important;" class="column col-xs-2">Last Count</td>\n              </tr>\n            </thead>\n            <tbody style="height: 200px;" *ngIf="inventoryModel !== null && inventoryModel !== undefined && inventoryModel._inventories.length > 0">\n              <tr *ngFor="let invItem of inventoryModel._inventories" [@itemState]="invItem.state">\n                  <td class="buttonItem col-xs-1" *ngIf="invItem.shouldIncluded">&nbsp;</td>\n                  <td class="buttonItem col-xs-1" *ngIf="!invItem.shouldIncluded">\n                    <button md-mini-fab (click)="removeInventoryItem(invItem)"><i class="fa fa-times" aria-hidden="true"></i></button>\n                  </td>\n                  <td class="inputItem col-xs-3">\n                    <md-input-container>\n                      <input mdInput type="number" [(ngModel)]="invItem.unopenedPack" placeholder="Unopened Packs"\n                             (ngModelChange)="checkDisability(invItem)"\n                             [disabled]="!isSameDates"\n                             min="0"\n                             [ngClass]="[(!invItem.shouldCountToday && invItem.shouldIncluded) ? \'warnColoring\' : \'normalColoring\']"/>\n                    </md-input-container>\n                  </td>\n                  <td class="codeItem col-xs-3"\n                                [ngClass]="[(!invItem.shouldCountToday && invItem.shouldIncluded) ? \'warnColoring\' : \'normalColoring\']">\n                    {{invItem.productCode}}\n                  </td>\n                  <td class="nameItem col-xs-3"\n                                [ngClass]="[(!invItem.shouldCountToday && invItem.shouldIncluded) ? \'warnColoring\' : \'normalColoring\']">\n                    {{invItem.productName}}\n                  </td>\n                  <td class="column col-xs-2"\n                                *ngIf="invItem.lastCount !== null"\n                                [ngClass]="[(!invItem.shouldCountToday && invItem.shouldIncluded) ? \'warnColoring\' : \'normalColoring\']">\n                    {{invItem.lastCount | date: \'d MMM yy\'}}\n                  </td>\n                  <td style="min-width: 80px !important;" class="column col-xs-2"\n                                *ngIf="invItem.lastCount === null"\n                                [ngClass]="[(!invItem.shouldCountToday && invItem.shouldIncluded) ? \'warnColoring\' : \'normalColoring\']">\n                    -\n                  </td>\n              </tr>\n            </tbody>\n          </table>\n          <table class="table">\n            <tr *ngIf="isSameDates">\n              <td class="buttonItem col-xs-1">&nbsp;</td>\n              <td class="inputItem col-xs-3">\n                <md-input-container>\n                  <input mdInput type="number" placeholder="Unopened Packs" #unopenedPack/>\n                </md-input-container>\n              </td>\n              <td class="inputItem col-xs-7" colspan="2">\n                <md-input-container>\n                  <input mdInput type="text" class="pnc" placeholder="Product name/code" [mdAutocomplete]="auto" [formControl]="productNameCodeCtrl" #autoNameCode (focus)="showProductList()"/>\n                  <md-autocomplete #auto="mdAutocomplete">\n                    <md-option *ngFor="let nameCode of filteredNameCode | async" [value]="nameCode">\n                      {{nameCode}}\n                    </md-option>\n                  </md-autocomplete>\n                </md-input-container>\n              </td>\n              <td style="min-width: 80px !important;" class="column col-xs-1">\n              </td>\n            </tr>\n          </table>\n        </md-card-content>\n      </md-card>\n    </md-card-content>\n    <md-card-content>\n      <button md-raised-button class="ButtonStyle"\n              *ngIf="isSameDates"\n              [(disabled)]="submitShouldDisabled || waiting"\n              (click)="submitInventories()">Submit</button>\n    </md-card-content>\n  </md-card>\n</md-card>\n'},802:function(e,t){e.exports='<md-card>\n  <md-card-title>Login</md-card-title>\n  <md-card-content>\n    <md-input-container>\n      <input mdInput focus placeholder="Username" [(ngModel)]="username" (change)="onChange()">\n    </md-input-container>\n    <md-input-container>\n      <input mdInput placeholder="Password" type="password" [(ngModel)]="password" (change)="onChange()" (keydown)="ifEnterLogin($event)">\n    </md-input-container>\n  </md-card-content>\n  <md-card-actions>\n    <button md-mini-fab [disabled]="!loginEnabled" (click)="userLogin()" color="primary" title="Login">\n      <md-icon fontSet="fa" fontIcon="fa-arrow-right"></md-icon>\n    </button>\n  </md-card-actions>\n</md-card>\n'},803:function(e,t){e.exports='<md-toolbar color="primary" style="font-weight:200;font-size:100%">\n  <span><a style="font-size:120%" class="toolbar" [routerLink]="[\'\']">Siirgirsta Internal Delivery</a></span>\n  <span class="fill-remaining-space"></span>\n  <span *ngIf="!auth"><a  class="toolbar" [routerLink]="[\'login\']"><span class="fa fa-sign-in"></span> Login</a></span>\n  <span *ngIf="auth"><a  class="toolbar" (click)="logout()">{{user}} <i class="fa fa-sign-out"></i> Logout</a></span>\n  <span *ngIf="auth" style="margin-left:20px">{{remainedTime}}</span>\n</md-toolbar>\n<nav *ngIf="auth" md-tab-nav-bar>\n  <a md-tab-link *ngIf="isAdmin" [routerLink]="[\'units\']" routerLinkActive #unitsLink="routerLinkActive" [active]="unitsLink.isActive">Units</a>\n  <a md-tab-link *ngIf="isAdmin" [routerLink]="[\'products\']" routerLinkActive #productsLink="routerLinkActive" [active]="productsLink.isActive">Products</a>\n  <a md-tab-link *ngIf="isAdmin" [routerLink]="[\'override\']" routerLinkActive #overrideLink="routerLinkActive" [active]="overrideLink.isActive">Override Rules</a>\n  <a md-tab-link *ngIf="isBranch" [routerLink]="[\'inventory\']" routerLinkActive #inventoryLink="routerLinkActive" [active]="inventoryLink.isActive">Inventory</a>\n  <a md-tab-link *ngIf="isPrep" [routerLink]="[\'delivery\']" routerLinkActive #deliveryLink="routerLinkActive" [active]="deliveryLink.isActive">Delivery</a>\n  <a md-tab-link *ngIf="isAdmin" [routerLink]="[\'reports\']" routerLinkActive #reportsLink="routerLinkActive" [active]="reportsLink.isActive">Reports</a>\n</nav>\n'},804:function(e,t){e.exports='<md-card style="background-color: #607D8B; border-radius: 7px; text-align: left; margin: 10px;">\n  <md-card-title class="cardTitle">Inventory Rules Overrides</md-card-title>\n  <div *ngIf="!isAdmin">\n    <md-card\n      [ngClass]="[(isFiltered && filteredProductModel._product.isOverridden) ? \'innerCardOverride\' : \'innerCard\']">\n      <md-card-content>\n        <md-input-container style="width: 100%;">\n          <input mdInput focus type="text" class="pnc" placeholder="Product name/code"\n                 [mdAutocomplete]="auto" [formControl]="productModelCtrl" #autoNameCode/>\n          <md-autocomplete #auto="mdAutocomplete">\n            <md-option *ngFor="let nameCode of filteredNameCode | async" [value]="nameCode">\n              {{nameCode}}\n            </md-option>\n          </md-autocomplete>\n        </md-input-container>\n      </md-card-content>\n      <app-counting-rule *ngIf="isFiltered"\n                         [isOverridden]="true"\n                         [(minQty)]="filteredProductModel._product.minQty"\n                         [(maxQty)]="filteredProductModel._product.maxQty"\n                         [(coefficients)]="filteredProductModel._product.coefficients"\n                         [(recursionRule)]="filteredProductModel._product.countingRecursion"\n                         (hasError)="countingRuleErrorHandler($event)"\n                         (changed)="checkDisabilityStatus()">\n      </app-counting-rule>\n    </md-card>\n  </div>\n  <div>\n    <md-card class="mat-card" style="width:195px; margin-bottom:10px;padding:5px; border-radius:25px;">\n      <md-radio-group [(ngModel)]="is_kitchen" (change)="changeFilter()">\n        <md-radio-button style="padding: 0 10px;" [value]="false">Front</md-radio-button>\n        <md-radio-button style="padding: 0 10px;" [value]="true">Kitchen</md-radio-button>\n      </md-radio-group>\n    </md-card>\n  </div>\n  <md-tab-group *ngIf="isAdmin" class="materialTab" [(selectedIndex)]="selectedIndex" (selectChange)="changedTab()">\n    <md-tab *ngFor="let branch of branchList" label="{{branch.name}}">\n      <md-card\n        [ngClass]="[(isFiltered && filteredProductModel._product.isOverridden) ? \'innerCardOverride\' : \'innerCard\']">\n        <md-card-content>\n          <md-input-container style="width: 100%;">\n            <input mdInput type="text" class="pnc" placeholder="Product name/code"\n                   [mdAutocomplete]="auto" [formControl]="productModelCtrl"\n                   (focus)="showProductList($event)" #autoNameCode/>\n            <md-autocomplete #auto="mdAutocomplete">\n              <md-option *ngFor="let nameCode of filteredNameCode | async" [value]="nameCode">\n                {{nameCode}}\n              </md-option>\n            </md-autocomplete>\n          </md-input-container>\n        </md-card-content>\n        <app-counting-rule *ngIf="isFiltered"\n                           [isOverridden]="true"\n                           [(minQty)]="filteredProductModel._product.minQty"\n                           [(maxQty)]="filteredProductModel._product.maxQty"\n                           [(coefficients)]="filteredProductModel._product.coefficients"\n                           [(recursionRule)]="filteredProductModel._product.countingRecursion"\n                           (hasError)="countingRuleErrorHandler($event)"\n                           (changed)="checkDisabilityStatus()">\n        </app-counting-rule>\n      </md-card>\n    </md-tab>\n  </md-tab-group>\n  <br/>\n  <md-card-content>\n    <button md-raised-button *ngIf="isFiltered && !filteredProductModel._product.isOverridden"\n            class="ButtonStyle addBtn" (click)="doClickedAction(ae.add)" [(disabled)]="addIsDisable">Add\n    </button>\n    <button md-raised-button *ngIf="isFiltered && filteredProductModel._product.isOverridden"\n            class="ButtonStyle updateBtn" (click)="doClickedAction(ae.update)" [(disabled)]="updateIsDisable">Update\n    </button>\n    <button md-raised-button *ngIf="isFiltered && filteredProductModel._product.isOverridden"\n            class="ButtonStyle deleteBtn" (click)="doClickedAction(ae.delete)" [(disabled)]="deleteIsDisable">Delete\n    </button>\n  </md-card-content>\n</md-card>\n'},805:function(e,t){e.exports='<div class="flex-container" fxLayout="row" fxLayoutAlign="center center">\n  <div class="flex-item title" fxFlex="80">Siirgirsta Bros - {{unitName_title}}</div>\n  <div style="float: right;" class="flex-item subtitle" fxFlex="20">{{currentDate | date: \'dd MMMM yyyy\'}}</div>\n</div>\n<div class="title" style="font-weight: bold">{{unitName_subTitle}} Delivery Note</div>\n\n<div *ngIf="!isOverallPrint">\n  <table class="table">\n    <thead class="titleBox">\n      <tr>\n      <td>#</td>\n      <td>Product Code</td>\n      <td>Product Name</td>\n      <td>Real Delivery</td>\n      <td>Current Stock</td>\n      <td>Stock After Delivery</td>\n      <td>Min Delivery</td>\n      <td>Days to Next Counting</td>\n    </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor="let item of itemList;let i=index">\n      <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{i + 1}}</td>\n      <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.productCode}}</td>\n      <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.productName}}</td>\n      <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.realDelivery}}</td>\n      <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.currentStock===null ? \'NA\' : item.currentStock}}</td>\n      <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.stockAfterDelivery}}</td>\n      <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.minDelivery}}</td>\n      <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.daysToNext}}</td>\n    </tr>\n    </tbody>\n  </table>\n</div>\n<div *ngIf="isOverallPrint">\n  <table class="table">\n    <thead class="titleBox">\n      <tr>\n        <td>#</td>\n        <td>Product Code</td>\n        <td>Product Name</td>\n        <td>Total Delivery</td>\n        <td *ngFor="let rcvName of receivers">{{rcvName}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor="let item of itemList;let i = index">\n        <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{i + 1}}</td>\n        <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.productCode}}</td>\n        <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.productName}}</td>\n        <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.totalDelivery}}</td>\n        <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'" *ngFor="let rcvName of receivers">{{item[rcvName]}}</td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n<br/>\n<!--<div style="color: darkred" *ngIf="showWarningMessage">-->\n  <!--<div>-->\n    <!--<label>Warning: Hitting print button will finalised delivery numbers.</label>-->\n  <!--</div>-->\n  <!--<div>-->\n    <!--<label>Please make sure all values are correct</label>-->\n  <!--</div>-->\n<!--</div>-->\n<br/>\n<div>\n  <button md-raised-button class="ButtonStyle" (click)="dialogRef.close(\'print\')">Print</button>\n  <button md-raised-button class="ButtonStyle" (click)="dialogRef.close(\'cancel\')">Cancel</button>\n</div>\n'},806:function(e,t){e.exports='<md-card style="background-color: #607D8B; border-radius: 7px; text-align: left; margin: 10px;">\n <md-card-title class="cardTitle">Products</md-card-title>\n  <md-tab-group class="materialTab" [selectedIndex]="selectedIndex">\n    <md-tab label="Add">\n      <md-card class="innerCard">\n        <app-product-sub-form [isAdd]="true" [isAdding]="isAdding" [actionIsSuccess]="actionIsSuccess" (action)="doClickedAction($event)"></app-product-sub-form>\n      </md-card>\n    </md-tab>\n    <md-tab label="Modify">\n      <md-card class="innerCard">\n        <md-card-content>\n          <md-grid-list cols="3" rowHeight="50px">\n            <md-grid-tile colspan="2" style="margin-right: 5px;">\n              <md-input-container style="width: 100%;">\n                <input mdInput type="text" class="pnc" placeholder="Product name"\n                       [mdAutocomplete]="autoName" [formControl]="productModelCtrlName"\n                       #autoNameInput (focus)="showProductList($event, \'name\')"/>\n                <md-autocomplete #autoName="mdAutocomplete">\n                  <md-option *ngFor="let name of filteredName | async" [value]="name">\n                    {{name}}\n                  </md-option>\n                </md-autocomplete>\n              </md-input-container>\n            </md-grid-tile>\n            <md-grid-tile colspan="1" style="margin-left: 5px;">\n              <md-input-container style="width: 100%">\n                <input mdInput type="text" class="pnc" placeholder="Product code"\n                       [mdAutocomplete]="autoCode" [formControl]="productModelCtrlCode"\n                       #autoCodeInput (focus)="showProductList($event, \'code\')"/>\n                <md-autocomplete #autoCode="mdAutocomplete">\n                  <md-option *ngFor="let code of filteredCode | async" [value]="code">\n                    {{code}}\n                  </md-option>\n                </md-autocomplete>\n              </md-input-container>\n            </md-grid-tile>\n          </md-grid-list>\n        </md-card-content>\n        <app-product-sub-form *ngIf="isFiltered" [isAdd]="false" [actionIsSuccess]="actionIsSuccess" [productModel]="filteredProductModel" (action)="doClickedAction($event)"></app-product-sub-form>\n      </md-card>\n    </md-tab>\n  </md-tab-group>\n</md-card>\n'},807:function(e,t){e.exports='<span class="FormTitleStyle">{{formTitle}}</span>\n<md-card>\n  <div class="flex-container" fxLayout="column" fxLayoutAlign="left top">\n    <div class="flex-item" fxFlex="20%">\n      <md-card-content>\n        <md-input-container>\n          <input mdInput type="text" class="name" placeholder="Name" [(ngModel)]="product.name" (keyup)="disabilityStatus()"/>\n        </md-input-container>\n        <md-input-container>\n          <input mdInput type="text" class="code" placeholder="Code" [(ngModel)]="product.code" (keyup)="disabilityStatus()"/>\n        </md-input-container>\n        <md-input-container>\n          <input mdInput type="number" class="size" placeholder="size" [(ngModel)]="product.size" (keyup)="disabilityStatus()"/>\n        </md-input-container>\n        <md-select placeholder="Measuring Units" class="measuringUnit" [(ngModel)]="product.measuringUnit" (change)="disabilityStatus()">\n          <md-option *ngFor="let mu of measuringUnits" [value]="mu">{{mu}}</md-option>\n        </md-select>\n        <md-input-container>\n          <input mdInput type="number" class="size" placeholder="Price (£)" [(ngModel)]="product.price" (keyup)="disabilityStatus()"/>\n        </md-input-container>\n        <div>\n          <span>Preparation Unit</span>\n          <md-radio-group class="prepUnitId" [(ngModel)]="product.prep_unit_id" (change)="disabilityStatus()">\n            <div *ngFor="let pu of prepUnits">\n              <md-radio-button [value]="pu.id">{{pu.name}}</md-radio-button>\n              <br/>\n            </div>\n          </md-radio-group>\n        </div>\n      </md-card-content>\n    </div>\n    <div class="flex-item" fxFlex="70%">\n      <md-card-content *ngIf="hasCountingRuleError">\n        <label class="errorMessage">{{countingRuleError}}</label>\n      </md-card-content>\n      <md-card-content>\n        <app-counting-rule [(coefficients)]="product.coefficients"\n                           [(minQty)]="product.minQty"\n                           [(maxQty)]="product.maxQty"\n                           [(recursionRule)]="product.countingRecursion"\n                           (hasError)="countingRuleErrorHandler($event)"></app-counting-rule>\n      </md-card-content>\n    </div>\n    <div class="flex-item" fxFlex="10%">\n      <md-card-content>\n        <button md-raised-button *ngIf="isAdd" class="ButtonStyle addBtn" (click)="actionEmitter(ae.add)" [(disabled)]="addIsDisable" id="addBtn">Add</button>\n        <button md-raised-button *ngIf="!isAdd" class="ButtonStyle updateBtn" (click)="actionEmitter(ae.update)" [(disabled)]="updateIsDisable" id="updateBtn">Update</button>\n        <button md-raised-button *ngIf="!isAdd" class="ButtonStyle deleteBtn" (click)="actionEmitter(ae.delete)" [(disabled)]= "deleteIsDisable" id="deleteBtn">Delete</button>\n      </md-card-content>\n    </div>\n  </div>\n</md-card>\n<br/>\n'},808:function(e,t){e.exports='<md-card class="outerCard">\n  <md-card-title class="cardTitle">Reports</md-card-title>\n  <md-card class="innerCard" style="margin: 15px">\n    <div>\n      <md-card-title style="font-size:125%;font-weight: 600">Delivery Report</md-card-title>\n    </div>\n    <md-card-content class="mat-card">\n    <div fxLayout.xs="column" fxLayout.sm="column" fxLayout="row" style="padding-top:30px">\n      <div fxFlex="50">\n        <md-select placeholder="Branch" style="width:300px" [(ngModel)]="branchIdForDeliveryReport">\n          <md-option *ngFor="let branch of branches" [value]="branch.id">{{branch.name}}</md-option>\n        </md-select>\n      </div>\n\n      <div fxFlex="25" style="padding:5px 0">\n        <label for="start-range-input">Start of period:</label>\n        <material-datepicker class="flex-item" placeholder="Start of period" [(date)]="startDate" id="start-range-input" (dateChange)="checkDisabilityStatus()">\n        </material-datepicker>\n      </div>\n      <div fxFlex="25"  style="padding:5px 0">\n        <label for="start-range-input">End of period:</label>\n        <material-datepicker class="flex-item" placeholder="End of period" [(date)]="endDate" id="end-range-input" (dateChange)="checkDisabilityStatus()">\n        </material-datepicker>\n      </div>\n    </div>\n    </md-card-content>\n    <md-card-actions style="text-align: right">\n        <button md-raised-button (click)="prepareDeliveryReport()" [disabled]="deliveryReportBtnDisabled">\n          <i class="fa fa-download" aria-hidden="true"></i> Download\n        </button>\n    </md-card-actions>\n  </md-card>\n  <md-card class="innerCard" style="margin: 15px">\n    <md-card-title style="font-size:125%;font-weight: 600">Products Report</md-card-title>\n    <md-card-content class="mat-card">\n    <div fxLayout.xs="column" fxLayout.sm="column" fxLayout="row" style="padding-top:30px">\n      <div fxFlex="50">\n        <md-select placeholder="Branch" style="width:300px" [(ngModel)]="branchIdForProductReport">\n          <md-option *ngFor="let branch of branches" [value]="branch.id">{{branch.name}}</md-option>\n        </md-select>\n      </div>\n    </div>\n      </md-card-content>\n      <md-card-actions style="text-align: right">\n        <button md-raised-button (click)="loadDataForProductsReport()">\n          <i class="fa fa-download" aria-hidden="true"></i> Download\n        </button>\n      </md-card-actions>\n  </md-card>\n  <md-card class="innerCard" style="margin: 15px">\n    <md-card-title style="font-size:125%;font-weight: 600">Inventory Counting Report</md-card-title>\n    <md-card-content  class="mat-card">\n    <div fxLayout.xs="column" fxLayout.sm="column" fxLayout="row" style="padding-top:30px">\n      <div fxFlex="50">\n        <md-select placeholder="Branch" style="width:300px" [(ngModel)]="branchIdForInventoryReport" (change)="checkDisabilityStatus()">\n          <md-option *ngFor="let branch of branchesWithoutAllOption" [value]="branch.id">{{branch.name}}</md-option>\n        </md-select>\n      </div>\n    </div>\n    </md-card-content>\n      <md-card-actions style="text-align: right">\n        <button md-raised-button (click)="prepareInventoryCountingReport()" [disabled]="inventoryReportBtnDisabled">\n          <i class="fa fa-download" aria-hidden="true"></i> Download\n        </button>\n      </md-card-actions>\n  </md-card>\n</md-card>\n'},809:function(e,t){e.exports='<md-card>\n  <md-card-title>\n  Days {{reverse?\'remained to month-end\':\'past from month\'}}\n  </md-card-title>\n  <md-card-content>\n    <md-button-toggle-group *ngFor="let row of calDays;let i=index" multiple [vertical]="true">\n      <md-button-toggle *ngFor="let day of row" [value]="day" (change)="monthDaysChange($event)" [checked]="days.indexOf(reverse?day+1:day)!==-1">{{day}}</md-button-toggle>\n    </md-button-toggle-group>\n  </md-card-content>\n</md-card>\n'},810:function(e,t){e.exports='<md-input-container>\n  <input mdInput type="number" placeholder="Interval" [(ngModel)]="options.interval" (ngModelChange)="onChange()"\n         min="1">\n  <md-hint>{{options.freq ? \'Every\' : \'Never\'}} {{options.freq && options.interval>1?options.interval:\'\'}}\n    {{freqsName[freqsConst.indexOf(options.freq)]}}{{options.interval>1?\'s\':\'\'}}\n  </md-hint>\n</md-input-container><br/>\n<md-button-toggle-group [(ngModel)]="freq" [vertical]="true" (ngModelChange)="onChange()">\n  <md-button-toggle *ngFor="let f of freqs;let i = index;" [value]="freqsConst[i]">\n    {{f}}\n  </md-button-toggle>\n</md-button-toggle-group>\n<span *ngIf="showMonthOptions">\n<md-button-toggle-group [(ngModel)]="monthlyInputMode" [vertical]="true" (ngModelChange)="onMonthlyInputModeChange($event)">\n  <md-button-toggle [value]="\'week\'">\n    By Weekdays\n  </md-button-toggle>\n  <md-button-toggle [value]="\'month\'">\n    By Month Days\n  </md-button-toggle>\n</md-button-toggle-group>\n   <span *ngIf="monthlyInputMode===\'month\'">\n<md-button-toggle-group multiple [vertical]="true">\n  <md-button-toggle value="past" (change)="monthDaysPastOrRemainedChange($event)"\n                    [checked]="monthDaysOption.indexOf(\'past\')!==-1">\n    Days Past\n  </md-button-toggle>\n  <md-button-toggle value="remained" (change)="monthDaysPastOrRemainedChange($event)"\n                    [checked]="monthDaysOption.indexOf(\'remained\')!==-1">\n    Days Remained\n  </md-button-toggle>\n</md-button-toggle-group>\n<app-monthday *ngIf="showMonthDaysPast" [days]="monthDaysPast" (daysChange)="monthDaysPastChange($event)"></app-monthday>\n<app-monthday *ngIf="showMonthDaysRemained" [reverse]="true" [days]="monthDaysRemained"\n              (daysChange)="monthDaysRemainedChange($event)"></app-monthday>\n</span>\n<md-button-toggle-group *ngIf="monthlyInputMode===\'week\'" multiple [vertical]="true">\n  <md-button-toggle *ngFor="let pos of weekpos;let i=index" [value]="pos" [checked]="bysetpos.indexOf(pos)!==-1"\n                    (change)="weekposChange($event)">{{weekposName[i]}}</md-button-toggle>\n</md-button-toggle-group>\n  </span>\n<md-button-toggle-group *ngIf="showWeekdays" multiple [vertical]="true">\n  <md-button-toggle *ngFor="let weekday of weekdays;let i = index;" [value]="weekdaysConst[i]"\n                    [checked]="byweekday.indexOf(weekdaysConst[i])!==-1" (change)="byweekdayChange($event)">\n    {{weekday}}\n  </md-button-toggle>\n</md-button-toggle-group>\n<h4>Next occurrences</h4>\n<pre>{{text}}</pre>\n'},811:function(e,t){e.exports='<span class="FormTitleStyle">{{formTitle}}</span>\n<md-card>\n  <md-radio-group class="RadioButtonStyle" [(ngModel)]="unit.is_branch" id="isBranch" (change)="disabilityStatus()">\n    <md-radio-button [value]="true">Branch</md-radio-button>\n    <md-radio-button [value]="false">Prep Unit</md-radio-button>\n  </md-radio-group>\n  <br>\n  <md-radio-group *ngIf="unit.is_branch !== null && unit.is_branch" class="RadioButtonStyle" [(ngModel)]="unit.is_kitchen" id="isKitchen" (change)="disabilityStatus()">\n    <md-radio-button [value]="false">Front</md-radio-button>\n    <md-radio-button [value]="true">Kitchen</md-radio-button>\n  </md-radio-group>\n  <md-radio-group *ngIf="unit.is_branch !== null &&!unit.is_branch" class="RadioButtonStyle" [(ngModel)]="unit.is_kitchen" id="isKitchen2" (change)="disabilityStatus()">\n    <md-radio-button [value]="false">Main Depot</md-radio-button>\n    <md-radio-button [value]="true">Prep Kitchen</md-radio-button>\n  </md-radio-group>\n  <br>\n  <md-input-container>\n    <input mdInput placeholder="Unit Name" type="text" (keyup)="disabilityStatus()" [(ngModel)]="unit.name" class="name"/>\n  </md-input-container>\n  <md-input-container>\n\n    <input mdInput autocomplete="off" placeholder="Admin Username" type="text" (keyup)="disabilityStatus()" [(ngModel)]="unit.username" class="username"/>\n  </md-input-container>\n  <br>\n  <md-input-container >\n    <input mdInput autocomplete="off" placeholder="Admin Password" type="password" (keyup)="disabilityStatus()" [(ngModel)]="unit.password" class="password"/>\n  </md-input-container>\n  <br>\n    <button md-raised-button *ngIf="isAdd" class="ButtonStyle" (click)="actionEmitter(ae.add)" [(disabled)]="addIsDisable" class="addBtn">Add</button>\n    <button md-raised-button *ngIf="!isAdd" class="ButtonStyle" (click)="actionEmitter(ae.update)" [(disabled)]="updateIsDisable" class="updateBtn">Update</button>\n    <button md-raised-button *ngIf="!isAdd" class="ButtonStyle" (click)="actionEmitter(ae.delete)" [(disabled)]= "deleteIsDisable" class="deleteBtn">Delete</button>\n</md-card>\n'},812:function(e,t){e.exports='<md-card class="outerCard">\n  <md-card-title class="cardTitle">Branches and Preparation Units</md-card-title>\n  <md-card class="innerCard">\n    <app-sub-form [isAdd]="true" [isAdding]="isAdding" [actionIsSuccess]="actionIsSuccess" (action)="doClickedAction($event)"></app-sub-form>\n    <app-sub-form *ngFor="let um of unitModels" [isAdd]="false" [actionIsSuccess]="actionIsSuccess" [unitModel]="um" (action)="doClickedAction($event)"></app-sub-form>\n  </md-card>\n</md-card>\n'},86:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.add=0]="add",e[e.update=1]="update",e[e.delete=2]="delete"}(t.ActionEnum||(t.ActionEnum={}))}},[1077]);