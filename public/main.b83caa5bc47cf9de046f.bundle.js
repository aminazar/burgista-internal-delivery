webpackJsonp([0,3],{1080:function(e,t,r){e.exports=r(476)},114:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.is_reporter=!1}return e}();t.Unit=n},161:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(271),a=r(35),d=r(2),c=function(){function e(e,t){this.messageService=e,this.winRef=t,this._unitSupplier="",this._unitConsumer="",this._isOverallPrint=!1,this._receivers=[],this._deliveryModels={},this._showWarningMessage=!0,this.currentDate=new Date,this.uid=null,this._window=t.nativeWindow}return e.prototype.getItems=function(){return this._isOverallPrint?this.overallItems():this.eachUnitItems()},e.prototype.eachUnitItems=function(){for(var e=[],t=0,r=this._deliveryModels[this._unitConsumer].deliveries;t<r.length;t++){var n=r[t],i={};this.uid&&n.uid!==this.uid?console.warn("delivery print leakage!",n):(i.productCode=n.productCode,i.productName=n.productName,i.realDelivery=n.realDelivery,i.currentStock=n.stock,i.stockAfterDelivery=n.realDelivery+n.stock,i.minDelivery=n.minDelivery,i.daysToNext=n.untilNextCountingDay,e.push(i))}return e},e.prototype.overallItems=function(){for(var e=[],t=function(t){var n={};n.productCode=t.productCode,n.productName=t.productName;for(var i=0,o=0,s=0,a=0,d=r._receivers;a<d.length;a++){var c=d[a],l=r._deliveryModels[c].deliveries.find(function(e){return e.productCode.toLowerCase()===t.productCode.toLowerCase()});void 0===l?n[c]="-":(n[c]=l.realDelivery,i+=l.realDelivery,s+=l.minDelivery,o+=l.realDelivery-l.minDelivery)}n.totalDelivery=i,n.totalMinDelivery=s,e.push(n)},r=this,n=0,i=this._deliveryModels.All.deliveries;n<i.length;n++){t(i[n])}return e},e.prototype.printData=function(){var e="",t=d(this.currentDate).format("ddd D MMM YYYY"),r='<table width="100%">\n                  <tr>\n                  <td width="70%" style="float: left; text-align: left; vertical-align: top"><label class="title">Siirgista Bros - '+this._unitSupplier+'</label></td>\n                  <td width="30%" style="float: right; text-align: right; vertical-align: top"><label class="title">'+t+'</label></td>\n                  </tr>\n                  <tr>\n                  <td style="float: left; text-align: left"><label class="subtitle">'+this._unitConsumer+" Delivery Note</label></td>\n                  </tr>\n                  </table>",n="";if(this._isOverallPrint){n='<table class="table">\n                      <thead>\n                      <tr>\n                      <th>#</th>\n                      <th>Product Code</th>\n                      <th>Product Name</th>\n                      <th>Total Delivery</th>\n                      <th>Total Min Delivery</th>';for(var i=0,o=this._receivers;i<o.length;i++){var s=o[i];n+="<th>"+s+"</th>"}n+='\n        </tr>\n        </thead>\n        <tbody class="data">'}else n='<table class="table">\n        <thead>\n        <tr>\n        <th>#</th>\n        <th>Product Code</th>\n        <th>Product Name</th>\n        <th>Real Delivery</th>\n        <th>Current Stock</th>\n        <th>Stock After Delivery</th>\n        <th>Min Delivery</th>\n        <th>Days to Next Count</th>\n        </tr>\n        </thead>\n        <tbody class="data">';var a="",c=0;if(this._isOverallPrint)for(var l=0,u=this.getItems();l<u.length;l++){var p=u[l];c++;var h=c%2?"":' class="highlight"';a+="\n<tr>\n  <td"+h+">"+c+"</td>\n  <td"+h+">"+p.productCode+"</td>\n  <td"+h+' style="min-width: 250px">'+p.productName+"</td>\n  <td"+h+">"+p.totalDelivery+"</td>\n  <td"+h+">"+p.totalMinDelivery+"</td>";for(var m=0,f=this._receivers;m<f.length;m++){var s=f[m];a+="\n  <td"+h+">"+p[s]+"</td>"}a+="\n</tr>"}else for(var v=0,y=this.getItems();v<y.length;v++){var p=y[v];c++;var h=c%2?"":' class="highlight"';a+="\n<tr>\n  <td"+h+">"+c+"</td>\n  <td"+h+">"+p.productCode+"</td>\n  <td"+h+' style="min-width: 250px">'+p.productName+"</td>\n  <td"+h+">"+p.realDelivery+"</td>\n  <td"+h+">"+(null===p.currentStock?"N/A":p.currentStock)+"</td>\n  <td"+h+">"+(null===p.currentStock?"N/A":p.stockAfterDelivery)+"</td>\n  <td"+h+">"+(null===p.minDelivery?"N/A":p.minDelivery)+"</td>\n  <td"+h+">"+(p.daysToNext?p.daysToNext:"N/A")+"</td>\n</tr>"}n+=a+"</tbody></table>",e+="<div>"+r+"</div>",e+="<div>"+n+"</div>";var g=this._window.open("","_blank","width=1000,height=600,scrollbars=no,menubar=no,toolbar=no,location=no,status=no,titlebar=no");g?(g.window.focus(),g.document.write('<!DOCTYPE><html><head><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"  media="screen, print" /><style type="text/css" media="print, screen">@page{margin: 2mm;  /* this affects the margin in the printer settings */} html{color: black;margin: 5px;  /* this affects the margin on the html before sending to printer */} body{margin: 2mm 5mm 2mm 5mm; /* margin you want for the content */-webkit-print-color-adjust: exact;} .title{font-size: 1.5em;font-weight: normal;}.subtitle{font-size: 2em}.highlight{background-color: #eeeeee !important;}.normal{background-color: white !important;}.table .highlight{background-color: #eeeeee !important;}table{font-size:75%}td{padding:2px !important;}.data td{border:1px solid #adadad !important;}</style></head><body onload="window.print()"><div class="container">'+e+"</div></body></html>"),g.document.close()):this.messageService.warn("Print pop-up is blocked by browser. Enable pop-ups from this page.")},e.prototype.getMonthName=function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e+1]},e}();c=n([o.Injectable(),i("design:paramtypes",["function"==typeof(l=void 0!==a.MessageService&&a.MessageService)&&l||Object,"function"==typeof(u=void 0!==s.WindowRef&&s.WindowRef)&&u||Object])],c),t.PrintService=c;var l,u},162:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(278),i=r(60),o=r(95),s=function(e){var t=o.RRule.fromString(e).options;return t.dtstart=new Date("2018-01-01"),o.RRule.optionsToString(t).replace(/\nRRULE:/g,";").split(";").filter(function(e){return!["HOUR","MINUTE","SECOND"].map(function(t){return e.startsWith("BY"+t)}).reduce(function(e,t){return e||t},!1)}).sort().join(";")},a=function(){function e(e){this.waiting=new i.BehaviorSubject({adding:!1,updating:!1,deleting:!1}),this._product=new n.Product,this._product.isOverridden=e.isOverridden,this._product.id=e.id,this._product.name=e.name,this._product.price=e.price,this._product.code=e.code,this._product.size=e.size,this._product.measuringUnit=e.measuringUnit,this._product.prep_unit_id=e.prep_unit_id,this._product.minQty=e.minQty,this._product.maxQty=e.maxQty,this._product.price=e.price;for(var t in e.coefficients)this._product.coefficients[t]=e.coefficients[t];this._product.countingRecursion=e.countingRecursion}return e.prototype.isDifferent=function(e){var t=!1,r=!1;for(var n in e)if("price"!==n)if("coefficients"===n)for(var i in e.coefficients)null===e.coefficients[i]&&(r=!0),+this._product.coefficients[i]!=+e.coefficients[i]&&(t=!0);else null===e[n]&&(r=!0),"countingRecursion"===n&&s(this._product[n])!==s(e[n])&&(t=!0),"countingRecursion"!==n&&this._product[n]!==e[n]&&(t=!0);return t&&!r},e.prototype.getDifferentValues=function(e){var t={};for(var r in e)if("coefficients"===r)for(var n in e.coefficients)this._product.coefficients[n]!==e.coefficients[n]&&(t.coefficients||(t.coefficients={}),t.coefficients[n]=e.coefficients[n]);else this._product[r]!==e[r]&&(t[r]=e[r]);return t},e.prototype.setProduct=function(e){null==this._product&&(this._product=new n.Product),this._product.isOverridden=e.isOverridden,this._product.id=e.id,this._product.name=e.name,this._product.code=e.code,this._product.size=e.size,this._product.measuringUnit=e.measuringUnit,this._product.prep_unit_id=e.prep_unit_id,this._product.minQty=e.minQty,this._product.maxQty=e.maxQty,this._product.price=e.price;for(var t in e.coefficients)this._product.coefficients[t]=e.coefficients[t];this._product.countingRecursion=e.countingRecursion},e.toAnyObject=function(e){var t={};for(var r in e)switch(r){case"id":t.pid=e.id;break;case"name":t.name=e.name;break;case"code":t.code=e.code;break;case"size":t.size=e.size;break;case"measuringUnit":t.measuring_unit=e.measuringUnit;break;case"prep_unit_id":t.prep_unit_id=e.prep_unit_id;break;case"minQty":t.default_min=e.minQty;break;case"maxQty":t.default_max=e.maxQty;break;case"price":t.price=e.price;break;case"countingRecursion":t.default_date_rule=e.countingRecursion;break;case"coefficients":for(var n in e.coefficients)switch(n){case"Monday":t.default_mon_multiple=e.coefficients.Monday;break;case"Tuesday":t.default_tue_multiple=e.coefficients.Tuesday;break;case"Wednesday":t.default_wed_multiple=e.coefficients.Wednesday;break;case"Thursday":t.default_thu_multiple=e.coefficients.Thursday;break;case"Friday":t.default_fri_multiple=e.coefficients.Friday;break;case"Saturday":t.default_sat_multiple=e.coefficients.Saturday;break;case"Sunday":t.default_sun_multiple=e.coefficients.Sunday;break;case"Usage":t.default_usage=e.coefficients.Usage}}return t},e.toAnyObjectOverride=function(e){var t={};for(var r in e)switch(r){case"id":t.pid=e.id;break;case"minQty":t.min=e.minQty;break;case"maxQty":t.max=e.maxQty;break;case"countingRecursion":t.date_rule=e.countingRecursion;break;case"coefficients":for(var n in e.coefficients)switch(n){case"Monday":t.mon_multiple=e.coefficients.Monday;break;case"Tuesday":t.tue_multiple=e.coefficients.Tuesday;break;case"Wednesday":t.wed_multiple=e.coefficients.Wednesday;break;case"Thursday":t.thu_multiple=e.coefficients.Thursday;break;case"Friday":t.fri_multiple=e.coefficients.Friday;break;case"Saturday":t.sat_multiple=e.coefficients.Saturday;break;case"Sunday":t.sun_multiple=e.coefficients.Sunday;break;case"Usage":t.usage=e.coefficients.Usage}}return t},e.fromAnyObject=function(e){var t=new n.Product;for(var r in e)switch(r){case"isOverridden":t.isOverridden=!0;break;case"pid":t.id=e[r];break;case"name":t.name=e[r];break;case"code":t.code=e[r];break;case"size":t.size=e[r];break;case"measuring_unit":t.measuringUnit=e[r];break;case"prep_unit_id":t.prep_unit_id=e[r];break;case"default_min":t.minQty=e[r];break;case"default_max":t.maxQty=e[r];break;case"price":e.price?t.price=parseFloat(e.price.substring(1)):t.price=null;break;case"default_date_rule":t.countingRecursion=e[r];break;case"default_mon_multiple":t.coefficients.Monday=e[r];break;case"default_tue_multiple":t.coefficients.Tuesday=e[r];break;case"default_wed_multiple":t.coefficients.Wednesday=e[r];break;case"default_thu_multiple":t.coefficients.Thursday=e[r];break;case"default_fri_multiple":t.coefficients.Friday=e[r];break;case"default_sat_multiple":t.coefficients.Saturday=e[r];break;case"default_sun_multiple":t.coefficients.Sunday=e[r];break;case"default_usage":t.coefficients.Usage=e[r]}return t},e}();t.ProductModel=a},197:function(e,t){function r(e){throw new Error("Cannot find module '"+e+"'.")}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=197},271:function(e,t,r){"use strict";function n(){return window}var i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=function(){function e(){}return Object.defineProperty(e.prototype,"nativeWindow",{get:function(){return n()},enumerable:!0,configurable:!0}),e}();s=i([o.Injectable()],s),t.WindowRef=s},272:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(276),a=r(35),d=r(79),c=function(){function e(e,t,r){this.loggedInGuard=e,this.messageService=t,this.snackBar=r,this.showError=!1,this.blocked=!1}return e.prototype.ngOnInit=function(){var e=this;this.messageService.err$.subscribe(function(t){e.showError=!0,e.error=t.statusText+": "+t.text()}),this.messageService.msg$.subscribe(function(t){e.showError=!1,e.snackBar.open(t,"x",{duration:3e3,extraClasses:["snackBar"]})}),this.messageService.warn$.subscribe(function(t){e.snackBar.open(t,"x",{duration:3e3,extraClasses:["warnBar"]})}),this.messageService.block$.subscribe(function(t){e.blocked=t})},e.prototype.closeError=function(){this.showError=!1},e}();c=n([o.Component({selector:"app-root",template:r(799),styles:[r(711)]}),i("design:paramtypes",["function"==typeof(l=void 0!==s.LoggedInGuard&&s.LoggedInGuard)&&l||Object,"function"==typeof(u=void 0!==a.MessageService&&a.MessageService)&&u||Object,"function"==typeof(p=void 0!==d.MdSnackBar&&d.MdSnackBar)&&p||Object])],c),t.AppComponent=c;var l,u,p},273:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.realDelivery=0,this.minDelivery=0,this.maxDelivery=0,this.state="exist",this.isPrinted=!1,this.oldCount=0}return e}();t.Delivery=n},274:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),a=r(79),d=function(){function e(e,t){this.dialogRef=e,this.data=t}return e.prototype.ngOnInit=function(){this.message=this.data.message},e}();n([s.Input(),i("design:type",Object)],d.prototype,"message",void 0),d=n([s.Component({selector:"app-warning-viewer",template:r(803),styles:[r(715)]}),o(1,s.Inject(a.MD_DIALOG_DATA)),i("design:paramtypes",["function"==typeof(c=void 0!==a.MdDialogRef&&a.MdDialogRef)&&c||Object,Object])],d),t.WarningViewerComponent=d;var c},275:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.unopenedPack=null,this.unopenedPackTemp=null,this.shouldIncluded=!0,this.shouldCountToday=!0}return e}();t.Inventory=n},276:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(23),a=r(66),d=function(){function e(e,t){var r=this;this.authService=e,this.router=t,this.isLoggedIn=!1,this.authService.auth$.subscribe(function(e){r.isLoggedIn=e})}return e.prototype.canActivate=function(e,t){return this.isLoggedIn||(this.authService.originBeforeLogin=t.url,this.router.navigate(["login"])),this.isLoggedIn},e}();d=n([o.Injectable(),i("design:paramtypes",["function"==typeof(c=void 0!==a.AuthService&&a.AuthService)&&c||Object,"function"==typeof(l=void 0!==s.Router&&s.Router)&&l||Object])],d),t.LoggedInGuard=d;var c,l},277:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(79),a=r(2),d=r(161),c=function(){function e(e,t){this.dialogRef=e,this.printService=t,this.unitName_title="",this.unitName_subTitle="",this.isOverallPrint=!1,this.currentDate=a().format("D MMMM YYYY"),this.receivers=[],this.itemList=[],this.showWarningMessage=!0}return e.prototype.ngOnInit=function(){this.isOverallPrint=this.printService._isOverallPrint,this.receivers=this.printService._receivers,this.unitName_title=this.printService._unitSupplier,this.unitName_subTitle=this.printService._unitConsumer,this.showWarningMessage=this.printService._showWarningMessage,this.currentDate=a(this.printService.currentDate).format("D MMMM YYYY"),this.itemList=this.printService.getItems()},e}();c=n([o.Component({selector:"app-print-viewer",template:r(808),styles:[r(720)]}),i("design:paramtypes",["function"==typeof(l=void 0!==s.MdDialogRef&&s.MdDialogRef)&&l||Object,"function"==typeof(u=void 0!==d.PrintService&&d.PrintService)&&u||Object])],c),t.PrintViewerComponent=c;var l,u},278:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.countingRecursion="",this.coefficients={Monday:1,Tuesday:1,Wednesday:1,Thursday:1,Friday:1,Saturday:1,Sunday:1,Usage:1},this.isOverridden=!1}return e}();t.Product=n},279:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(114),i=function(){function e(e){this.waiting={updating:!1,deleting:!1,adding:!1},this._unit=new n.Unit,this._unit.id=e.id,this._unit.name=e.name,this._unit.username=e.username,this._unit.password=e.password,this._unit.is_branch=e.is_branch,this._unit.is_kitchen=e.is_kitchen,this._unit.is_reporter=e.is_reporter}return e.prototype.isDifferent=function(e){return""!==e.password||(e.name!==this._unit.name||(e.username!==this._unit.username||(e.is_branch!==this._unit.is_branch||e.is_kitchen!==this._unit.is_kitchen)))},e.prototype.getDifferentValues=function(e){var t={};return""!==e.password&&(t.password=e.password),e.name!==this._unit.name&&(t.name=e.name),e.username!==this._unit.username&&(t.username=e.username),e.is_branch!==this._unit.is_branch&&(t.is_branch=e.is_branch),e.is_kitchen!==this._unit.is_kitchen&&(t.is_kitchen=e.is_kitchen),t},e.prototype.setUnit=function(e){this._unit.id=e.id,this._unit.name=e.name,this._unit.username=e.username,this._unit.password=e.password,this._unit.is_branch=e.is_branch,this._unit.is_kitchen=e.is_kitchen},e}();t.UnitModel=i},35:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(60),a=r(85),d=function(){function e(){this.errStream=new s.Subject,this.err$=this.errStream.asObservable(),this.msgStream=new s.Subject,this.msg$=this.msgStream.asObservable(),this.warningStream=new s.Subject,this.warn$=this.warningStream.asObservable(),this.block$=new s.Subject}return e.prototype.block=function(e){void 0===e&&(e=!0),this.block$.next(e)},e.prototype.error=function(e){e=this.changeToUnderstandableMessage(e);var t=new a.ResponseOptions,r="";try{e.json().Message?r=e.json().Message:"object"==typeof e.json().Message&&(r="")}catch(t){r=e.text()}t.body=r;var n=new a.Response(t);n.statusText=e.statusText,n.status=e.status,this.errStream.next(n)},e.prototype.message=function(e){this.msgStream.next(e)},e.prototype.warn=function(e){this.warningStream.next(e)},e.prototype.changeToUnderstandableMessage=function(e){var t=e._body,r=new a.ResponseOptions;if(t.indexOf("foreign key constraint")!==-1){r.body="Can not delete this item because other data items depend on it.";var n=new a.Response(r);return n.statusText="Data Integrity Error",n}if(t.indexOf("duplicate key value")!==-1){var i='constraint "',o=t.substring(t.indexOf(i)+i.length,t.indexOf('_key"')).replace(/\_/g," ");r.body='Can not add this item because same "'+o+'" already exists.';var n=new a.Response(r);return n.statusText="Data Integrity Error",n}if(t.indexOf("null value")!==-1&&t.indexOf("not-null constraint")!==-1){var i='in column "',o=t.substring(t.indexOf(i)+i.length,t.indexOf('" violates')).replace(/\_/g," ");r.body='The "'+o+'" field cannot be blank.';var n=new a.Response(r);return n.statusText="Data Integrity Error",n}return e},e}();d=n([o.Injectable(),i("design:paramtypes",[])],d),t.MessageService=d},42:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(85);r(37),r(187);var a=r(60),d=r(35),c=function(){function e(e,t){this.http=e,this.messageService=t}return e.prototype.call=function(e){var t=this;return this.messageService.block(),this.http.get("/api/"+e).map(function(e){return t.messageService.block(!1),e}).catch(function(e){return t.messageService.block(!1),e})},e.prototype.insert=function(e,t){var r=this;return this.messageService.block(),this.http.put("/api/"+e,t).map(function(e){return r.messageService.block(!1),e.json()}).catch(function(e){return r.messageService.block(!1),a.Observable.throw(e)})},e.prototype.get=function(e){var t=this;return this.messageService.block(),this.call(e).map(function(e){return t.messageService.block(!1),e.json()}).catch(function(e){return t.messageService.block(!1),e})},e.prototype.getWithParams=function(e,t){var r=this;this.messageService.block();var n=new s.URLSearchParams;for(var i in t)t.hasOwnProperty(i)&&n.set(i,t[i]);return this.http.get("/api/"+e,{search:n}).map(function(e){return r.messageService.block(!1),e.json()}).catch(function(e){return r.messageService.block(!1),e})},e.prototype.delete=function(e,t){var r=this;return this.messageService.block(),this.http.delete("/api/"+e+"/"+t).map(function(e){return r.messageService.block(!1),e}).catch(function(e){return r.messageService.block(!1),e})},e.prototype.update=function(e,t,r){var n=this;return this.messageService.block(),this.http.post("/api/"+e+(t?"/"+t:""),r).map(function(e){return n.messageService.block(!1),e}).catch(function(e){return n.messageService.block(!1),e})},e}();c=n([o.Injectable(),i("design:paramtypes",["function"==typeof(l=void 0!==s.Http&&s.Http)&&l||Object,"function"==typeof(u=void 0!==d.MessageService&&d.MessageService)&&u||Object])],c),t.RestService=c;var l,u},476:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(560);var n=r(535),i=r(0),o=r(559),s=r(546);o.environment.production&&i.enableProdMode(),n.platformBrowserDynamic().bootstrapModule(s.AppModule)},540:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});var i=r(30),o=r(0),s=r(10),a=r(85),d=r(272),c=r(549),l=r(550),u=r(545),p=r(66),h=r(42),m=r(276),f=r(23),v=r(79),y=r(537);r(729);var g=r(558),b=r(557),_=r(493),D=r(556),C=r(555),w=r(552),M=r(553),x=r(541),S=r(35),k=r(544),I=r(551),P=r(547),O=r(542),R=r(277),j=r(161),N=r(271),A=r(554),E=r(797),T=r(536),L=r(274),F=function(){function e(){}return e}();F=n([o.NgModule({declarations:[d.AppComponent,c.LoginComponent,l.NavbarComponent,u.HomeComponent,g.UnitFormComponent,b.SubFormComponent,D.RRuleComponent,C.MonthdayComponent,w.ProductFormComponent,M.ProductSubFormComponent,x.CountingRuleComponent,k.FocusDirective,I.OverrideFormComponent,P.InventoryFormComponent,O.DeliveryFormComponent,R.PrintViewerComponent,A.ReportsComponent,L.WarningViewerComponent],entryComponents:[R.PrintViewerComponent,L.WarningViewerComponent],imports:[i.BrowserModule,T.BrowserAnimationsModule,s.FormsModule,a.HttpModule,E.BlockUIModule,v.MaterialModule.forRoot(),_.FlexLayoutModule,s.ReactiveFormsModule,y.DatepickerModule,f.RouterModule.forRoot([{path:"",component:u.HomeComponent,pathMatch:"full"},{path:"login",component:c.LoginComponent},{path:"units",component:g.UnitFormComponent,canActivate:[m.LoggedInGuard]},{path:"products",component:w.ProductFormComponent,canActivate:[m.LoggedInGuard]},{path:"override",component:I.OverrideFormComponent,canActivate:[m.LoggedInGuard]},{path:"inventory",component:P.InventoryFormComponent,canActivate:[m.LoggedInGuard]},{path:"delivery",component:O.DeliveryFormComponent,canActivate:[m.LoggedInGuard]},{path:"reports",component:A.ReportsComponent,canActivate:[m.LoggedInGuard]}])],providers:[p.AuthService,h.RestService,m.LoggedInGuard,S.MessageService,j.PrintService,N.WindowRef],bootstrap:[d.AppComponent]})],F),t.AppModule=F},541:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=function(){function e(){this.isOverridden=!1,this.coefficientsChange=new o.EventEmitter,this.minQtyChange=new o.EventEmitter,this.maxQtyChange=new o.EventEmitter,this.recursionRuleChange=new o.EventEmitter,this.hasError=new o.EventEmitter,this.days=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","Usage"],this.errorMessage={}}return Object.defineProperty(e.prototype,"minQty",{get:function(){return this._mq},set:function(e){e===-12345678?(this._mq=null,this.ngOnInit()):this._mq=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.coeffChange=function(){this.coefficientsChange.emit(this.coefficients);var e=0;for(var t in this.coefficients)e++,this.coefficients[t]<0&&(this.coefficients[t]=0),this.coefficients[t]?this.sendError("",10+e):this.sendError(t+" coefficient should be a non-zero number",10+e)},e.prototype.minChange=function(){this.minQty<0&&(this.minQty=0),this.minQtyChange.emit(this.minQty),this.sendError("",0),this.checkMinMax()},e.prototype.maxChange=function(){this.maxQty<0&&(this.maxQty=0),this.maxQtyChange.emit(this.maxQty),this.sendError("",1),this.checkMinMax()},e.prototype.recurChange=function(e){this.recursionRuleChange.emit(e.value),e.error?this.sendError("Recursion rule warning: "+e.error,2):this.sendError("",2)},e.prototype.checkMinMax=function(){null!==this.minQty&&null!==this.maxQty&&(this.minQty>this.maxQty?this.sendError("The Min Qty should be less than or equal to Max Qty",3):this.sendError("",3))},e.prototype.sendError=function(e,t){if(this.errorMessage[t]=e,e)this.hasError.emit(e);else{for(var r in this.errorMessage)this.errorMessage[r]&&(e=this.errorMessage[r]);this.hasError.emit(e)}this.showMessage=e},e}();n([o.Input(),i("design:type",Boolean)],s.prototype,"isOverridden",void 0),n([o.Input(),i("design:type",Object)],s.prototype,"coefficients",void 0),n([o.Input(),i("design:type",Object),i("design:paramtypes",[Object])],s.prototype,"minQty",null),n([o.Input(),i("design:type",Object)],s.prototype,"maxQty",void 0),n([o.Input(),i("design:type",Object)],s.prototype,"recursionRule",void 0),n([o.Output(),i("design:type",Object)],s.prototype,"coefficientsChange",void 0),n([o.Output(),i("design:type",Object)],s.prototype,"minQtyChange",void 0),n([o.Output(),i("design:type",Object)],s.prototype,"maxQtyChange",void 0),n([o.Output(),i("design:type",Object)],s.prototype,"recursionRuleChange",void 0),n([o.Output(),i("design:type",Object)],s.prototype,"hasError",void 0),s=n([o.Component({selector:"app-counting-rule",template:r(800),styles:[r(712)]}),i("design:paramtypes",[])],s),t.CountingRuleComponent=s},542:function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}d((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;d;)try{if(i=1,o&&(s=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(s=s.call(o,r[1])).done)return s;switch(o=0,s&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return d.label++,{value:r[1],done:!1};case 5:d.label++,o=r[1],r=[0];continue;case 7:r=d.ops.pop(),d.trys.pop();continue;default:if(s=d.trys,!(s=s.length>0&&s[s.length-1])&&(6===r[0]||2===r[0])){d=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){d.label=r[1];break}if(6===r[0]&&d.label<s[1]){d.label=s[1],s=r;break}if(s&&d.label<s[2]){d.label=s[2],d.ops.push(r);break}s[2]&&d.ops.pop(),d.trys.pop();continue}r=t.call(e,d)}catch(e){r=[6,e],o=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,s,a,d={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var d=r(0),c=r(66),l=r(42),u=r(543),p=r(273),h=r(10),m=r(35),f=r(79),v=r(277),y=r(161),g=r(2),b=r(60);t.DELIVERY_TYPES={COUNTING_TODAY:null,COUNTED_BUT_NOT_DELIVERED:2,NOT_COUNTED_BUT_DELIVERED_AND_FINALIZED:3,NOT_COUNTED_AND_NOT_DELIVERED:4,DELIVERED_LESS_THAN_MIN_STOCK:5,IS_NEW_PRODUCT:6,CLOSED:999};var _=function(){function e(e,r,n,i,o){this.authService=e,this.restService=r,this.msgService=n,this.dialog=i,this.printService=o,this.delivery_types=t.DELIVERY_TYPES,this.counted_products_tab_all=[],this.all_products_tab_all=[],this.tab_all={deliveries:[],sum_total_real_delivery:0,sum_total_min:0,sum_total_max:0,sum_total_min_delivery:0,sum_total_max_delivery:0,sum_total_stock:0},this.filteredBranchDeliveriesFa={},this.showZeroDelivery=!1,this.showCountedProduct=!1,this.filteredDeliveries=[],this.filteredBranchDeliveries={},this.dataIsReady=!1,this.isWaiting={},this.receiverName="All",this.isToday=!0,this.selectedIndex=0,this.receivers=[],this.receiversSumDeliveries={},this.receiversDeliveryModels={},this.productName_Code={},this.productsList={},this.thereIsProactiveItem=!1,this.counted_branch_names=[]}return e.prototype.ngOnInit=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.initValues(),[4,this.getDateFromServer()];case 1:return e.sent(),this.isReporter?this.checkDate({startHour:1,startMin:0,startSec:0,endHour:23,endMin:59,endSec:59}):this.checkDate({startHour:0,startMin:0,startSec:0,endHour:11,endMin:59,endSec:59}),[4,this.getReceivers()];case 2:return e.sent(),[4,this.getDeliveryData()];case 3:return e.sent(),this.tabChanged(),this.onProductValueChanges$(),[2]}})})},e.prototype.checkDate=function(e){var t=e.startHour,r=e.endHour,n=e.startMin,i=e.endMin,o=e.startSec,s=e.endSec,a=g(this.selectedDate).hour(),d=g(this.selectedDate).minute(),c=g(this.selectedDate).second();a>=t&&a<=r&&d>=n&&d<=i&&c>=o&&c<=s&&g(this.selectedDate).format("YYYY-MM-DD")===g(this.currentDate).format("YYYY-MM-DD")&&(this.selectedDate=new Date(g(this.selectedDate).subtract(1,"day").format("YYYY-MM-DD HH:mm:ss")))},e.prototype.onProductValueChanges$=function(){var e=this;this.productNameCodeCtrl=new h.FormControl,this.filteredNameCode=this.productNameCodeCtrl.valueChanges.map(function(t){return e.filterProducts(t)}),this.productNameCodeCtrl.valueChanges.subscribe(function(t){var r=e.productName_Code[e.receiverName].find(function(e){return e.toLowerCase()===t.toLowerCase()});if(void 0!==r&&null!==r){var n=r.substr(0,r.indexOf(" - ")),i=r.substr(r.indexOf(" - ")+3),o=new p.Delivery;o.id=null,o.uid=e.receiversDeliveryModels[e.receiverName].uid,o.productCode=n,o.productName=i;var s=e.productsList[e.receiverName].find(function(e){return e.code.toLowerCase()===n.toLowerCase()});o.min=s.minQty,o.max=s.maxQty,o.realDelivery=null,o.stock=0,o.minDelivery=o.min-o.stock<0?0:o.min-o.stock,o.maxDelivery=o.max-o.stock,o.stockDate=g(o.stockDate).format("DD MMM YY"),o.ref_type_id=o.ref_type_id,o.isCounted=o.isCounted,o.ref_id=o.ref_id,o.stockDate=g(o.stockDate).format("DD MMM YY"),e.receiversDeliveryModels[e.receiverName].add(o),e.thereIsProactiveItem=!!e.overallDeliveryModel._deliveries.find(function(e){return null===e.id}),e.calSumRow(e.receiverName,o,"add"),e.calSumRow("All",o,"add"),e.productName_Code[e.receiverName]=e.productName_Code[e.receiverName].filter(function(e){return e.toLowerCase()!==r.toLowerCase()}),void 0===e.overallDeliveryModel.getByCode(o.productCode)?(e.overallDeliveryModel.add(o),e.thereIsProactiveItem=!!e.overallDeliveryModel._deliveries.find(function(e){return null===e.id}),e.updateOverallDelivery(o.productCode,o,"add","min",0),e.updateOverallDelivery(o.productCode,o,"add","max",0),e.updateOverallDelivery(o.productCode,o,"add","realDelivery",0),e.updateOverallDelivery(o.productCode,o,"add","minDelivery",0),e.updateOverallDelivery(o.productCode,o,"add","maxDelivery",0),e.updateOverallDelivery(o.productCode,o,"add","stock",0)):(e.updateOverallDelivery(o.productCode,o,"add","min",o.min),e.updateOverallDelivery(o.productCode,o,"add","max",o.max),e.updateOverallDelivery(o.productCode,o,"add","realDelivery",o.realDelivery),e.updateOverallDelivery(o.productCode,o,"add","minDelivery",o.minDelivery),e.updateOverallDelivery(o.productCode,o,"add","maxDelivery",o.maxDelivery),e.updateOverallDelivery(o.productCode,o,"add","stock",o.stock)),e.tabChanged(),e.receiversDeliveryModels[e.receiverName]._isSubmitted=!1}},function(e){console.error(e.message)})},e.prototype.getReceivers=function(){return s(this,void 0,void 0,function(){var e,t,r,n,i,o,s;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.restService.get("unit?isBranch=true&isKitchen="+this.isKitchen).toPromise()];case 1:for(e=a.sent(),t=function(e){var t={id:e.uid,name:e.name,warn:"no"};if(r.isReporter){["depot","mprep"].find(function(t){return t===e.username})||(r.receivers.push(t),r.isWaiting[t.name]=!1)}else r.receivers.push(t),r.isWaiting[t.name]=!1},r=this,n=0,i=e;n<i.length;n++)o=i[n],t(o);return[3,3];case 2:return s=a.sent(),console.error(s.message),[3,3];case 3:return[2]}})})},e.prototype.getDateFromServer=function(){return s(this,void 0,void 0,function(){var e,t;return a(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.restService.get("date").toPromise()];case 1:return e=r.sent(),this.currentDate=new Date(e),this.selectedDate||(this.selectedDate=new Date(e)),[2,Promise.resolve(e)];case 2:return t=r.sent(),console.error(t),[3,3];case 3:return[2]}})})},e.prototype.initValues=function(){null!==this.overallDeliveryModel&&void 0!==this.overallDeliveryModel||(this.overallDeliveryModel=new u.DeliveryModel("All",null,!this.showZeroDelivery)),this.overallDeliveryModel._shouldDisabled=!0,this.unitName=this.authService.unitName,this.isKitchen=this.authService.isKitchen,this.isReporter=this.authService.isReporter,this.currentDate=new Date,this.selectedDate=new Date,this.receiversDeliveryModels={All:this.overallDeliveryModel};var e=new p.Delivery;e.realDelivery=0,e.min=0,e.max=0,e.minDelivery=0,e.maxDelivery=0,e.stock=0,this.receiversSumDeliveries={All:e},this.receivers=[]},e.prototype.dateChanged=function(e){return s(this,void 0,void 0,function(){var t,r,n,i;return a(this,function(o){switch(o.label){case 0:return g(g(e).format("YYYY-MM-DD")).isAfter(g(this.currentDate).format("YYYY-MM-DD"))?(this.selectedDate=new Date(this.selectedDate),[2,this.msgService.warn("Unable to report from future")]):(this.counted_branch_names=[],this.showCountedProduct=!1,[4,this.getDateFromServer()]);case 1:return t=o.sent(),this.selectedDate=new Date(g(g(e).format("YYYY-MM-DD")+" "+g(t).format("HH:mm:ss")).format("YYYY-MM-DD HH:mm:ss")),this.selectedDate.getFullYear()!==this.currentDate.getFullYear()?this.isToday=!1:this.selectedDate.getMonth()!==this.currentDate.getMonth()?this.isToday=!1:this.selectedDate.getDate()!==this.currentDate.getDate()?this.isToday=!1:this.isToday=!0,r=g(this.selectedDate).hour(),n=g(this.selectedDate).minute(),i=g(this.selectedDate).second(),r>=0&&r<=11&&n>=0&&n<=59&&i>=0&&i<=59&&g(this.selectedDate).format("YYYY-MM-DD")===g(this.currentDate).subtract(1,"day").format("YYYY-MM-DD")&&(this.isToday=!0),this.overallDeliveryModel.clear(),[4,this.getDeliveryData()];case 2:return o.sent(),[2]}})})},e.prototype.removeDeliveryItem=function(e){var t=this;if(0===this.selectedIndex)console.error("Error. Cannot remove added items from 'All' tab");else{this.updateOverallDelivery(e.productCode,e,"sub","realDelivery",e.realDelivery),this.updateOverallDelivery(e.productCode,e,"sub","minDelivery",e.minDelivery),this.updateOverallDelivery(e.productCode,e,"sub","maxDelivery",e.maxDelivery),this.updateOverallDelivery(e.productCode,e,"sub","stock",e.stock),this.updateOverallDelivery(e.productCode,e,"sub","min",e.min),this.updateOverallDelivery(e.productCode,e,"sub","max",e.max),this.receiversDeliveryModels[this.receiverName].deleteByCode(e.productCode);for(var r=[],n=0,i=0,o=0,s=0,a=this.receivers;s<a.length;s++){var d=a[s],c=this.receiversDeliveryModels[d.name]._deliveries.find(function(t){return t.productCode.toLowerCase()===e.productCode.toLowerCase()});void 0!==c&&(r.push(c.id),n+=c.minDelivery,i+=c.maxDelivery,o+=c.stock)}if(void 0===r.find(function(e){return null===e})){var l=this.overallDeliveryModel._deliveries.find(function(t){return t.productCode.toLowerCase()===e.productCode.toLowerCase()});void 0!==l&&(l.minDelivery=n,l.maxDelivery=i,l.stock=o)}var u=this.receivers.find(function(e){return e.name.toLowerCase()===t.receiverName.toLowerCase()});void 0===this.receiversDeliveryModels[this.receiverName]._deliveries.find(function(e){return null===e.id})?void 0===this.receiversDeliveryModels[this.receiverName]._deliveries.find(function(e){return null===e.stock})?u.warn="no":u.warn="count":u.warn="unknown",this.calSumRow(this.receiverName,e,"sub"),this.overallDeliveryModel._deliveries.length>0&&(this.receiversSumDeliveries.All.realDelivery=this.overallDeliveryModel._deliveries.map(function(e){return e.realDelivery}).reduce(function(e,t){return e+t}),this.receiversSumDeliveries.All.min=this.overallDeliveryModel._deliveries.map(function(e){return e.min}).reduce(function(e,t){return e+t}),this.receiversSumDeliveries.All.max=this.overallDeliveryModel._deliveries.map(function(e){return e.max}).reduce(function(e,t){return e+t}),this.receiversSumDeliveries.All.oldCount=this.overallDeliveryModel._deliveries.filter(function(e){return null!==e.oldCount}).map(function(e){return e.oldCount}).reduce(function(e,t){return e+t},0),void 0===this.overallDeliveryModel._deliveries.find(function(e){return null===e.stock})&&(this.receiversSumDeliveries.All.minDelivery=this.overallDeliveryModel._deliveries.map(function(e){return e.minDelivery}).reduce(function(e,t){return e+t}),this.receiversSumDeliveries.All.maxDelivery=this.overallDeliveryModel._deliveries.map(function(e){return e.maxDelivery}).reduce(function(e,t){return e+t}),this.receiversSumDeliveries.All.stock=this.overallDeliveryModel._deliveries.map(function(e){return e.stock}).reduce(function(e,t){return e+t}))),this.productName_Code[this.receiverName].push(e.productCode+" - "+e.productName),this.changeFilter(),this.receiversDeliveryModels[this.receiverName]._isSubmitted=!1}},e.prototype.filterProducts=function(e){return e?this.productName_Code[this.receiverName].filter(function(t){return new RegExp(e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"gi").test(t)}):this.productName_Code[this.receiverName]},e.prototype.checkRealDeliveryValue=function(e,t){var r=""===e.srcElement.value?0:parseInt(e.srcElement.value);if(r<0)return e.srcElement.value=0,void(t.realDelivery=0);r<t.minDelivery?this.msgService.warn("The 'Real Delivery' value is less than 'Min' value"):r>t.maxDelivery&&this.msgService.warn("The 'Real Delivery' value is greater than 'Max Delivery' value"),this.updateOverallDelivery(t.productCode,t,"add","realDelivery",r-t.realDelivery),this.receiversSumDeliveries[this.receiverName].realDelivery+=r-t.realDelivery,this.receiversSumDeliveries.All.realDelivery+=r-t.realDelivery,t.realDelivery=r,this.receiversDeliveryModels[this.receiverName]._isSubmitted=!1,this.changeFilter()},e.prototype.tabChanged=function(){0===this.selectedIndex?this.receiverName="All":this.receiverName=this.receivers[this.selectedIndex-1].name},e.prototype.updateOverallDelivery=function(e,t,r,n,i){switch(n){case"min":this.overallDeliveryModel.updateDeliveryProperty(r,e,"min",i);break;case"oldCount":this.overallDeliveryModel.updateDeliveryProperty(r,e,"oldCount",i);break;case"max":this.overallDeliveryModel.updateDeliveryProperty(r,e,"max",i);break;case"realDelivery":this.overallDeliveryModel.updateDeliveryProperty(r,e,"realDelivery",i);break;case"minDelivery":null!==t.stock&&null!==t.id||(i=null),this.overallDeliveryModel.updateDeliveryProperty(r,e,"minDelivery",i);break;case"maxDelivery":null!==t.stock&&null!==t.id||(i=null),this.overallDeliveryModel.updateDeliveryProperty(r,e,"maxDelivery",i);break;case"stock":null!==t.stock&&null!==t.id||(i=null),this.overallDeliveryModel.updateDeliveryProperty(r,e,"stock",i)}0===this.overallDeliveryModel.getByCode(e).min&&0===this.overallDeliveryModel.getByCode(e).max&&this.overallDeliveryModel.deleteByCode(e),this.overallDeliveryModel.deliveries.sort(function(e,t){return e.productName.toLowerCase()>t.productName.toLowerCase()?1:e.productName.toLowerCase()<t.productName.toLowerCase()?-1:e.productCode.toLowerCase()>t.productCode.toLowerCase()?1:e.productCode.toLowerCase()<e.productCode.toLowerCase()?-1:0})},e.prototype.countToday=function(e){return null!==e&&g(e).format("YYMMDD")===g(this.currentDate).format("YYMMDD")},e.prototype.printDelivery=function(e){if("All"===e._unitName){for(var t=0,r=this.receivers;t<r.length;t++){var n=r[t];if(!this.isReporter&&!this.receiversDeliveryModels[n.name]._isSubmitted)return void this.msgService.warn(n.name+" data is not submitted")}this.sendForPrint(e,!0,e._isSubmitted)}else e._isSubmitted?(e._shouldDisabled=!0,this.sendForPrint(e,!1,e._isSubmitted)):this.sendForPrint(e,!1,!1)},e.prototype.deliverySubmitted=function(e){return s(this,void 0,void 0,function(){var t,r,n,i,o,i,s,d,c=this;return a(this,function(a){switch(a.label){case 0:e.afterSubmit(),t=e._deliveries,r=[],n=[],t.forEach(function(e){if(e.id)n.push({id:e.id,real_delivery:e.realDelivery,product_id:e.product_id,is_delivery_finalised:e.isPrinted||!1,branch_id:e.uid});else{var t=c.receivers.find(function(e){return e.name.toLowerCase()===c.receiverName.toLowerCase()}).id;r.push({is_delivery_finalised:e.isPrinted||!1,ref_type_id:e.ref_type_id,ref_id:e.ref_id,real_delivery:e.realDelivery,uid:t,product_id:e.product_id}),n.push({id:e.ref_id,ref_id:null,ref_type_id:999})}}),a.label=1;case 1:a.trys.push([1,10,,11]),i=0,a.label=2;case 2:return i<r.length?(o=r[i],[4,this.restService.insert("delivery/"+o.uid,o).toPromise()]):[3,5];case 3:a.sent(),a.label=4;case 4:return i++,[3,2];case 5:i=0,a.label=6;case 6:return i<n.length?(s=n[i],[4,this.restService.update("delivery",s.id,s).toPromise()]):[3,9];case 7:a.sent(),a.label=8;case 8:return i++,[3,6];case 9:return[3,11];case 10:return d=a.sent(),console.error(d),e._isSubmitted=!1,this.msgService.error(d),[3,11];case 11:return e._isSubmitted=!0,[2]}})})},e.prototype.submitDelivery=function(e){return s(this,void 0,void 0,function(){var t;return a(this,function(r){switch(r.label){case 0:return[4,this.restService.get("checkAccessTime").toPromise()];case 1:return(t=r.sent())?(this.deliverySubmitted(e),[2]):[2,this.msgService.warn("you are able to delivered products from 22:00 PM until 12:00 PM tomorrow")]}})})},e.prototype.sendForPrint=function(e,t,r){var n=this;void 0===r&&(r=!1),this.printService._isOverallPrint=t,this.printService._unitSupplier=this.unitName,this.printService.uid=this.receiversDeliveryModels[this.receiverName].uid,this.printService._unitConsumer=t?"Aggregated":this.receiverName,this.printService._receivers=this.receivers.map(function(e){return e.name}),this.printService._deliveryModels=this.receiversDeliveryModels,this.printService._deliveryModels.All=this.overallDeliveryModel,this.printService._showWarningMessage=!this.receiversDeliveryModels[this.receiverName]._isPrinted,this.printService.currentDate=this.currentDate,this.dialog.open(v.PrintViewerComponent,{height:"600px",width:"1200px"}).afterClosed().subscribe(function(i){if("print"===i){if(!r)return n.printService.printData();if(t)n.printService.printData();else{for(var o=new b.BehaviorSubject(!1),s=!0,a=0,d=e._deliveries,c=function(t){t.isPrinted=!0,n.restService.update("delivery",t.id,u.DeliveryModel.toAnyObject(t,t.isPrinted,null)).subscribe(function(t){e._isPrinted=e.deliveries.map(function(e){return e.isPrinted}).reduce(function(e,t){return e&&t}),++a>=d.length&&o.next(!0)},function(r){t.isPrinted=!1,e._isPrinted=!1,s=!1,++a>=d.length&&o.next(!0)})},l=0,p=d;l<p.length;l++)c(p[l]);o.subscribe(function(e){e&&s&&(n.checkOverallPrintDisability(),n.printService.printData())})}}},function(e){return console.error(e.message)})},e.prototype.checkOverallPrintDisability=function(){for(var e=!0,t=0,r=this.receivers;t<r.length;t++){var n=r[t];!this.receiversDeliveryModels[n.name]._isPrinted&&this.receiversDeliveryModels[n.name].deliveries.length>0&&(e=!1)}this.overallDeliveryModel._shouldDisabled=!e},e.prototype.getDeliveryData=function(){return s(this,void 0,void 0,function(){var e,t,r,n,i,o,s;return a(this,function(a){switch(a.label){case 0:return e=g(g(this.selectedDate).format("YYYY-MM-DD")+" "+g(this.currentDate).format("HH:mm:ss")).format("YYYY-MM-DD HH:mm:ss"),[4,this.getDateFromServer()];case 1:return t=a.sent(),g(this.selectedDate).format("YYYY-MM-DD")>g(t).format("YYYY-MM-DD")?[2,this.msgService.warn("Unable to see the next day")]:[3,2];case 2:r=0,a.label=3;case 3:if(!(r<this.receivers.length))return[3,8];n=this.receivers[r],a.label=4;case 4:return a.trys.push([4,6,,7]),n.warn="no",this.isWaiting[n.name]=!0,this.waiting(),[4,this.restService.get("delivery/"+e+"/"+n.id).toPromise()];case 5:if(i=a.sent(),this.setDelivery(i,n),this.receivers.length===r+1){for(o in this.receiversDeliveryModels)this.receiversDeliveryModels.hasOwnProperty(o)&&(this.receiversDeliveryModels[o].filter=!1,this.filteredBranchDeliveriesFa[o]=this.receiversDeliveryModels[o].deliveries);this.calculateTotalDeliveries(this.filteredBranchDeliveriesFa)}return[3,7];case 6:return s=a.sent(),this.isWaiting[n.name]=!1,this.waiting(),console.error(s.message),[3,7];case 7:return r++,[3,3];case 8:return[2]}})})},e.prototype.setDelivery=function(e,t){var r=this;this.isWaiting[t.name]=!1,this.waiting(),this.productsList[t.name]=[],this.receiversDeliveryModels[t.name]=new u.DeliveryModel(t.name,+t.id,!this.showZeroDelivery),this.filteredBranchDeliveries[t.name]=[],this.receiversSumDeliveries[t.name]=new p.Delivery,this.receiversSumDeliveries[t.name].min=0,this.receiversSumDeliveries[t.name].max=0,this.receiversSumDeliveries[t.name].minDelivery=0,this.receiversSumDeliveries[t.name].maxDelivery=0,this.receiversSumDeliveries[t.name].realDelivery=0,this.receiversSumDeliveries[t.name].stock=0,this.receiversSumDeliveries[t.name].oldCount=0;for(var n=0,i=e;n<i.length;n++){var o=i[n];null!==o.stock&&"number"==typeof o.stock||(t.warn="count");var s=new p.Delivery;s.id=o.id,s.uid=+o.uid,s.productCode=o.productCode,s.productName=o.productName,null===o.stock&&null===o.realDelivery?s.realDelivery=null:null===o.realDelivery?s.realDelivery=o.max-o.stock<0?0:o.max-o.stock:s.realDelivery=o.realDelivery,s.minDelivery=o.min-o.stock<0?0:o.min-o.stock,s.maxDelivery=o.max-o.stock>=0?o.max-o.stock:0,s.min=o.min,s.max=o.max,s.stock=o.stock,s.isPrinted=o.isPrinted,null===o.stockDate?s.stockDate=null:s.stockDate=g(o.stockDate).format("DD MMM YY"),s.oldCount=o.oldCount,s.state="exist",s.untilNextCountingDay=o.untilNextCountingDay,s.ref_type_id=o.ref_type_id,s.isCounted=o.isCounted,s.ref_id=o.ref_id,s.product_id=o.productId,this.receiversDeliveryModels[t.name].add(s),this.thereIsProactiveItem=!!this.overallDeliveryModel.deliveries.find(function(e){return null===e.id}),this.calSumRow(t.name,s,"add"),this.calSumRow("All",s,"add"),void 0===this.overallDeliveryModel.getByCode(o.productCode)?(this.overallDeliveryModel.add(s),this.thereIsProactiveItem=!!this.overallDeliveryModel.deliveries.find(function(e){return null===e.id})):(this.updateOverallDelivery(o.productCode,s,"add","min",s.min),this.updateOverallDelivery(o.productCode,s,"add","max",s.max),this.updateOverallDelivery(o.productCode,s,"add","realDelivery",s.realDelivery),this.updateOverallDelivery(o.productCode,s,"add","minDelivery",s.minDelivery),this.updateOverallDelivery(o.productCode,s,"add","maxDelivery",s.maxDelivery),this.updateOverallDelivery(o.productCode,s,"add","oldCount",s.oldCount),this.updateOverallDelivery(o.productCode,s,"add","stock",s.stock))}this.receiversDeliveryModels[t.name].deliveries.length>0?this.receiversDeliveryModels[t.name]._isPrinted=this.receiversDeliveryModels[t.name].deliveries.map(function(e){return e.isPrinted}).reduce(function(e,t){return e&&t}):this.receiversDeliveryModels[t.name]._isSubmitted=!0,this.receiversDeliveryModels[t.name]._isPrinted&&(this.receiversDeliveryModels[t.name]._isSubmitted=!0),this.receiversDeliveryModels[t.name].deliveries.sort(function(e,t){return!r.countToday(e.stockDate)&&r.countToday(t.stockDate)?-1:r.countToday(e.stockDate)&&!r.countToday(t.stockDate)?1:e.productName.toLowerCase()>t.productName.toLowerCase()?1:e.productName.toLowerCase()<t.productName.toLowerCase()?-1:e.productCode.toLowerCase()>t.productCode.toLowerCase()?1:e.productCode.toLowerCase()<e.productCode.toLowerCase()?-1:0}),this.filteredBranchDeliveries[t.name]=this.receiversDeliveryModels[t.name].deliveries,this.filteredDeliveries=this.overallDeliveryModel.deliveries},e.prototype.showProductList=function(){this.productNameCodeCtrl.setValue("")},e.prototype.clearInput=function(e){setTimeout(function(){e.target.value=""},50)},e.prototype.calSumRow=function(e,t,r){if("add"===r){if(null===t.stock||null===t.id)if("All"!==e){var n=this.receivers.find(function(t){return t.name.toLowerCase()===e.toLowerCase()});"no"===n.warn&&(n.warn="unknown")}else this.receiversSumDeliveries.All.minDelivery=null,this.receiversSumDeliveries.All.maxDelivery=null,this.receiversSumDeliveries.All.stock=null,this.receiversSumDeliveries.All.oldCount=null;this.receiversSumDeliveries[e].min+=t.min,this.receiversSumDeliveries[e].max+=t.max,this.receiversSumDeliveries[e].oldCount+=t.oldCount,null!==this.receiversSumDeliveries[e].minDelivery&&(this.receiversSumDeliveries[e].minDelivery+=t.minDelivery),null!==this.receiversSumDeliveries[e].maxDelivery&&(this.receiversSumDeliveries[e].maxDelivery+=t.maxDelivery),this.receiversSumDeliveries[e].realDelivery+=t.realDelivery,null!==this.receiversSumDeliveries[e].stock&&(this.receiversSumDeliveries[e].stock+=t.stock)}else this.receiversSumDeliveries[e].min-=t.min,this.receiversSumDeliveries[e].max-=t.max,this.receiversSumDeliveries[e].minDelivery-=t.minDelivery,this.receiversSumDeliveries[e].maxDelivery-=t.maxDelivery,this.receiversSumDeliveries[e].realDelivery-=t.realDelivery,this.receiversSumDeliveries[e].stock-=null===t.stock?0:t.stock},e.prototype.waiting=function(){for(var e=!1,t=0,r=this.receivers;t<r.length;t++){var n=r[t];e=e||this.isWaiting[n.name]}this.dataIsReady=!e},e.prototype.changeFilter=function(){this.overallDeliveryModel.filter=!this.showZeroDelivery,this.filteredDeliveries=this.overallDeliveryModel.deliveries;for(var e in this.receiversDeliveryModels)this.receiversDeliveryModels.hasOwnProperty(e)&&(this.receiversDeliveryModels[e].filter=!this.showZeroDelivery,this.filteredBranchDeliveries[e]=this.receiversDeliveryModels[e].deliveries)},e.prototype.calculateTotalDeliveries=function(e){var t=this.removeAndClearSomeBranchesForTotalCalculate(e).new_branches,r=this.getAggregateDeliveries(n({},t)),i=this.filterDeliveriesBaseOnProduct(r),o=this.calculateTotalDeliveriesPerProduct(i);this.calculateSumTotalTabAll(o),this.calculateSumTotalAllProducts(o.slice()),this.calculateSumTotalProductsCounted(o.slice())},e.prototype.removeAndClearSomeBranchesForTotalCalculate=function(e){var t=["All","depot","Main Prep"],r=n({},e);return delete r[t[0]],delete r[t[1]],delete r[t[2]],{new_branches:r}},e.prototype.calculateSumTotalProductsCounted=function(e){this.counted_products_tab_all=e.filter(function(e){return null!==e.total_stock})},e.prototype.calculateSumTotalAllProducts=function(e){this.all_products_tab_all=e},e.prototype.calculateSumTotalTabAll=function(e){this.tab_all.deliveries=e,this.tab_all.sum_total_real_delivery=this.calculateSumBaseOnKey(e,"total_real_delivery"),this.tab_all.sum_total_min=this.calculateSumBaseOnKey(e,"total_min"),this.tab_all.sum_total_max=this.calculateSumBaseOnKey(e,"total_max"),this.tab_all.sum_total_max_delivery=this.calculateSumBaseOnKey(e,"total_max_delivery"),this.tab_all.sum_total_min_delivery=this.calculateSumBaseOnKey(e,"total_min_delivery"),this.tab_all.sum_total_stock=this.calculateSumBaseOnKey(e,"total_stock")},e.prototype.calculateSumBaseOnKey=function(e,t){var r=0;return e.forEach(function(e){r+=null===e[t]?0:e[t]}),r},e.prototype.calculateTotalDeliveriesPerProduct=function(e,t){var r=this;void 0===t&&(t=!1);var n=[];return e.forEach(function(e){var i=e.deliveries;e=r.clearProductTotalAmount(e),e.total_real_delivery=r.calculateTotalAmountBaseOnKey(i,"realDelivery",t),e.total_min=r.calculateTotalAmountBaseOnKey(i,"min",t),e.total_max=r.calculateTotalAmountBaseOnKey(i,"max",t),e.total_stock=r.calculateTotalAmountBaseOnKey(i,"stock",t),e.total_min_delivery=r.calculateTotalAmountBaseOnKey(i,"minDelivery",t),e.total_max_delivery=r.calculateTotalAmountBaseOnKey(i,"maxDelivery",t),n.push(e)}),n},e.prototype.clearProductTotalAmount=function(e){return e.total_real_delivery=0,e.total_min=0,e.total_max=0,e.total_stock=0,e.total_min_delivery=0,e.total_max_delivery=0,e},e.prototype.calculateTotalAmountBaseOnKey=function(e,t,r){var n=this;void 0===r&&(r=!1);var i=0,o=[];return e.forEach(function(e){o.push(e[t]),r?e.isCounted&&(i+=null===e[t]?0:e[t],0===n.counted_branch_names.filter(function(t){return t===e.branch_name}).length&&n.counted_branch_names.push(e.branch_name)):i+=null===e[t]?0:e[t]}),o.length&&o.every(function(e){return null===e})?null:i},e.prototype.filterDeliveriesBaseOnProduct=function(e){var t=this,r=[];return e.forEach(function(e){var n=r.find(function(t){return t.id===e.product_id});n?n.deliveries.push(t.getDeliveryObj(e)):r.push({id:e.product_id,code:e.productCode,name:e.productName,total_min:0,total_max:0,total_min_delivery:0,total_max_delivery:0,total_stock:0,deliveries:[t.getDeliveryObj(e)]})}),r},e.prototype.getDeliveryObj=function(e){return{stock:e.stock,isCounted:null!==e.stock,realDelivery:e.realDelivery,minDelivery:e.minDelivery,maxDelivery:e.maxDelivery,min:e.min,max:e.max,branch_name:e.branch_name}},e.prototype.getAggregateDeliveries=function(e){var t=[],r=function(r){if(e.hasOwnProperty(r)){var n=e[r];n.forEach(function(e){e.branch_name=r}),t=t.concat(n)}};for(var n in e)r(n);return t},e.prototype.showAllOrCounted=function(e){if(this.counted_branch_names=[],e.value){var t=this.counted_products_tab_all.slice();this.calculateSumTotalTabAll(this.calculateTotalDeliveriesPerProduct(t,!0))}else{var t=this.all_products_tab_all.slice();this.calculateSumTotalTabAll(this.calculateTotalDeliveriesPerProduct(t))}},e}();_=i([d.Component({selector:"app-delivery-form",template:r(801),styles:[r(713)],animations:[d.trigger("itemState",[d.state("exist",d.style({opacity:1,transform:"translateX(0) scale(1)"})),d.state("delete",d.style({opacity:0,display:"none",transform:"translateX(0) scale(1)"})),d.state("sent",d.style({opacity:0,display:"none",transform:"translateX(0) scale(1)"})),d.transition("exist => delete",[d.animate("1s ease-out",d.style({opacity:0,transform:"translateX(-100%) scale(1)"}))]),d.transition("exist => sent",[d.animate("0.5s ease-out",d.style({opacity:0,transform:"translateX(0) scale(0.5)"}))])])]}),o("design:paramtypes",["function"==typeof(D=void 0!==c.AuthService&&c.AuthService)&&D||Object,"function"==typeof(C=void 0!==l.RestService&&l.RestService)&&C||Object,"function"==typeof(w=void 0!==m.MessageService&&m.MessageService)&&w||Object,"function"==typeof(M=void 0!==f.MdDialog&&f.MdDialog)&&M||Object,"function"==typeof(x=void 0!==y.PrintService&&y.PrintService)&&x||Object])],_),t.DeliveryFormComponent=_;var D,C,w,M,x},543:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(273),i=function(){function e(e,t,r){this._deliveries=[],this._unitName="",this.uid=null,this._shouldDisabled=!1,this._isSubmitted=!1,this._isPrinted=!1,this.filter=!1,this._unitName=e,this.uid=t,this.filter=r}return Object.defineProperty(e.prototype,"deliveries",{get:function(){return(this.filter?this._deliveries.filter(function(e){return 0!==e.realDelivery}):this._deliveries).sort(function(e,t){return e.id?t.id?e.productName<t.productName?-1:e.productName>t.productName?1:0:-1:1})},enumerable:!0,configurable:!0}),e.prototype.add=function(e){if(this.uid&&e.id&&e.uid!==this.uid)console.warn("Delivery leakage!\n",{uid:this.uid,delivery:e});else{var t=new n.Delivery;for(var r in e)t[r]=e[r];this._deliveries.push(t)}},e.prototype.get=function(e){return this._deliveries.find(function(t){return t.id===e})},e.prototype.getByCode=function(e){return this._deliveries.find(function(t){return t.productCode.toLowerCase()===e.toLowerCase()})},e.prototype.deleteByCode=function(e){try{return this._deliveries=this._deliveries.filter(function(t){return t.productCode.toLowerCase()!==e.toLowerCase()}),!0}catch(e){return console.log(e.message),!1}},e.prototype.clear=function(){this._deliveries=[]},e.prototype.replaceDeliveryProperty=function(e,t,r){try{return this._deliveries.find(function(t){return t.productCode.toLowerCase()===e.toLowerCase()})[t]=r,!0}catch(e){return console.log(e.message),!1}},e.prototype.updateDeliveryProperty=function(e,t,r,n){try{var i=this._deliveries.find(function(e){return e.productCode.toLowerCase()===t.toLowerCase()});if(null!==n&&null!==i[r]||"realDelivery"===r||"min"===r||"max"===r)switch(e){case"add":i[r]+=n;break;case"sub":i[r]-=n}else i[r]=null;return!0}catch(e){return console.log(e.message),!1}},e.toAnyObject=function(e,t,r){var n={};return n.real_delivery=e.realDelivery,n.is_delivery_finalised=e.isPrinted||!1,n.ref_id=e.ref_id,n.branchId=e.branchId||e.uid,n.ref_type_id=e.ref_type_id,null!==r&&(n.product_id=r),n},e.prototype.afterSubmit=function(){this._deliveries.forEach(function(e){null===e.realDelivery&&(e.realDelivery=0)})},e}();t.DeliveryModel=i},544:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=function(){function e(e,t){this._el=e,this.renderer=t}return e.prototype.ngAfterViewInit=function(){},e}();s=n([o.Directive({selector:"[focus]"}),i("design:paramtypes",["function"==typeof(a=void 0!==o.ElementRef&&o.ElementRef)&&a||Object,"function"==typeof(d=void 0!==o.Renderer2&&o.Renderer2)&&d||Object])],s),t.FocusDirective=s;var a,d},545:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();s=n([o.Component({selector:"app-home",template:r(802),styles:[r(714)]}),i("design:paramtypes",[])],s),t.HomeComponent=s},546:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(272)),n(r(540))},547:function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}d((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;d;)try{if(i=1,o&&(s=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(s=s.call(o,r[1])).done)return s;switch(o=0,s&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return d.label++,{value:r[1],done:!1};case 5:d.label++,o=r[1],r=[0];continue;case 7:r=d.ops.pop(),d.trys.pop();continue;default:if(s=d.trys,!(s=s.length>0&&s[s.length-1])&&(6===r[0]||2===r[0])){d=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){d.label=r[1];break}if(6===r[0]&&d.label<s[1]){d.label=s[1],s=r;break}if(s&&d.label<s[2]){d.label=s[2],d.ops.push(r);break}s[2]&&d.ops.pop(),d.trys.pop();continue}r=t.call(e,d)}catch(e){r=[6,e],o=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,s,a,d={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var d=r(0),c=r(10),l=r(66),u=r(42),p=r(548),h=r(275),m=r(1075),f=r(2),v=r(79),y=r(274),g=r(35);t.DELIVERY_TYPES={COUNTING_TODAY:null,COUNTED_BUT_NOT_DELIVERED:2,NOT_COUNTED_BUT_DELIVERED_AND_FINALIZED:3,NOT_COUNTED_AND_NOT_DELIVERED:4,DELIVERED_LESS_THAN_MIN_STOCK:5,IS_NEW_PRODUCT:6,CLOSED:999};var b=function(){function e(e,r,n,i){this.authService=e,this.restService=r,this.dialog=n,this.messageService=i,this.delivery_types=t.DELIVERY_TYPES,this.noButton=!0,this.unitName="",this.isSameDates=!0,this.submitShouldDisabled=!0,this.products=[],this.productName_Code=[],this.waiting=!1,this.isUpdateMode=!1,this.isFirstTimeFillsForm=!0,this.isFinalized=!1,this.isPreviousDay=!1}return e.prototype.ngOnInit=function(){return s(this,void 0,void 0,function(){var e,t=this;return a(this,function(r){switch(r.label){case 0:return this.unitName=this.authService.unitName,[4,this.restService.get("date").toPromise()];case 1:return e=r.sent(),this.currentDate=new Date(e),this.selectedDate=new Date(e),this.dateIsBetween("00:00:01","11:59:59")&&(this.isPreviousDay=!0,this.selectedDate=new Date(f(this.selectedDate).subtract(1,"day").toDate())),null!==this.inventoryModel&&void 0!==this.inventoryModel||(this.inventoryModel=new p.InventoryModel(this.unitName)),this.getInventoryData(),this.productNameCodeCtrl=new c.FormControl,this.filteredNameCode=this.productNameCodeCtrl.valueChanges.startWith(null).map(function(e){return t.filterProducts(e)}),this.compareDates(),[2]}})})},e.prototype.dateIsBetween=function(e,t){var r=f(this.currentDate).subtract(1,"day").toDate(),n=f(r).format("YYYY-MM-DD"),i=f(r).format("YYYY-MM-DD HH:mm:ss"),o=f(n+" "+e).format("YYYY-MM-DD HH:mm:ss"),s=f(n+" "+t).format("YYYY-MM-DD HH:mm:ss");return!!f(i,"YYYY-MM-DD HH:mm:ss").isBetween(o,s,null,"[]")},e.prototype.filterProducts=function(e){return e?this.productName_Code.filter(function(t){return new RegExp(e,"gi").test(t)}):this.productName_Code},e.prototype.openWarningDialog=function(){var e=this;this.dialog.open(y.WarningViewerComponent,{width:"40%",data:{message:"The values entered for some products are greater than the maximum, so be sure to confirm"}}).afterClosed().subscribe(function(t){t&&e.inventoriesSaved()})},e.prototype.checkUnopenedPackGreaterThanMaxStock=function(){var e=[];this.inventoryModel._inventories.forEach(function(t){t.unopenedPack>t.stockMax&&e.push(t)}),e.length?this.openWarningDialog():this.inventoriesSaved()},e.prototype.submitInventories=function(){return s(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,this.checkStockOfBranchIsFinalized()];case 1:return e=t.sent(),e?this.checkUnopenedPackGreaterThanMaxStock():this.inventoryModel._inventories.forEach(function(e){e.unopenedPack=e.unopenedPackTemp}),[2]}})})},e.prototype.checkStockOfBranchIsFinalized=function(){return s(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,this.restService.insert("checkBranchStockFinalized",{date:this.selectedDate}).toPromise()];case 1:return e=t.sent(),e?(this.isSameDates=!1,this.messageService.warn("You cannot modify the stocks that delivered"),[2,!1]):[2,!0]}})})},e.prototype.mapObjectForUpdate=function(e){var t=n({},e);return t.bsddid=t.ref_id,t.ref_id=null,t.ref_type_id=999,t},e.prototype.inventoriesSaved=function(){for(var e=this,t=[],r=[],n=0;n<this.inventoryModel._inventories.length;n++){var i=this.inventoryModel._inventories[n];i.id?r.push(p.InventoryModel.toAnyObject(i)):(t.push(p.InventoryModel.toAnyObject(i)),i.isNew||r.push(this.mapObjectForUpdate(i)))}var o={insert:t,update:r,submit_time:f().format("YYYY-MM-DD HH:mm:ss")};this.waiting=!0,this.restService.insert("stock/batch",o).subscribe(function(r){t.length&&e.getInventoryData(),m.setTimeout(function(){e.waiting=!1,e.isUpdateMode=!0,e.isFirstTimeFillsForm=!1,e.inventoryModel.setDisabled()},500)},function(t){var r=JSON.parse(t._body);e.messageService.warn(r.Message),e.waiting=!1,console.error(t)})},e.prototype.removeInventoryItem=function(e){var t=this;if(e.ref_type_id===this.delivery_types.IS_NEW_PRODUCT&&e.id){this.dialog.open(y.WarningViewerComponent,{width:"40%",data:{message:"Are you sure you want to delete ["+e.productName+"]?"}}).afterClosed().subscribe(function(r){if(r)return t.inventoryModel._inventories=t.inventoryModel._inventories.filter(function(t){return t.productName!==e.productName}),t.removeStockFromDB(e)})}else e.state="delete",m.setTimeout(function(){t.inventoryModel._inventories=t.inventoryModel._inventories.filter(function(t){return t.productName!==e.productName}),t.productName_Code.push(e.productCode+" - "+e.productName),t.checkDisability(null)},1e3)},e.prototype.disableInventoryItem=function(e){return null===e.unopenedPack||e.unopenedPack<0},e.prototype.dateChanged=function(e){this.isPreviousDay=!1;var t=f(this.currentDate).format("HH:mm:ss"),r=f(f(e).format("YYYY-MM-DD")+" "+t).format("YYYY-MM-DD HH:mm:ss"),n=f(this.currentDate).format("YYYY-MM-DD"),i=f(this.currentDate).subtract(1,"day").format("YYYY-MM-DD"),o=f(f(e).format("YYYY-MM-DD")+" "+t).subtract(1,"day").format("YYYY-MM-DD HH:mm:ss"),s=f(e).format("YYYY-MM-DD"),a=f(n+" 00:00:01"),d=f(n+" 11:59:59");return i===s&&f(o).isBetween(a,d,null,"[]")&&(this.isPreviousDay=!0,this.selectedDate=this.selectedDate),!this.isPreviousDay&&n===s&&f(r).isBetween(a,d,null,"[]")?(this.selectedDate=new Date(this.selectedDate),this.messageService.warn("Unable to report from future")):!this.isPreviousDay&&f(r).isAfter(f(this.currentDate).format("YYYY-MM-DD HH:mm:ss"))?(this.selectedDate=new Date(this.selectedDate),this.messageService.warn("Unable to report from future")):(this.isPreviousDay||(this.selectedDate=new Date(e)),this.compareDates(),this.inventoryModel.clear(),this.productName_Code=[],void this.getInventoryData())},e.prototype.compareDates=function(){this.currentDate.getDate()!==this.selectedDate.getDate()?this.isSameDates=!1:this.currentDate.getMonth()!==this.selectedDate.getMonth()?this.isSameDates=!1:this.currentDate.getFullYear()!==this.selectedDate.getFullYear()?this.isSameDates=!1:this.isSameDates=!0,this.isPreviousDay&&(this.isSameDates=!0)},e.prototype.isCountingDatePast=function(e){var t=new Date(e);return this.currentDate.getFullYear()>t.getFullYear()||(this.currentDate.getMonth()>t.getMonth()||this.currentDate.getDate()>t.getDate())},e.prototype.getInventoryData=function(){return s(this,void 0,void 0,function(){var e,t=this;return a(this,function(r){return e=f(this.selectedDate).format("YYYYMMDD"),this.restService.get("stock/"+e).subscribe(function(e){return s(t,void 0,void 0,function(){var t,r,n,i,o;return a(this,function(s){switch(s.label){case 0:for(this.inventoryModel.clear(),this.products=[],t=0,r=e;t<r.length;t++)n=r[t],this.checkDisability(n),null===n.counting_date?console.log("Error in data fetched from server"):(i=new h.Inventory,i.id=n.bsddid,i.productId=n.pid,i.productCode=n.product_code,i.productName=n.product_name,i.unopenedPack=n.product_count,i.unopenedPackTemp=n.product_count,i.stockMax=n.stockMax,i.is_delivery_finalised=n.is_delivery_finalised,i.submission_time=n.submission_time,i.delivery_submission_time=n.delivery_submission_time,i.ref_id=n.ref_id,i.ref_type_id=n.ref_type_id,null===n.last_count?i.lastCount=null:(o=f(n.last_count).format("YYYY-MM-DD"),i.lastCount="Invalid date"===o?this.currentDate:new Date(o)),i.shouldCountToday=!this.isCountingDatePast(n.counting_date),i.shouldIncluded=!0,i.state="exist",this.inventoryModel.add(i));return this.inventoryModel._inventories.sort(function(e,t){return e.shouldCountToday||!e.shouldIncluded||!t.shouldCountToday&&t.shouldIncluded?!e.shouldCountToday&&e.shouldIncluded||t.shouldCountToday||!t.shouldIncluded?e.productName.toLowerCase()>t.productName.toLowerCase()?1:e.productName.toLowerCase()<t.productName.toLowerCase()?-1:e.productCode.toLowerCase()>t.productCode.toLowerCase()?1:e.productCode.toLowerCase()<t.productCode.toLowerCase()?-1:0:1:-1}),this.checkInventoryItemsAlreadySubmitted(),this.noButton=this.inventoryModel._inventories.map(function(e){return e.shouldIncluded}).reduce(function(e,t){return e&&t},!0),[4,this.loadProducts()];case 1:return s.sent(),[2]}})})},function(e){console.log(e.message)}),[2]})})},e.prototype.submitDisability=function(){return this.submitShouldDisabled||this.waiting},e.prototype.checkInventoryItemsAlreadySubmitted=function(){var e=this.inventoryModel._inventories;this.isUpdateMode=e.every(function(e){return e.id&&null!==e.submission_time}),this.isUpdateMode&&(this.isFirstTimeFillsForm=!1,this.inventoryModel.setDisabled())},e.prototype.enableEditMode=function(){this.isUpdateMode=!this.isUpdateMode,this.inventoryModel.removeDisabled()},e.prototype.checkDisability=function(e){e&&e.unopenedPack<0&&(e.unopenedPack=0);for(var t=!1,r=0,n=this.inventoryModel._inventories;r<n.length;r++){var i=n[r];if(this.disableInventoryItem(i)){t=!0;break}}this.submitShouldDisabled=t},e.prototype.showProductList=function(){this.productNameCodeCtrl.setValue("")},e.prototype.loadProducts=function(){return s(this,void 0,void 0,function(){var e,t,r;return a(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.restService.get("product/all").toPromise()];case 1:return e=i.sent(),t=this.inventoryModel._inventories.map(function(e){return e.productId}),t=Array.from(new Set(t)),e=e.filter(function(e){return!t.find(function(t){return t===e.pid})}),this.products=e.map(function(e){return n({},e,{name_code:e.code+" - "+e.name})}),this.productName_Code=e.sort(function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:e.code.toLowerCase()>t.code.toLowerCase()?1:e.code.toLowerCase()<t.code.toLowerCase()?-1:0}).map(function(e){return e.code+" - "+e.name}),[3,3];case 2:return r=i.sent(),console.error("an error occurred during fetching products",r),[3,3];case 3:return[2]}})})},e.prototype.productSelected=function(e){var t=this.products.find(function(t){return t.name_code===e}),r=new h.Inventory;r.id=null,r.ref_id=null,r.ref_type_id=this.delivery_types.IS_NEW_PRODUCT,r.unopenedPack=null,r.productCode=t.code,r.productName=t.name,r.productId=t.pid,r.lastCount=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate()),r.isNew=!0,r.shouldIncluded=!1,this.inventoryModel.add(r),this.checkDisability(r),this.productNameCodeCtrl.setValue(null),this.productName_Code=this.productName_Code.filter(function(t){return t.toLowerCase()!==e.toLowerCase()})},e.prototype.removeStockFromDB=function(e){return s(this,void 0,void 0,function(){var t;return a(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.restService.delete("stock",e.id).toPromise()];case 1:return r.sent(),this.messageService.message(e.productName+" removed"),[3,3];case 2:return t=r.sent(),console.error("an error occurred during delete stock from stocks",t),[3,3];case 3:return[2]}})})},e}();i([d.ViewChild("unopenedPack"),o("design:type",Object)],b.prototype,"unopenedPack",void 0),i([d.ViewChild("autoNameCode"),o("design:type",Object)],b.prototype,"autoNameCode",void 0),b=i([d.Component({selector:"app-inventory-form",template:r(804),styles:[r(716)],animations:[d.trigger("itemState",[d.state("exist",d.style({opacity:1,transform:"translateX(0) scale(1)"})),d.state("delete",d.style({opacity:0,display:"none",transform:"translateX(0) scale(1)"})),d.state("sent",d.style({opacity:0,display:"none",transform:"translateX(0) scale(1)"})),d.transition("exist => delete",[d.animate("1s ease-out",d.style({opacity:0,transform:"translateX(-100%) scale(1)"}))]),d.transition("exist => sent",[d.animate("0.5s ease-out",d.style({opacity:0,transform:"translateX(0) scale(0.5)"}))])])]}),o("design:paramtypes",["function"==typeof(_=void 0!==l.AuthService&&l.AuthService)&&_||Object,"function"==typeof(D=void 0!==u.RestService&&u.RestService)&&D||Object,"function"==typeof(C=void 0!==v.MdDialog&&v.MdDialog)&&C||Object,"function"==typeof(w=void 0!==g.MessageService&&g.MessageService)&&w||Object])],b),t.InventoryFormComponent=b;var _,D,C,w},548:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(275),i=function(){function e(e){this._inventories=[],this._unitName="",this._unitName=e,this._inventories=[]}return e.prototype.clear=function(){this._inventories=[]},e.prototype.add=function(e){this._inventories.push(e)},e.prototype.get=function(e){return this._inventories.find(function(t){return t.id===e})},e.prototype.getByCode=function(e){return this._inventories.find(function(t){return t.productCode===e})},e.prototype.delete=function(e){this._inventories=this._inventories.filter(function(t){return t.id!==e})},e.toAnyObject=function(e){var t={};return t.bsddid=e.id,t.product_id=e.productId,t.product_count=e.unopenedPack,t.product_code=e.productCode,t.product_name=e.productName,t.last_count=e.lastCount,t.ref_id=e.ref_id,t.ref_type_id=e.ref_type_id,t},e.fromAnyObject=function(e){var t=new n.Inventory;for(var r in e)switch(r){case"bsddid":t.id=e[r];break;case"product_code":t.productCode=e[r];break;case"product_name":t.productName=e[r];break;case"product_count":t.unopenedPack=e[r];break;case"last_count":t.lastCount=e[r];break;case"pid":t.productId=e[r]}return t},e.prototype.setDisabled=function(){this._inventories.forEach(function(e){e.is_disabled=!0})},e.prototype.removeDisabled=function(){this._inventories.forEach(function(e){e.is_disabled=!1})},e}();t.InventoryModel=i},549:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(66),a=function(){function e(e){this.authService=e,this.loginEnabled=!1}return e.prototype.onChange=function(){this.loginEnabled=this.username&&this.password},e.prototype.ngOnInit=function(){},e.prototype.ifEnterLogin=function(e){13===e.keyCode&&this.userLogin()},e.prototype.userLogin=function(){this.authService.logIn(this.username,this.password)},e}();a=n([o.Component({selector:"app-login",template:r(805),styles:[r(717)]}),i("design:paramtypes",["function"==typeof(d=void 0!==s.AuthService&&s.AuthService)&&d||Object])],a),t.LoginComponent=a;var d},550:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}d((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;d;)try{if(i=1,o&&(s=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(s=s.call(o,r[1])).done)return s;switch(o=0,s&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return d.label++,{value:r[1],done:!1};case 5:d.label++,o=r[1],r=[0];continue;case 7:r=d.ops.pop(),d.trys.pop();continue;default:if(s=d.trys,!(s=s.length>0&&s[s.length-1])&&(6===r[0]||2===r[0])){d=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){d.label=r[1];break}if(6===r[0]&&d.label<s[1]){d.label=s[1],s=r;break}if(s&&d.label<s[2]){d.label=s[2],d.ops.push(r);break}s[2]&&d.ops.pop(),d.trys.pop();continue}r=t.call(e,d)}catch(e){r=[6,e],o=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,s,a,d={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),d=r(66),c=r(23),l=r(2),u=r(42),p=function(){function e(e,t,r){this.authService=e,this.router=t,this.restService=r,this.navLinks=[]}return e.prototype.ngOnInit=function(){return o(this,void 0,void 0,function(){var e,t=this;return s(this,function(r){switch(r.label){case 0:return[4,this.restService.get("date").toPromise()];case 1:return e=r.sent(),this.currentDate=new Date(e),setInterval(function(){t.currentDate=new Date(t.currentDate.setSeconds(t.currentDate.getSeconds()+1))},1e3),this.authService.auth$.subscribe(function(e){if(e){t.int&&clearInterval(t.int);var r=l().add(1,"hour");t.int=setInterval(function(){return t.remainedTime=l(new Date(r.diff(l()))).utc().format("mm:ss")},900)}t.auth=e,t.user=t.authService.user,t.isAdmin=e&&"admin"===t.authService.userType,t.isBranch=e&&"branch"===t.authService.userType,t.isPrep=e&&"prep"===t.authService.userType,t.isAdmin&&(t.navLinks.push({label:"Units",link:"units"}),t.navLinks.push({label:"Products",link:"products"}))}),[2]}})})},e.prototype.ngOnDestroy=function(){clearInterval(this.int)},e.prototype.logout=function(){clearInterval(this.int),this.authService.logOff()},e}();p=n([a.Component({selector:"app-navbar",template:r(806),styles:[r(718)]}),i("design:paramtypes",["function"==typeof(h=void 0!==d.AuthService&&d.AuthService)&&h||Object,"function"==typeof(m=void 0!==c.Router&&c.Router)&&m||Object,"function"==typeof(f=void 0!==u.RestService&&u.RestService)&&f||Object])],p),t.NavbarComponent=p;var h,m,f},551:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(10),a=r(42),d=r(66),c=r(162),l=r(87),u=r(35),p=function(){function e(e,t,r,n){this.restService=e,this.authService=t,this.messageService=r,this.msg=n,this.is_kitchen=!0,this.isAdmin=!1,this.productModels=[],this.isFiltered=!1,this.productName_Code=[],this.productNames=[],this.productCodes=[],this.branchList=[],this.addIsDisable=!1,this.updateIsDisable=!1,this.deleteIsDisable=!1,this.selectedIndex=0,this.hasCountingRuleError=!1,this.selectedProduct="",this.ae=l.ActionEnum}return e.prototype.ngOnInit=function(){var e=this;this.isAdmin="admin"===this.authService.userType,this.isAdmin?this.restService.get("unit?isBranch=true").subscribe(function(t){e.branchData=t.map(function(e){return{id:e.uid,name:e.name,is_kitchen:e.is_kitchen}}),e.getBranchList(),e.loadBranchProducts()},function(e){console.log(e.message)}):this.restService.get("override?uid="+this.authService.unit_id).subscribe(function(t){e.productModels=[];for(var r=function(t){var r=c.ProductModel.fromAnyObject(t),n=new c.ProductModel(r);e.productModels.push(n),e.productNames.find(function(e){return e===r.name})||e.productNames.push(r.name),e.productCodes.find(function(e){return e===r.code})||e.productCodes.push(r.code)},n=0,i=t;n<i.length;n++){r(i[n])}e.refreshDropDown()},function(e){console.log(e.message)}),this.checkDisabilityStatus(),this.productModelCtrl=new s.FormControl,this.filteredNameCode=this.productModelCtrl.valueChanges.startWith(null).map(function(t){return e.filterProducts(t)});var t=!1;this.filteredNameCode.subscribe(function(r){1===r.length?(null==e.filteredProductModel?e.filteredProductModel=new c.ProductModel(e.getProduct(r)):e.filteredProductModel.setProduct(e.getProduct(r)),e.selectedProduct="["+e.filteredProductModel._product.code+"] "+e.filteredProductModel._product.name,e.isFiltered=!0,t=!0):(e.selectedProduct="",e.isFiltered=!1,t=!1)},function(e){console.log(e.message)}),this.productModelCtrl.valueChanges.subscribe(function(r){if(!t){var n=void 0;e.productModelCtrl.value&&(n=e.productModels.find(function(t){return t._product.name.toLowerCase()==e.productModelCtrl.value.toLowerCase()||t._product.code.toLowerCase()==e.productModelCtrl.value.toLowerCase()})),null!==n&&void 0!==n?(null==e.filteredProductModel?e.filteredProductModel=new c.ProductModel(n._product):e.filteredProductModel.setProduct(n._product),e.selectedProduct=e.filteredProductModel._product.name,e.isFiltered=!0):(e.selectedProduct="",e.isFiltered=!1)}},function(e){console.log(e.message)})},e.prototype.refreshDropDown=function(){var e=this;this.productName_Code=[],this.productNames.forEach(function(t,r){return e.productName_Code.push("["+e.productCodes[r]+"] "+t)}),this.productModelCtrl.reset()},e.prototype.doClickedAction=function(e){if(!this.isFiltered||null===this.filteredProductModel)return void this.messageService.message("You should first choose product to override");switch(this.setWaiting(e,!0),e){case l.ActionEnum.add:this.add_updateOverride(!0);break;case l.ActionEnum.update:this.add_updateOverride(!1);break;case l.ActionEnum.delete:this.deleteOverride()}},e.prototype.add_updateOverride=function(e){var t=this,r="";this.isAdmin&&(r="?uid="+this.branchList[this.selectedIndex].id);var n=this.productModels.filter(function(e){return e._product.id===t.filteredProductModel._product.id});if(null===n[0])return console.log("Cannot match id!!!"),void this.messageService.message("Unexpected error has occurred. Please reload your page");this.restService.update("override",this.filteredProductModel._product.id+r,c.ProductModel.toAnyObjectOverride(n[0].getDifferentValues(this.filteredProductModel._product))).subscribe(function(r){t.filteredProductModel._product.isOverridden=!0,n[0].setProduct(t.filteredProductModel._product),e?t.setWaiting(l.ActionEnum.add,!1):t.setWaiting(l.ActionEnum.update,!1),t.checkDisabilityStatus(),t.messageService.message("Counting rule for '"+n[0]._product.name+"' has been overridden in '"+t.branchList[t.selectedIndex].name+"'.")},function(e){console.log(e.message),t.checkDisabilityStatus()})},e.prototype.deleteOverride=function(){var e=this,t="";this.isAdmin&&(t="?uid="+this.branchList[this.selectedIndex].id);var r=this.productModels.filter(function(t){return t._product.id===e.filteredProductModel._product.id});if(null===r[0])return console.log("Cannot match id!!!"),void this.messageService.message("Unexpected error has occurred. Please reload your page");this.restService.delete("override",this.filteredProductModel._product.id+t).subscribe(function(t){e.filteredProductModel._product.isOverridden=!1,r[0].setProduct(c.ProductModel.fromAnyObject(t.json())),e.filteredProductModel.setProduct(c.ProductModel.fromAnyObject(t.json())),e.setWaiting(l.ActionEnum.delete,!1),e.checkDisabilityStatus()},function(t){console.log(t.message),e.checkDisabilityStatus()})},e.prototype.checkDisabilityStatus=function(){this.addIsDisable=!this.isFiltered||this.shouldAddBtnDisable(),this.updateIsDisable=!this.isFiltered||this.shouldUpdateBtnDisable(),this.deleteIsDisable=!this.isFiltered||this.shouldDeleteBtnDisable()},e.prototype.shouldAddBtnDisable=function(){var e=this;if(this.filteredProductModel.waiting.getValue().adding||this.hasCountingRuleError)return!0;var t=this.productModels.filter(function(t){return t._product.id===e.filteredProductModel._product.id});return null===t[0]?(console.log("Id changed!!!"),!0):!t[0].isDifferent(this.filteredProductModel._product)},e.prototype.shouldUpdateBtnDisable=function(){var e=this;if(this.filteredProductModel.waiting.getValue().updating||this.hasCountingRuleError)return!0;var t=this.productModels.filter(function(t){return t._product.id===e.filteredProductModel._product.id});return null===t[0]?(console.log("Id changed!!!"),!0):!t[0].isDifferent(this.filteredProductModel._product)},e.prototype.shouldDeleteBtnDisable=function(){return!(!this.filteredProductModel.waiting.getValue().deleting&&!this.hasCountingRuleError)},e.prototype.changedTab=function(){var e=this;this.filteredProductModel=null,this.isFiltered=!1;var t=this.selectedProduct;this.loadBranchProducts(function(){null!==t&&""!==t&&(e.selectedProduct=t,e.productModelCtrl.setValue(e.selectedProduct),e.productModelCtrl.markAsTouched())})},e.prototype.loadBranchProducts=function(e){var t=this;void 0===e&&(e=function(){}),this.isAdmin&&this.restService.get("override?uid="+this.branchList[this.selectedIndex].id).subscribe(function(r){t.productModels=[],t.productNames=[],t.productCodes=[];for(var n=0,i=r;n<i.length;n++){var o=i[n],s=c.ProductModel.fromAnyObject(o),a=new c.ProductModel(s);t.productModels.push(a),t.productNames.push(s.name),t.productCodes.push(s.code)}t.refreshDropDown(),e()},function(e){console.log(e.message)})},e.prototype.countingRuleErrorHandler=function(e){e?(this.messageService.warn(e),this.hasCountingRuleError=!0):this.hasCountingRuleError=!1,this.checkDisabilityStatus()},e.prototype.setWaiting=function(e,t){var r={adding:!1,updating:!1,deleting:!1};switch(e){case l.ActionEnum.add:r.adding=t;break;case l.ActionEnum.update:r.updating=t;break;case l.ActionEnum.delete:r.deleting=t}this.filteredProductModel.waiting.next(r)},e.prototype.filterProducts=function(e){return e?this.productName_Code.filter(function(t){return new RegExp(e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"gi").test(t)}):this.productName_Code},e.prototype.getProduct=function(e){var t;return t=this.productModels[this.productName_Code.findIndex(function(t){return e[0]===t})],t._product},e.prototype.showProductList=function(e){null===this.productModelCtrl.value?this.productModelCtrl.setValue(""):e.target.select()},e.prototype.changeFilter=function(){this.selectedProduct=null,this.getBranchList(),this.changedTab()},e.prototype.getBranchList=function(){var e=this;this.branchList=this.branchData.filter(function(t){return t.is_kitchen===e.is_kitchen}).sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})},e}();n([o.ViewChild("autoNameCode"),i("design:type",Object)],p.prototype,"autoNameCode",void 0),p=n([o.Component({selector:"app-override-form",template:r(807),styles:[r(719)]}),i("design:paramtypes",["function"==typeof(h=void 0!==a.RestService&&a.RestService)&&h||Object,"function"==typeof(m=void 0!==d.AuthService&&d.AuthService)&&m||Object,"function"==typeof(f=void 0!==u.MessageService&&u.MessageService)&&f||Object,"function"==typeof(v=void 0!==u.MessageService&&u.MessageService)&&v||Object])],p),t.OverrideFormComponent=p;var h,m,f,v},552:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(60),a=r(10),d=r(162),c=r(87),l=r(42),u=r(35),p=function(){function e(e,t,r){this.restService=e,this.messageService=t,this.elementRef=r,this.isAdding=new s.BehaviorSubject(!1),this.actionIsSuccess=new s.BehaviorSubject(!1),this.productModels=[],this.isFiltered=!1,this.productName_Code=[],this.productNames=[],this.productCodes=[],this.selectedIndex=0,this.nameChose=!1,this.codeChose=!1}return e.prototype.ngOnInit=function(){var e=this;this.restService.get("product").subscribe(function(t){e.productModels=[];for(var r=function(t){var r=d.ProductModel.fromAnyObject(t),n=new d.ProductModel(r);e.productModels.push(n),e.productNames.find(function(e){return e===r.name})||e.productNames.push(r.name),e.productCodes.find(function(e){return e===r.code})||e.productCodes.push(r.code)},n=0,i=t;n<i.length;n++){r(i[n])}e.refreshProductsDropDown()},function(e){console.log(e.message)}),this.productModelCtrlName=new a.FormControl,this.productModelCtrlCode=new a.FormControl,this.filteredName=this.productModelCtrlName.valueChanges.startWith(null).map(function(t){return e.filterProducts(t,"name")}),this.filteredCode=this.productModelCtrlCode.valueChanges.startWith(null).map(function(t){return e.filterProducts(t,"code")});var t=!1;this.filteredName.subscribe(function(r){1===r.length?(t||(e.codeChose=!1,e.nameChose=!1),e.isFiltered=!1,e.filteredProductModel=e.getProduct(r,"name"),e.nameChose=!0,t=!0,e.codeChose||e.productModelCtrlCode.setValue(e.filteredProductModel._product.code),e.isFiltered=!0):(e.nameChose=!1,e.isFiltered=!1,t=!1)},function(e){console.log(e.message)}),this.filteredCode.subscribe(function(r){1===r.length?(t||(e.codeChose=!1,e.nameChose=!1),e.isFiltered=!1,e.filteredProductModel=e.getProduct(r,"code"),console.log(e.filteredProductModel),e.codeChose=!0,t=!0,e.nameChose||e.productModelCtrlName.setValue(e.filteredProductModel._product.name),e.isFiltered=!0):(e.codeChose=!1,e.isFiltered=!1,t=!1)},function(e){console.log(e.message)}),this.productModelCtrlName.valueChanges.subscribe(function(r){if(!t){var n=e.productModels.find(function(t){return t._product.name.toLowerCase()==e.productModelCtrlName.value.toLowerCase()});null!==n&&void 0!==n?(e.isFiltered=!1,e.filteredProductModel=n,e.nameChose=!0,e.codeChose||e.productModelCtrlCode.setValue(e.filteredProductModel._product.code),e.isFiltered=!0):(e.isFiltered=!1,e.nameChose=!1)}},function(e){console.log(e.message)}),this.productModelCtrlCode.valueChanges.subscribe(function(r){if(!t){var n=e.productModels.find(function(t){return t._product.code.toLowerCase()==e.productModelCtrlCode.value.toLowerCase()});null!==n&&void 0!==n?(e.isFiltered=!1,e.filteredProductModel=n,e.codeChose=!0,e.nameChose||e.productModelCtrlName.setValue(e.filteredProductModel._product.name),e.isFiltered=!0):(e.isFiltered=!1,e.codeChose=!1)}},function(e){console.log(e.message)})},e.prototype.refreshProductsDropDown=function(){var e=this;this.productName_Code=[],this.productNames.forEach(function(t){return e.productName_Code.push(t)}),this.productCodes.forEach(function(t){return e.productName_Code.push(t)})},e.prototype.doClickedAction=function(e){var t=e.type,r=e.data;switch(this.disableEnable(r.id,t,!0),t){case c.ActionEnum.add:this.addProduct(r);break;case c.ActionEnum.delete:this.deleteProduct(r.id);break;case c.ActionEnum.update:this.updateProduct(r.id,r)}},e.prototype.addProduct=function(e){var t=this,r=this.productModels.find(function(t){return t._product.name.toLowerCase()===e.name.toLowerCase()});if(null!==r&&void 0!==r)return this.messageService.warn("The '"+r._product.name+"' name is already exist."),void this.disableEnable(e.id,c.ActionEnum.add,!1);var n=this.productModels.find(function(t){return t._product.code.toLowerCase()===e.code.toLowerCase()});if(null!==n&&void 0!==n)return this.messageService.warn("The '"+n._product.code+"' code is already exist."),void this.disableEnable(e.id,c.ActionEnum.add,!1);var i=e.name;this.restService.insert("product",d.ProductModel.toAnyObject(e)).subscribe(function(r){e.id=r;var n=new d.ProductModel(e);t.actionIsSuccess.next(!0),t.productModels.push(n),t.productNames.push(n._product.name),t.productCodes.push(n._product.code),t.refreshProductsDropDown(),t.disableEnable(e.id,c.ActionEnum.add,!1),t.actionIsSuccess.next(!1),t.messageService.message("'"+i+"' is added to products.")},function(r){t.messageService.error(r),o.isDevMode()&&console.log(r),t.disableEnable(e.id,c.ActionEnum.add,!1)})},e.prototype.deleteProduct=function(e){var t=this;this.restService.delete("product",e).subscribe(function(r){var n=t.productModels.filter(function(t){return t._product.id===e});t.productModels=t.productModels.filter(function(t){return t._product.id!==e}),t.productNames=t.productNames.filter(function(e){return e!==n[0]._product.name}),t.productCodes=t.productCodes.filter(function(e){return e!==n[0]._product.code}),t.refreshProductsDropDown(),t.isFiltered=!1,t.filteredProductModel=null,t.productModelCtrlName.setValue(""),t.messageService.message("Product is deleted.")},function(r){t.messageService.error(r),o.isDevMode()&&console.log(r),t.disableEnable(e,c.ActionEnum.delete,!1)})},e.prototype.updateProduct=function(e,t){var r=this,n=this.productModels.find(function(e){return e._product.name.toLowerCase()===t.name.toLowerCase()});if(null!==n&&void 0!==n&&t.name!==this.filteredProductModel._product.name)return this.messageService.warn("The '"+n._product.name+"' name is already exist."),void this.disableEnable(e,c.ActionEnum.update,!1);var i=this.productModels.find(function(e){return e._product.code.toLowerCase()===t.code.toLowerCase()});if(null!==i&&void 0!==i&&t.code!==this.filteredProductModel._product.code)return this.messageService.warn("The '"+i._product.code+"' code is already exist."),void this.disableEnable(e,c.ActionEnum.update,!1);var s=this.productModels.findIndex(function(t){return t._product.id==e}),a=this.productModels[s]._product.code,l=this.productModels[s]._product.name;this.restService.update("product",e,d.ProductModel.toAnyObject(this.productModels[s].getDifferentValues(t))).subscribe(function(n){r.actionIsSuccess.next(!0),r.productModels[s].setProduct(t);var i=r.productNames.findIndex(function(e){return e===l});r.productNames[i]=t.name;var o=r.productCodes.findIndex(function(e){return e===a});r.productCodes[o]=t.code,r.refreshProductsDropDown(),r.disableEnable(e,c.ActionEnum.update,!1),r.messageService.message("'"+name+"' is updated in products."),r.actionIsSuccess.next(!1)},function(t){r.messageService.error(t),o.isDevMode()&&console.log(t),r.disableEnable(e,c.ActionEnum.update,!1)})},e.prototype.disableEnable=function(e,t,r){var n=this.productModels.find(function(t){return t._product.id==e}),i=n?n.waiting.getValue():null;switch(t){case c.ActionEnum.update:i.updating=r;break;case c.ActionEnum.delete:i.deleting=r;break;case c.ActionEnum.add:this.isAdding.next(r)}n&&n.waiting.next(i)},e.prototype.filterProducts=function(e,t){var r=[];return"name"===t?(r=e?this.productNames.filter(function(t){return new RegExp(e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"gi").test(t)}):this.productNames,r.length>0&&(this.filteredCode.source=this.getProductCode(r))):"code"===t&&(r=e?this.productCodes.filter(function(t){return new RegExp(e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"gi").test(t)}):this.productCodes,r.length>0&&(this.filteredName.source=this.getProductName(r))),r},e.prototype.getProductName=function(e){var t=this,r=[];return e.forEach(function(e){r.push(t.productModels.find(function(t){return t._product.code==e})._product.name)}),r},e.prototype.getProductCode=function(e){var t=this,r=[];return e.forEach(function(e){r.push(t.productModels.find(function(t){return t._product.name==e})._product.code)}),r},e.prototype.getProduct=function(e,t){var r;return"name"===t?r=this.productModels[this.productName_Code.findIndex(function(t){return e[0]===t})]:"code"===t&&(r=this.productModels[this.productName_Code.findIndex(function(t){return e[0]===t})-this.productNames.length]),r},e.prototype.showProductList=function(e,t){"name"===t?null===this.productModelCtrlName.value?this.productModelCtrlName.setValue(""):e.target.select():"code"===t&&(null===this.productModelCtrlCode.value?this.productModelCtrlCode.setValue(""):e.target.select())},e}();n([o.ViewChild("autoNameInput"),i("design:type",Object)],p.prototype,"autoNameInput",void 0),p=n([o.Component({selector:"app-product-form",template:r(809),styles:[r(721)]}),i("design:paramtypes",["function"==typeof(h=void 0!==l.RestService&&l.RestService)&&h||Object,"function"==typeof(m=void 0!==u.MessageService&&u.MessageService)&&m||Object,"function"==typeof(f=void 0!==o.ElementRef&&o.ElementRef)&&f||Object])],p),t.ProductFormComponent=p;var h,m,f},553:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(60),a=r(278),d=r(162),c=r(87),l=r(42),u=r(35),p=function(){function e(e,t){this.restService=e,this.messageService=t,this.isAdd=!0,this.action=new o.EventEmitter,this.hasCountingRuleError=!1,this.countingRuleError="",this.formTitle="",this.ae=c.ActionEnum,this.addIsDisable=!1,this.updateIsDisable=!1,this.deleteIsDisable=!1,this.measuringUnits=["Kg","gr","L","lb","oz","fl oz","mL","units","packs","dozens","barrels"],this.prepUnits=[]}return Object.defineProperty(e.prototype,"productModel",{get:function(){return this.tempProductModel},set:function(e){this.tempProductModel=e,this.ngOnInit()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;if(this.product=new a.Product,this.restService.get("unit?isBranch=false").subscribe(function(t){e.prepUnits=[];for(var r=0,n=t;r<n.length;r++){var i=n[r],o={id:i.uid,name:i.name};e.prepUnits.push(o)}},function(e){console.log(e)}),this.actionIsSuccess.subscribe(function(t){if(t===!0){if(e.isAdd===!0){e.product.id=-1,e.product.name="",e.product.code="",e.product.size=null,e.product.measuringUnit=null,e.product.prep_unit_id=null,e.product.minQty=-12345678,e.product.maxQty=null,e.product.price=null;for(var r in e.product.coefficients)e.product.coefficients[r]=1;e.product.countingRecursion=""}e.disabilityStatus()}},function(e){console.log(e.message)}),this.isAdd){this.isAdding.subscribe(function(t){e._isAdding=t,e.disabilityStatus()},function(e){console.log(e.message)}),this.formTitle="New Product",this.product.id=-1,this.product.name="",this.product.code="",this.product.size=null,this.product.measuringUnit=null,this.product.prep_unit_id=null,this.product.countingRecursion="",this.product.minQty=null,this.product.maxQty=null,this.product.price=null;for(var t in this.product.coefficients)this.product.coefficients[t]=1}else{this.productModel.waiting.subscribe(function(t){e._isUpdating=t.updating,e._isDeleting=t.deleting,e.disabilityStatus()},function(e){console.log(e.message)}),this.product.id=this.tempProductModel._product.id,this.product.name=this.tempProductModel._product.name,this.product.code=this.tempProductModel._product.code,this.product.size=this.tempProductModel._product.size,this.product.measuringUnit=this.tempProductModel._product.measuringUnit,this.product.prep_unit_id=this.tempProductModel._product.prep_unit_id,this.product.maxQty=this.tempProductModel._product.maxQty,this.product.minQty=this.tempProductModel._product.minQty,this.product.price=this.tempProductModel._product.price;for(var t in this.tempProductModel._product.coefficients)this.product.coefficients[t]=this.tempProductModel._product.coefficients[t];this.product.countingRecursion=this.tempProductModel._product.countingRecursion,this.formTitle=this.product.name}this.disabilityStatus()},e.prototype.actionEmitter=function(e){var t={type:e,data:this.product};this.action.emit(t)},e.prototype.disabilityStatus=function(){this.isAdd?this.addIsDisable=this.shouldDisableAddBtn():(this.deleteIsDisable=this.shouldDisableDeleteBtn(),this.updateIsDisable=this.shouldDisableUpdateBtn())},e.prototype.isCorrectFormData=function(){for(var e in this.product.coefficients)if(this.product.coefficients[e]<0&&(this.product.coefficients[e]=1),this.product.coefficients[e]>99999&&(this.product.coefficients[e]=99999),0===this.product.coefficients[e]||null===this.product.coefficients[e])return!1;return this.product.size<0&&(this.product.size=1),this.product.size>99999&&(this.product.size=99999),""!==this.product.name&&""!==this.product.code&&null!==this.product.size&&0!==this.product.size&&null!==this.product.measuringUnit&&null!==this.product.prep_unit_id&&!this.hasCountingRuleError},e.prototype.shouldDisableAddBtn=function(){return this._isAdding===!0||!this.isCorrectFormData()},e.prototype.shouldDisableUpdateBtn=function(){return this._isUpdating===!0||(this.productModel.isDifferent(this.product)!==!0||!this.isCorrectFormData())},e.prototype.shouldDisableDeleteBtn=function(){return this._isDeleting===!0},e.prototype.countingRuleErrorHandler=function(e){e?(this.messageService.warn(e),this.hasCountingRuleError=!0):this.hasCountingRuleError=!1,this.disabilityStatus()},e}();n([o.Input(),i("design:type",Boolean)],p.prototype,"isAdd",void 0),n([o.Input(),i("design:type","function"==typeof(h=void 0!==s.Observable&&s.Observable)&&h||Object)],p.prototype,"isAdding",void 0),n([o.Input(),i("design:type","function"==typeof(m=void 0!==s.Observable&&s.Observable)&&m||Object)],p.prototype,"actionIsSuccess",void 0),n([o.Input(),i("design:type","function"==typeof(f=void 0!==d.ProductModel&&d.ProductModel)&&f||Object),i("design:paramtypes",["function"==typeof(v=void 0!==d.ProductModel&&d.ProductModel)&&v||Object])],p.prototype,"productModel",null),n([o.Output(),i("design:type",Object)],p.prototype,"action",void 0),p=n([o.Component({selector:"app-product-sub-form",template:r(810),styles:[r(722)]}),i("design:paramtypes",["function"==typeof(y=void 0!==l.RestService&&l.RestService)&&y||Object,"function"==typeof(g=void 0!==u.MessageService&&u.MessageService)&&g||Object])],p),t.ProductSubFormComponent=p;var h,m,f,v,y,g},554:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(42),a=r(728),d=r(35),c=r(279),l=r(114),u=r(2),p=function(){function e(e,t){this.restService=e,this.messageService=t,this.productModels=[],this.unitModels=[],this.branches=[],this.branchIdForProductReport=0,this.branchIdForDeliveryReport=0,this.deliveryReportBtnDisabled=!0,this.inventoryReportBtnDisabled=!0}return e.prototype.ngOnInit=function(){var e=this;this.restService.get("unit?isBranch=true").subscribe(function(t){e.unitModels=[];for(var r=0,n=t;r<n.length;r++){var i=n[r],o=new l.Unit;o.id=i.uid,o.name=i.name,o.username=i.username,o.password="",o.is_branch=i.is_branch,o.is_kitchen=i.is_kitchen;var s=new c.UnitModel(o);e.unitModels.push(s)}e.branches=e.unitModels.map(function(e){return e._unit}),e.branchesWithoutAllOption=e.branches.map(function(e){return e});var a=new l.Unit;a.id=0,a.name="All",e.branches.push(a)},function(t){e.messageService.error(t),o.isDevMode()&&console.log(t)})},e.prototype.loadDataForProductsReport=function(){var e=this,t=u().format("YYYY-MM-DD");0===this.branchIdForProductReport?this.restService.get("reports/all_products/").subscribe(function(r){e.downloadCSV(e.convertAllProductsToCSV(r),"all-products-"+t+".csv")},function(e){console.log(e.message)}):this.restService.get("reports/products/"+this.branchIdForProductReport).subscribe(function(r){var n=e.branches.find(function(t){return t.id===e.branchIdForProductReport}),i=n.name+"-products-"+t+".csv";e.downloadCSV(e.convertBranchProductsToCSV(r,n),i)},function(e){console.error(e.message)})},e.prototype.prepareInventoryCountingReport=function(){var e=this;if(!this.branchIdForInventoryReport)return void this.messageService.message("Please select a branch");this.restService.get("reports/inventory_counting/"+this.branchIdForInventoryReport).subscribe(function(t){var r=e.branches.find(function(t){return t.id===e.branchIdForInventoryReport}),n=u().format("YYYY-MM-DD"),i=r.name+"-inventory-counting-report-"+n+".csv";e.downloadCSV(e.wrapInventoryCountingReportResults(t),i)},function(e){console.log(e)})},e.prototype.wrapInventoryCountingReportResults=function(e){var t=["Product Name","Product Code","Last Counted","Inventory Count","Next Count Date","Estimate Stock Availability","Branch Name"],r=e.map(function(e){return{"Product Name":e.product_name,"Product Code":e.product_code,"Branch Name":e.branch_name,"Last Counted":u(e.last_counted).format("ddd DD MMM YYYY"),"Inventory Count":e.product_count,"Next Count Date":u(e.next_count_date).format("ddd DD MMM YYYY"),"Estimate Stock Availability":e.estimate}});return this.convertToCSV(t,r)},e.prototype.checkDisabilityStatus=function(){this.startDate&&this.endDate?this.deliveryReportBtnDisabled=!1:this.deliveryReportBtnDisabled=!0,this.branchIdForInventoryReport?this.inventoryReportBtnDisabled=!1:this.inventoryReportBtnDisabled=!0},e.prototype.prepareDeliveryReport=function(){var e=this;if(!this.startDate||!this.endDate)return void this.messageService.message("Please select a date range");var t=u(this.startDate),r=u(this.endDate);if(t.isAfter(r))return void this.messageService.warn("Selected date range is not valid");var n,i=t.format("YYYY-MM-DD"),o=r.format("YYYY-MM-DD");n=0===this.branchIdForDeliveryReport?"reports/delivery/"+i+"/"+o:"reports/branch_delivery/"+this.branchIdForDeliveryReport+"/"+i+"/"+o,this.restService.get(n).subscribe(function(t){e.downloadCSV(e.wrapDeliveryReportResults(t),"delivery-report-"+i+"-"+o+".csv")},function(e){console.log(e)})},e.prototype.wrapDeliveryReportResults=function(e){var t=["Product Name","Product Code","Delivered To","Date","Quantity","Product Price","Subtotal"],r=e.map(function(e){return{"Product Name":e.product_name,"Product Code":e.product_code,"Delivered To":e.branch_name,Date:u(e.counting_date).format("YYYY-MM-DD"),Quantity:e.real_delivery,"Product Price":e.product_price?"£"+e.product_price:"",Subtotal:e.subtotal?"£"+e.subtotal:0}}),n=e.reduce(function(e,t){return e+(t.subtotal?parseFloat(t.subtotal):0)},0);return r.push({"Product Name":"Total",Subtotal:"£"+n.toFixed(2)}),this.convertToCSV(t,r)},e.prototype.convertBranchProductsToCSV=function(e,t){e=e.filter(function(e){return e.prep_unit_is_kitchen===t.is_kitchen});var r=["Product Id","Name","Code","Size","Measuring Unit","Price","Preparing Unit Name","Min Quantity","Max Quantity","Usage","Is Overridden","Monday Coef.","Tuesday Coef.","Wednesday Coef.","Thursday Coef.","Friday Coef.","Friday Coef.","Saturday Coef.","Sunday Coef.","Inventory Counting Recursion"],n=e.map(function(e){return{"Product Id":e.pid,Name:e.name,Code:e.code,Size:e.size,"Measuring Unit":e.measuring_unit,Price:e.price?"£"+e.price.substring(1):"","Preparing Unit Name":e.prep_unit_name,"Min Quantity":e.default_min,"Max Quantity":e.default_max,"Is Overridden":void 0!==e.isOverridden&&e.isOverridden,"Inventory Counting Recursion":e.recursion,Usage:e.default_usage,"Monday Coef.":e.default_mon_multiple,"Tuesday Coef.":e.default_tue_multiple,"Wednesday Coef.":e.default_wed_multiple,"Thursday Coef.":e.default_thu_multiple,"Friday Coef.":e.default_fri_multiple,"Saturday Coef.":e.default_sat_multiple,"Sunday Coef.":e.default_sun_multiple}});return this.convertToCSV(r,n)},e.prototype.convertAllProductsToCSV=function(e){var t=["Product Id","Name","Code","Size","Measuring Unit","Price","Preparing Unit Name","Min Quantity","Max Quantity","Usage","Monday Coef.","Tuesday Coef.","Wednesday Coef.","Thursday Coef.","Friday Coef.","Friday Coef.","Saturday Coef.","Sunday Coef.","Inventory Counting Recursion"],r=e.map(function(e){return{"Product Id":e.pid,Name:e.name,Code:e.code,Size:e.size,"Measuring Unit":e.measuring_unit,Price:e.price?"£"+e.price.substring(1):"","Preparing Unit Name":e.prep_unit_name,"Min Quantity":e.default_min,"Max Quantity":e.default_max,Usage:e.default_usage,"Monday Coef.":e.default_mon_multiple,"Tuesday Coef.":e.default_tue_multiple,"Wednesday Coef.":e.default_wed_multiple,"Thursday Coef.":e.default_thu_multiple,"Friday Coef.":e.default_fri_multiple,"Saturday Coef.":e.default_sat_multiple,"Sunday Coef.":e.default_sun_multiple,"Inventory Counting Recursion":e.recursion.replace(/,/g," - ")}});return this.convertToCSV(t,r)},e.prototype.convertToCSV=function(e,t){var r,n,i,o;return i=",",o="\n",r="",r+=e.join(i),r+=o,t.forEach(function(t){n=0,e.forEach(function(e){n>0&&(r+=i),r+=void 0!==t[e]?t[e]:"",n++}),r+=o}),r},e.prototype.downloadCSV=function(e,t){if(void 0===e)return void console.error("no data set for creating file");var r=new Blob([e],{type:"text/csv;charset=utf-8"});a.saveAs(r,t)},e}();p=n([o.Component({selector:"app-reports",template:r(811),styles:[r(723)]}),i("design:paramtypes",["function"==typeof(h=void 0!==s.RestService&&s.RestService)&&h||Object,"function"==typeof(m=void 0!==d.MessageService&&d.MessageService)&&m||Object])],p),t.ReportsComponent=p;var h,m},555:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=function(){function e(){this._days=[],this.daysChange=new o.EventEmitter,this.calDays=[]}return Object.defineProperty(e.prototype,"days",{get:function(){return this._days},set:function(e){this._days=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){for(var e=0;e<5;e++){for(var t=[],r=0;r<6||4===e&&r<7;r++){var n=6*e+r+1;this.reverse&&(n=31-n),t.push(n)}this.calDays.push(t)}},e.prototype.monthDaysChange=function(e){var t=e.value;this.reverse&&t++,e.source.checked?this.days.indexOf(t)===-1&&this.days.push(t):this.days.indexOf(t)!==-1&&this.days.splice(this.days.indexOf(t),1),this.daysChange.emit(this._days)},e}();n([o.Input(),i("design:type",Array),i("design:paramtypes",[Array])],s.prototype,"days",null),n([o.Output(),i("design:type",Object)],s.prototype,"daysChange",void 0),n([o.Input(),i("design:type",Boolean)],s.prototype,"reverse",void 0),s=n([o.Component({selector:"app-monthday",template:r(812),styles:[r(724)]}),i("design:paramtypes",[])],s),t.MonthdayComponent=s},556:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(95),a=r(2),d=function(){function e(){this.RRuleStrChange=new o.EventEmitter,this.freqs=["Daily","Weekly","Monthly","Never"],this.freqsConst=[s.RRule.DAILY,s.RRule.WEEKLY,s.RRule.MONTHLY,null],this.freqsName=["day","week","month"],this.weekdays=["Mon","Tue","Wed","Thr","Fri","Sat","Sun"],this.weekdaysConst=[s.RRule.MO,s.RRule.TU,s.RRule.WE,s.RRule.TH,s.RRule.FR,s.RRule.SA,s.RRule.SU],this.weekpos=[1,2,3,4,-1],this.weekposName=["First","Second","Third","Fourth","Last"],this.byweekday=[],this.text="",this.showWeekdays=!1,this.showMonthOptions=!1,this.monthlyInputMode="",this.monthDaysOption=[],this.monthDaysPast=[],this.monthDaysRemained=[],this.bymonthday=[],this.bysetpos=[],this.freq=""}return Object.defineProperty(e.prototype,"RRuleStr",{get:function(){return this._rstr},set:function(e){""!==e&&this._rstr||(this._rstr=e,this.ngOnInit(),this.text="")},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.rule=s.RRule.fromString(this.RRuleStr),this.options=this.rule.options,this.freq=this.options.freq,this.options.bysetpos&&(this.bysetpos=this.options.bysetpos),this.options.bymonthday&&(this.bymonthday=this.options.bymonthday),this.options.byweekday&&this.options.byweekday.length?this.byweekday=this.options.byweekday.map(function(t){return e.weekdaysConst[t]}):this.options.byweekday&&(this.byweekday=this.options.byweekday),this.bysetpos.length>0?this.monthlyInputMode="week":this.bymonthday.length>0&&(this.monthlyInputMode="month"),this.calcPastOrRemained()},e.prototype.onChange=function(){try{for(var e in this.options)this.options[e]&&0!==this.options[e].length&&["bynmonthday","bynweeday","bynsetpos","byhour","byminute","bysecond"].indexOf(e)===-1||delete this.options[e];this.options.freq!==this.freq?(this.options.freq=this.freq,this.options.freq===s.RRule.DAILY?(delete this.options.byweekday,delete this.options.bysetpos,this.bysetpos=[],this.byweekday=[],delete this.options.bymonthday,this.bymonthday=[],this.monthDaysPast=[],this.monthDaysRemained=[]):this.options.freq===s.RRule.WEEKLY?(delete this.options.bysetpos,this.bysetpos=[],delete this.options.bymonthday,this.bymonthday=[],this.monthDaysPast=[],this.monthDaysRemained=[]):this.options.freq===s.RRule.MONTHLY&&(delete this.options.byweekday,delete this.options.bysetpos,"month"===this.monthlyInputMode?(this.bymonthday=[a().get("D")],this.options.bymonthday=this.bymonthday):(delete this.options.bymonthday,this.bymonthday=[]),this.bysetpos=[],this.byweekday=[])):this.options.freq=this.freq,this.options.bymonth=[],this.rule=new s.RRule(this.options),this.rule.options.bymonth=[],this.calcPastOrRemained(),this.emitChange(),this.showMonthOptions=this.options.freq===s.RRule.MONTHLY,this.showWeekdays=this.options.freq===s.RRule.WEEKLY||this.options.freq===s.RRule.MONTHLY&&"week"===this.monthlyInputMode,this.showWeekdays||(this.options.byweekday=[]),this.populateNextOccurrences()}catch(e){console.log(e)}},e.prototype.calcPastOrRemained=function(){this.monthDaysPast=this.bymonthday.filter(function(e){return e>0}),this.monthDaysPast.length&&this.monthDaysOption.indexOf("past")&&this.monthDaysOption.push("past"),this.monthDaysRemained=this.bymonthday.filter(function(e){return e<0}),this.monthDaysRemained.length&&this.monthDaysOption.push("remained"),this.showMonthDaysPast=this.monthDaysOption.indexOf("past")!==-1,this.showMonthDaysRemained=this.monthDaysOption.indexOf("remained")!==-1},e.prototype.emitChange=function(){this.RRuleStrChange.emit({value:this.rule.options.freq?this.rule.toString():"",error:this.validate()})},e.prototype.populateNextOccurrences=function(){if(this.rule.options.freq){var e=new Date,t=a(e).add(366,"d").toDate();this.text=this.rule.between(e,t).map(function(e){return a(e).format("ddd DD-MMM-YY")}).splice(0,10).concat([this.rule.toString()]).join("\n")}else this.text=""},e.prototype.validate=function(){var e="";return this.options.freq!==s.RRule.WEEKLY||this.byweekday.length?this.rule.options.freq===s.RRule.MONTHLY&&"week"===this.monthlyInputMode?this.bysetpos.length&&!this.byweekday.length?e="choose weekdays":this.options.freq===s.RRule.MONTHLY&&this.byweekday.length&&!this.bysetpos.length?e="choose week numbers in month":this.byweekday.length||this.bysetpos.length||(e="choose week numbers and weekdays"):this.rule.options.freq===s.RRule.MONTHLY&&"month"===this.monthlyInputMode&&(this.showMonthDaysPast&&!this.monthDaysPast.length?e="No days past month is chosen":this.showMonthDaysRemained&&!this.monthDaysRemained.length?e="No days from month remainder is chosen":this.showMonthDaysRemained||this.showMonthDaysPast||(e="choose a day")):e="choose a weekday",e},e.prototype.onMonthlyInputModeChange=function(e){this.onChange()},e.prototype.byweekdayChange=function(e){this.multipleChoice(e,"byweekday"),this.options.byweekday=this.byweekday,delete this.options.bymonthday,this.onChange()},e.prototype.monthDaysPastOrRemainedChange=function(e){this.multipleChoice(e,"monthDaysOption"),this.monthDaysOption.indexOf("past")===-1&&(this.monthDaysPast=[],this.bymonthday=this.bymonthday.filter(function(e){return e<0})),this.monthDaysOption.indexOf("remained")===-1&&(this.monthDaysRemained=[],this.bymonthday=this.bymonthday.filter(function(e){return e>0})),this.options.bymonthday=this.bymonthday,this.calcPastOrRemained(),this.onChange()},e.prototype.monthDaysRemainedChange=function(e){this.monthDaysRemained=e,this.bymonthday=this.bymonthday.filter(function(e){return e>0}).concat(this.monthDaysRemained.map(function(e){return-e})),this.options.bymonthday!==this.bymonthday&&(this.options.bymonthday=this.bymonthday,this.onChange())},e.prototype.monthDaysPastChange=function(e){this.monthDaysPast=e,this.bymonthday=this.bymonthday.filter(function(e){return e<0}).concat(this.monthDaysPast),this.options.bymonthday!==this.bymonthday&&(this.options.bymonthday=this.bymonthday,this.onChange())},e.prototype.weekposChange=function(e){this.multipleChoice(e,"bysetpos"),this.options.bysetpos=this.bysetpos,delete this.options.bymonthday,this.onChange()},e.prototype.multipleChoice=function(e,t){e.source.checked?this[t].indexOf(e.value)===-1&&this[t].push(e.value):this[t].indexOf(e.value)!==-1&&this[t].splice(this[t].indexOf(e.value),1)},e}();n([o.Input(),i("design:type",Object),i("design:paramtypes",[Object])],d.prototype,"RRuleStr",null),n([o.Output(),i("design:type",Object)],d.prototype,"RRuleStrChange",void 0),d=n([o.Component({selector:"app-rrule",template:r(813),styles:[r(725)]}),i("design:paramtypes",[])],d),t.RRuleComponent=d},557:function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),a=r(60),d=r(87),c=r(114),l=function(){function e(){this.isAdd=!0,this.isAdding=!1,this.action=new s.EventEmitter,this.unit=new c.Unit,this.ae=d.ActionEnum,this.formTitle="",this.addIsDisable=!0,this.updateIsDisable=!0,this.deleteIsDisable=!1}return e.prototype.ngOnInit=function(){var e=this;this.actionIsSuccess.subscribe(function(t){t===!0&&(e.isAdd===!0&&(e.unit.id=-1,e.unit.name="",e.unit.username="",e.unit.password="",e.unit.is_branch=null,e.unit.is_kitchen=null),e.disabilityStatus())},function(e){console.log(e)}),this.isAdd?(this.formTitle="New Unit",this.unit.id=-1,this.unit.name="",this.unit.username="",this.unit.password="",this.unit.is_branch=!1,this.unit.is_kitchen=null):(this.unit.is_branch=this.unitModel._unit.is_branch,this.unit.is_kitchen=this.unitModel._unit.is_kitchen,this.unit.id=this.unitModel._unit.id,this.unit.name=this.unitModel._unit.name,this.unit.username=this.unitModel._unit.username,this.unit.password="",this.unit.is_branch?this.formTitle=this.unit.name+" - Branch":this.formTitle=this.unit.name+" - Prep Unit",this.unitModel._unit.is_reporter&&(this.formTitle=this.unit.name+" - Reporter",this.unit.is_reporter=this.unitModel._unit.is_reporter,this.unit.is_branch=null))},e.prototype.disabilityStatus=function(){this.isAdd?this.addIsDisable=this.shouldDisableAddBtn():(this.deleteIsDisable=this.shouldDisableDeleteBtn(),this.updateIsDisable=this.shouldDisableUpdateBtn())},e.prototype.actionEmitter=function(e){var t={type:e,data:n({},this.unit)};this.unit.is_reporter&&(t.data.is_branch=!1),this.action.emit(t)},e.prototype.isCorrectFormData=function(e){return this.unit.is_reporter=!1,""!==this.unit.name&&""!==this.unit.username&&null===this.unit.is_branch&&null!==this.unit.is_kitchen?(this.unit.is_reporter=!0,!0):(e!==!0||""!==this.unit.password)&&(""!==this.unit.name&&""!==this.unit.username&&null!==this.unit.is_branch)},e.prototype.shouldDisableAddBtn=function(){return this.isAdding===!0||!this.isCorrectFormData(!0)},e.prototype.shouldDisableUpdateBtn=function(){return this.unitModel.waiting.updating===!0||(this.unitModel.isDifferent(this.unit)!==!0||!this.isCorrectFormData(!1))},e.prototype.shouldDisableDeleteBtn=function(){return this.unitModel.waiting.deleting===!0},e}();i([s.Input(),o("design:type",Object)],l.prototype,"isAdd",void 0),i([s.Input(),o("design:type",Object)],l.prototype,"isAdding",void 0),i([s.Input(),o("design:type",Object)],l.prototype,"unitModel",void 0),i([s.Input(),o("design:type","function"==typeof(u=void 0!==a.Observable&&a.Observable)&&u||Object)],l.prototype,"actionIsSuccess",void 0),i([s.Output(),o("design:type",Object)],l.prototype,"action",void 0),l=i([s.Component({selector:"app-sub-form",template:r(814),styles:[r(726)]}),o("design:paramtypes",[])],l),t.SubFormComponent=l;var u},558:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(60),a=r(279),d=r(87),c=r(114),l=r(42),u=r(35),p=function(){function e(e,t){this.restService=e,this.messageService=t,this.unitModels=[],this.isAdding=!1,this.actionIsSuccess=new s.BehaviorSubject(!1)}return e.prototype.ngOnInit=function(){var e=this;this.restService.get("unit").subscribe(function(t){e.unitModels=[];for(var r=0,n=t;r<n.length;r++){var i=n[r],o=new c.Unit;o.id=i.uid,o.name=i.name,o.username=i.username,o.password="",o.is_branch=i.is_branch,o.is_kitchen=i.is_kitchen,o.is_reporter=i.is_reporter;var s=new a.UnitModel(o);e.unitModels.push(s)}e.sortUnitModelList()},function(t){e.messageService.error(t),o.isDevMode()&&console.log(t)})},e.prototype.doClickedAction=function(e){var t=e.type,r=e.data;switch(this.disableEnable(r.id,t,!0),t){case d.ActionEnum.add:this.addUnit(r);break;case d.ActionEnum.delete:this.deleteUnit(r.id);break;case d.ActionEnum.update:this.updateUnit(r.id,r)}},e.prototype.addUnit=function(e){var t=this,r=e.name;this.restService.insert("unit",e).subscribe(function(n){e.id=n,e.password="";var i=new a.UnitModel(e);t.actionIsSuccess.next(!0),t.unitModels.push(i),t.sortUnitModelList(),t.disableEnable(e.id,d.ActionEnum.add,!1),t.actionIsSuccess.next(!1),t.messageService.message("'"+r+"' is added to units as a new "+(e.is_branch?"Branch":"Prep Unit"))},function(r){t.messageService.error(r),o.isDevMode()&&console.log(r),t.disableEnable(e.id,d.ActionEnum.add,!1)})},e.prototype.deleteUnit=function(e){var t=this;this.restService.delete("unit",e).subscribe(function(r){t.unitModels=t.unitModels.filter(function(t){return t._unit.id!==e}),t.messageService.message("Unit is deleted.")},function(r){t.messageService.error(r),o.isDevMode()&&console.log(r),t.disableEnable(e,d.ActionEnum.delete,!1)})},e.prototype.updateUnit=function(e,t){var r=this,n=this.unitModels.findIndex(function(t){return t._unit.id==e});this.restService.update("unit",e,this.unitModels[n].getDifferentValues(t)).subscribe(function(i){r.actionIsSuccess.next(!0),t.password="",r.unitModels[n].setUnit(t),r.sortUnitModelList(),r.disableEnable(e,d.ActionEnum.update,!1),r.messageService.message(t.name+" ("+(t.is_branch?"branch":"prep unit")+") is updated."),r.actionIsSuccess.next(!1)},function(t){r.messageService.error(t),o.isDevMode()&&console.log(t),r.disableEnable(e,d.ActionEnum.update,!1)})},e.prototype.disableEnable=function(e,t,r){var n=this.unitModels.find(function(t){return t._unit.id==e});switch(t){case d.ActionEnum.update:n.waiting.updating=r;break;case d.ActionEnum.delete:n.waiting.deleting=r;break;case d.ActionEnum.add:this.isAdding=r}},e.prototype.sortUnitModelList=function(){this.unitModels.sort(function(e,t){return e._unit.is_branch===!1&&t._unit.is_branch===!0?-1:e._unit.is_branch===!0&&t._unit.is_branch===!1?1:e._unit.name>t._unit.name?1:e._unit.name<t._unit.name?-1:0})},e}();p=n([o.Component({selector:"app-unit-form",template:r(815),styles:[r(727)]}),i("design:paramtypes",["function"==typeof(h=void 0!==l.RestService&&l.RestService)&&h||Object,"function"==typeof(m=void 0!==u.MessageService&&u.MessageService)&&m||Object])],p),t.UnitFormComponent=p;var h,m},559:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.environment={production:!0}},560:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(574),r(567),r(563),r(569),r(568),r(566),r(565),r(573),r(562),r(561),r(571),r(564),r(572),r(570),r(575),r(1079)},66:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(11),a=r(42),d=r(23),c=r(35),l=function(){function e(e,t,r){var n=this;this.restService=e,this.router=t,this.messageService=r,this.authStream=new s.Subject,this.user="",this.userType="",this.unitName="",this.auth$=this.authStream.asObservable(),this.originBeforeLogin="/",this.restService.call("validUser").subscribe(function(e){n.afterLogin(e),n.messageService.message("You are already logged in as "+n.user+".")},function(e){o.isDevMode()&&console.log(e),n.authStream.next(!1),n.router.navigate(["login"])})}return e.prototype.logIn=function(e,t){var r=this;this.restService.update("login",null,{username:e,password:t}).subscribe(function(e){setTimeout(function(){return r.logOff()},36e5),r.afterLogin(e),r.messageService.message(r.user+" logged in.")},function(e){r.authStream.next(!1),r.messageService.error(e),o.isDevMode()&&console.log(e)})},e.prototype.afterLogin=function(e){var t=e.json();this.user=t.user,this.unitName=t.name,this.userType=t.userType,this.isKitchen=t.isKitchen,this.isReporter=t.isReporter,this.unit_id=t.uid,this.authStream.next(!0);var r=this.originBeforeLogin;null!==r&&"/"!==r?"branch"===this.userType?r.indexOf("inventory")!==-1||r.indexOf("override")!==-1?this.router.navigate([r]):this.router.navigate(["inventory"]):"prep"===this.userType?r.indexOf("delivery")!==-1?this.router.navigate([r]):this.router.navigate(["delivery"]):"admin"===this.userType&&(r.indexOf("units")!==-1||r.indexOf("products")!==-1||r.indexOf("override")!==-1||r.indexOf("reports")!==-1?this.router.navigate([r]):this.router.navigate([""])):"branch"===this.userType?this.router.navigate(["inventory"]):"prep"===this.userType?this.router.navigate(["delivery"]):this.router.navigate(["/"])},e.prototype.logOff=function(){var e=this;this.restService.call("logout").subscribe(function(){e.messageService.message(e.user+" logged out."),e.user="",e.userType="",e.unitName="",e.authStream.next(!1),e.router.navigate(["login"])},function(t){e.messageService.error(t),o.isDevMode()&&console.log(t)})},e}();l=n([o.Injectable(),i("design:paramtypes",["function"==typeof(u=void 0!==a.RestService&&a.RestService)&&u||Object,"function"==typeof(p=void 0!==d.Router&&d.Router)&&p||Object,"function"==typeof(h=void 0!==c.MessageService&&c.MessageService)&&h||Object])],l),t.AuthService=l;var u,p,h},711:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,"@media (min-width:600px){#main{padding:20px}}@media (max-width:599px){#main{padding:0}}",""]),e.exports=e.exports.toString()},712:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,".numInput{max-width:100px;min-width:80px}.errorMessage{font-weight:700;color:darkred}",""]),e.exports=e.exports.toString()},713:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,".notEqualValues{background-color:#faebd7}.warnColoring{color:darkred}.zeroColoring{color:#ccc!important}.normalColoring{color:#000}.waiting{margin-top:60px!important;margin-bottom:60px!important;-ms-flex-line-pack:center!important;align-content:center!important}.waitingMessage{color:#fff;font-weight:700;text-align:center}.number{width:30px;background:#f8f8f8!important}.number,th{vertical-align:middle;font-weight:600;color:gray;text-align:center}th{background:hsla(0,0%,94%,.6)}td{vertical-align:middle!important;padding:1px!important;font-weight:300;font-size:100%;background:rgba(250,250,0,.04)}input,td{text-align:center}.name{text-align:left}.sum{font-weight:600;text-align:right}.alert-pink{color:#7f20cc;background-color:#d87ff3;border-color:#d1a5eb}.number-pink{color:#7f20cc;background:#d87ff3!important}.number-pink,.number-warning{width:30px;vertical-align:middle;font-weight:600;text-align:center}.number-warning{color:#8a6d3b;background:#fcf8e3!important}.number-success{color:#3c763d;background:#dff0d8!important}.number-info,.number-success{width:30px;vertical-align:middle;font-weight:600;text-align:center}.number-info{color:#31708f;background:#d9edf7!important}.number-danger{width:30px;vertical-align:middle;font-weight:600;color:#a94442;text-align:center;background:#f2dede!important}.alert-orange{background-color:#f39a7f}.alert-orange,.number-orange{color:#df4111;border-color:#e7b59e}.number-orange{width:30px;vertical-align:middle;font-weight:600;text-align:center;background:#f39a7f!important}",""]),e.exports=e.exports.toString()},714:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,"",""]),e.exports=e.exports.toString()},715:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,"",""]),e.exports=e.exports.toString()},716:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,".alert-pink{color:#7f20cc;background-color:#d87ff3;border-color:#d1a5eb}.alert-orange{color:#df4111;background-color:#f39a7f;border-color:#e7b59e}.warnColoring{color:red}.alert-custom{padding:0;margin-bottom:2px;border:1px solid transparent;border-radius:1px}.normalColoring{color:#000}.counted{background:#6d8b5f85}.packMoreThanMax{background:#e5ff0085}.counted td{border-color:#faebd6}.number-pink{color:#7f20cc;background:#d87ff3!important}.number-pink,.number-secondary{width:30px;vertical-align:middle;font-weight:600;text-align:center}.number-secondary{color:gray;background:#f8f8f8!important}.number-warning{color:#8a6d3b;background:#fcf8e3!important}.number-success,.number-warning{width:30px;vertical-align:middle;font-weight:600;text-align:center}.number-success{color:#3c763d;background:#dff0d8!important}.number-info{color:#31708f;background:#d9edf7!important}.number-danger,.number-info{width:30px;vertical-align:middle;font-weight:600;text-align:center}.number-danger{color:#a94442;background:#f2dede!important}.number-orange{border-color:#e7b59e;width:30px;color:#df4111;background:#f39a7f!important}.number-orange,th{vertical-align:middle;font-weight:600;text-align:center}th{color:gray}td,th{background:hsla(0,0%,94%,.6)}td{vertical-align:middle!important;padding:1px!important;font-weight:300;font-size:100%;color:#000;text-align:center}.name{text-align:left}input{text-align:center}.cdk-overlay-pane{max-width:none!important;width:auto!important}",""]),e.exports=e.exports.toString()},717:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,"",""]),e.exports=e.exports.toString()},718:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,"a.toolbar{color:#fff}a.toolbar:hover{color:brown}a.toolbar:visited{color:#fff}a.toolbar:active,a.toolbar:after{color:#faebd7}",""]),e.exports=e.exports.toString()},719:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,".repContainer{padding-top:30px}.repContainer div{padding:5px 0}",""]),e.exports=e.exports.toString()},720:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,"@media screen{#printpage,#printpage *{display:none}}@media print{body *{visibility:hidden;background:transparent}#printpage,#printpage *,body *{-webkit-print-color-adjust:exact!important}#printpage,#printpage *{visibility:visible}#printpage{position:absolute;left:0;top:0}}",""]),e.exports=e.exports.toString()},721:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,".OuterDivStyle{background-color:#607d8b;width:700px;padding:10px;border-radius:7px;text-align:left;margin-left:3px}.InnerDivStyle{background-color:#fff;width:90%;padding:10px;margin-left:2%}.SpanStyle{font-size:x-large;font-weight:700;margin-left:7px}",""]),e.exports=e.exports.toString()},722:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,"input{min-width:100px}.ButtonStyle{margin-left:12px;margin-top:20px;margin-bottom:5px;border-radius:5px;border-width:5px;border-color:#728653;background-color:#607d8b;font-weight:700}md-card{border:2px solid #607d8b;direction:ltr}.numInput{max-width:100px;min-width:80px}",""]),e.exports=e.exports.toString()},723:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,"",""]),e.exports=e.exports.toString()},724:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,"",""]),e.exports=e.exports.toString()},725:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,".h{visibility:hidden}.v{visibility:visible}",""]),e.exports=e.exports.toString()},726:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,".InputStyle{width:35%;margin-top:8px;border:1.5px solid #728653;text-indent:2%}.DivStyle{width:90%;border:2px solid #728653;direction:ltr}.TopSpanStyle{margin-top:8px}.SpanStyle,.TopSpanStyle{width:85px;display:inline-block;text-align:right;font-size:small;font-weight:700}.SpanStyle{margin-top:4px}.ButtonStyle{margin-left:12px;margin-top:20px;margin-bottom:5px;border-radius:5px;border-width:5px;border-color:#728653;background-color:#607d8b;font-weight:700}.RadioButtonStyle{margin-left:20px}md-card{border:2px solid #607d8b;direction:ltr}",""]),e.exports=e.exports.toString()},727:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,".OuterDivStyle{background-color:#607d8b;width:700px;padding:10px;border-radius:7px;text-align:left;margin-left:3px}.InnerDivStyle{background-color:#fff;width:90%;padding:10px;margin-left:2%}.SpanStyle{font-size:x-large;font-weight:700;margin-left:7px}",""]),e.exports=e.exports.toString()},731:function(e,t,r){function n(e){return r(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./af":317,"./af.js":317,"./ar":323,"./ar-dz":318,"./ar-dz.js":318,"./ar-ly":319,"./ar-ly.js":319,"./ar-ma":320,"./ar-ma.js":320,"./ar-sa":321,"./ar-sa.js":321,"./ar-tn":322,"./ar-tn.js":322,"./ar.js":323,"./az":324,"./az.js":324,"./be":325,"./be.js":325,"./bg":326,"./bg.js":326,"./bn":327,"./bn.js":327,"./bo":328,"./bo.js":328,"./br":329,"./br.js":329,"./bs":330,"./bs.js":330,"./ca":331,"./ca.js":331,"./cs":332,"./cs.js":332,"./cv":333,"./cv.js":333,"./cy":334,"./cy.js":334,"./da":335,"./da.js":335,"./de":337,"./de-at":336,"./de-at.js":336,"./de.js":337,"./dv":338,"./dv.js":338,"./el":339,"./el.js":339,"./en-au":340,"./en-au.js":340,"./en-ca":341,"./en-ca.js":341,"./en-gb":342,"./en-gb.js":342,"./en-ie":343,"./en-ie.js":343,"./en-nz":344,"./en-nz.js":344,"./eo":345,"./eo.js":345,"./es":347,"./es-do":346,"./es-do.js":346,"./es.js":347,"./et":348,"./et.js":348,"./eu":349,"./eu.js":349,"./fa":350,"./fa.js":350,"./fi":351,"./fi.js":351,"./fo":352,"./fo.js":352,"./fr":355,"./fr-ca":353,"./fr-ca.js":353,"./fr-ch":354,"./fr-ch.js":354,"./fr.js":355,"./fy":356,"./fy.js":356,"./gd":357,"./gd.js":357,"./gl":358,"./gl.js":358,"./he":359,"./he.js":359,"./hi":360,"./hi.js":360,"./hr":361,"./hr.js":361,"./hu":362,"./hu.js":362,"./hy-am":363,"./hy-am.js":363,"./id":364,"./id.js":364,"./is":365,"./is.js":365,"./it":366,"./it.js":366,"./ja":367,"./ja.js":367,"./jv":368,"./jv.js":368,"./ka":369,"./ka.js":369,"./kk":370,"./kk.js":370,"./km":371,"./km.js":371,"./ko":372,"./ko.js":372,"./ky":373,"./ky.js":373,"./lb":374,"./lb.js":374,"./lo":375,"./lo.js":375,"./lt":376,"./lt.js":376,"./lv":377,"./lv.js":377,"./me":378,"./me.js":378,"./mi":379,"./mi.js":379,"./mk":380,"./mk.js":380,"./ml":381,"./ml.js":381,"./mr":382,"./mr.js":382,"./ms":384,"./ms-my":383,"./ms-my.js":383,"./ms.js":384,"./my":385,"./my.js":385,"./nb":386,"./nb.js":386,"./ne":387,"./ne.js":387,"./nl":389,"./nl-be":388,"./nl-be.js":388,"./nl.js":389,"./nn":390,"./nn.js":390,"./pa-in":391,"./pa-in.js":391,"./pl":392,"./pl.js":392,"./pt":394,"./pt-br":393,"./pt-br.js":393,"./pt.js":394,"./ro":395,"./ro.js":395,"./ru":396,"./ru.js":396,"./se":397,"./se.js":397,"./si":398,"./si.js":398,"./sk":399,"./sk.js":399,"./sl":400,"./sl.js":400,"./sq":401,"./sq.js":401,"./sr":403,"./sr-cyrl":402,"./sr-cyrl.js":402,"./sr.js":403,"./ss":404,"./ss.js":404,"./sv":405,"./sv.js":405,"./sw":406,"./sw.js":406,"./ta":407,"./ta.js":407,"./te":408,"./te.js":408,"./tet":409,"./tet.js":409,"./th":410,"./th.js":410,"./tl-ph":411,"./tl-ph.js":411,"./tlh":412,"./tlh.js":412,"./tr":413,"./tr.js":413,"./tzl":414,"./tzl.js":414,"./tzm":416,"./tzm-latn":415,"./tzm-latn.js":415,"./tzm.js":416,"./uk":417,"./uk.js":417,"./uz":418,"./uz.js":418,"./vi":419,"./vi.js":419,"./x-pseudo":420,"./x-pseudo.js":420,"./yo":421,"./yo.js":421,"./zh-cn":422,"./zh-cn.js":422,"./zh-hk":423,"./zh-hk.js":423,"./zh-tw":424,"./zh-tw.js":424};n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=731},799:function(e,t){e.exports='<p-blockUI [blocked]="blocked">\r\n  <div style="position:absolute;top:25%;left:40%;text-align: center;width:20%;height:200px">\r\n    <i class="fa fa-circle-o-notch fa-spin fa-5x" style="position:absolute;top:25%;left:50%"></i>\r\n  </div>\r\n</p-blockUI>\r\n\r\n<app-navbar></app-navbar>\r\n<div *ngIf="showError" style="width:100%;background:darkred;color:white"><i class="fa fa-close" style="padding:5px" (click)="closeError()"></i> {{error}}</div>\r\n<div class="flex-container"\r\n     fxLayout="row" fxLayout.xs="column"\r\n     fxLayoutAlign="center center" fxLayoutAlign.xs="start start">\r\n  <div class="flex-item" fxFlex="10" fxFlex.lg="0" fxFlex.md="0" fxFlex.sm="0" fxFlex.xs="0"></div>\r\n  <div class="flex-item" fxFlex="90" fxFlex.lg="100" fxFlex.md="100" fxFlex.sm="100" fxFlex.xs="100" id="main"><router-outlet></router-outlet></div>\r\n  <div class="flex-item" fxFlex="10" fxFlex.lg="0" fxFlex.md="0" fxFlex.sm="0" fxFlex.xs="0"></div>\r\n</div>\r\n<div class="hidden-mobile" style="font-weight: 100;width:100%; font-size: 70%; text-align: center"><a style="text-decoration: none;color: black" href="https://goo.gl/forms/4STw85rDSzk8F2832" target="_blank">Report a bug</a></div>\r\n\r\n'},800:function(e,t){e.exports='<span *ngIf="!isOverridden">Inventory Rules By Default:</span>\r\n<span *ngIf="isOverridden">Inventory Rules Overrides:</span>\r\n<br/>\r\n<md-card>\r\n  <div class="errorMessage">{{showMessage}}</div>\r\n  <div class="flex-container" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="center top" fxLayoutAlign.xs="start start">\r\n    <div class="flex-item" style="margin: 5px;" fxFlex="30%">\r\n      <div class="flex-container" fxLayout="column" fxLayoutAlign="left top">\r\n        <div class="flex-item" style="margin-left: 5px;" fxFlex="20%">\r\n          <md-card-content>\r\n            <md-input-container>\r\n              <input mdInput min="0" class="numInput minQty" type="number" placeholder="Min Qty" [(ngModel)]="minQty" (ngModelChange)="minChange()" id="minQty" min="0" maxlength="5"/>\r\n            </md-input-container>\r\n            <md-input-container>\r\n              <input mdInput min="0" class="numInput maxQty" type="number" placeholder="Max Qty" [(ngModel)]="maxQty" (ngModelChange)="maxChange()" id="maxQty" maxlength="5"/>\r\n            </md-input-container>\r\n          </md-card-content>\r\n        </div>\r\n        <div class="flex-item" fxFlex="80%">\r\n          <md-card-content>\r\n            <span>Coefficients</span>\r\n            <md-card>\r\n              <md-card-content>\r\n                <div>\r\n                  <br/>\r\n                  <div *ngFor="let day of days">\r\n                    <md-input-container>\r\n\r\n                      <input mdInput min="0" class="numInput" type="number" placeholder="{{day}}" [(ngModel)]="coefficients[day]" (ngModelChange)="coeffChange()" id="{{day}}"/>\r\n                    </md-input-container>\r\n                  </div>\r\n                </div>\r\n              </md-card-content>\r\n            </md-card>\r\n          </md-card-content>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="flex-item" style="margin: 5px;" fxFlex="70%">\r\n      <md-card-content>\r\n        <span>Inventory Counting Recursion</span>\r\n        <md-card>\r\n          <md-card-content>\r\n            <app-rrule [RRuleStr]="recursionRule" (RRuleStrChange)="recurChange($event)"></app-rrule>\r\n          </md-card-content>\r\n        </md-card>\r\n      </md-card-content>\r\n    </div>\r\n  </div>\r\n</md-card>\r\n'},801:function(e,t){e.exports='<div class="row" style="margin: 20px;" *ngIf="!isReporter">\r\n    <div class="col-md-6 alert alert-success">Products should be counted today</div> <!-- ref_type_id = null -->\r\n    <div class="col-md-6 alert alert-warning">Products counted but not delivered</div> <!-- ref_type_id = 2-->\r\n    <div class="col-md-6 alert alert-pink">Products not counted but delivered and finalized</div>\r\n    <div class="col-md-6 alert alert-info">Products should be counted in earlier days</div> <!-- ref_type_id = 4 -->\r\n    <div class="col-md-6 alert alert-danger">Products with deliveries less than min stock</div> <!-- ref_type_id = 5 -->\r\n    <div class="col-md-6 alert alert-orange">New Products You\'ve Added to Stock</div>\r\n</div>\r\n\r\n<md-card class="outerCard">\r\n    <md-card-title class="cardTitle">{{unitName}} Delivery</md-card-title>\r\n    <!-- show and hide button -->\r\n    <div>\r\n        <md-card class="mat-card" style="margin-bottom:10px;padding:5px; border-radius:25px;"\r\n                 [style.width]="showCountedProduct ? \'100%\' : \'450px\'">\r\n            <div class="row" *ngIf="selectedIndex !== 0">\r\n                <div class="col-md-12">\r\n                    <label for="show-zero-delivery" style="padding:0 10px">Zero deliveries:</label>\r\n                    <md-radio-group [(ngModel)]="showZeroDelivery" (change)="changeFilter()" id="show-zero-delivery">\r\n                        <md-radio-button style="padding: 0 10px;" [value]="false">Hide</md-radio-button>\r\n                        <md-radio-button style="padding: 0 10px;" [value]="true">Show</md-radio-button>\r\n                    </md-radio-group>\r\n                </div>\r\n            </div>\r\n            <div *ngIf="selectedIndex === 0">\r\n                <div>\r\n                    <!--<label for="show-zero-delivery" style="padding:0 10px">Counted</label>-->\r\n                    <md-radio-group [(ngModel)]="showCountedProduct" (change)="showAllOrCounted($event)"\r\n                                    id="show-zero-delivery">\r\n                        <md-radio-button style="padding: 0 10px;" [value]="false">All Branches</md-radio-button>\r\n                        <md-radio-button style="padding: 0 10px;" [value]="true">Only Counted Branches</md-radio-button>\r\n                    </md-radio-group>\r\n                    <div style="display: inline-block; font-size: 13px; padding: 0 10px;">\r\n                    <span *ngFor="let cbn of counted_branch_names; let i = index">\r\n                            {{cbn}}{{(i !== counted_branch_names.length - 1) ? \' ,\' : \'\'}}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </md-card>\r\n    </div>\r\n    <!-- date picker -->\r\n    <material-datepicker [date]="selectedDate" (onSelect)="dateChanged($event)">\r\n    </material-datepicker>\r\n    <!-- md-tab-group -->\r\n    <md-tab-group *ngIf="dataIsReady" class="materialTab" [class.zeroHeight]="isReporter" [(selectedIndex)]="selectedIndex"\r\n                  (selectChange)="tabChanged()">\r\n        <md-tab label="All"\r\n                *ngIf="overallDeliveryModel._deliveries !== undefined">\r\n            <!-- aggregate table -->\r\n            <md-card class="innerCard">\r\n                <md-card-title>To Do: Delivery</md-card-title>\r\n                <md-card-content>\r\n                    <md-card style="overflow: auto;">\r\n                        <md-card-content>\r\n                            <table class="table table-striped table-responsive">\r\n                                <thead>\r\n                                <tr>\r\n                                    <th>#</th>\r\n                                    <th>Code</th>\r\n                                    <th>Product</th>\r\n                                    <th>Real Delivery</th>\r\n                                    <th>Min Delivery</th>\r\n                                    <th>Max Delivery</th>\r\n                                    <th>Min Required</th>\r\n                                    <th>Max Stock</th>\r\n                                    <th>Current Stock</th>\r\n                                </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                <tr *ngFor="let delItem of tab_all.deliveries;let i = index">\r\n                                    <td>{{i + 1}}</td>\r\n                                    <!-- productCode -->\r\n                                    <td>{{delItem.code}}</td>\r\n                                    <!-- productName -->\r\n                                    <td>{{delItem.name}}</td>\r\n                                    <!-- realDelivery -->\r\n                                    <td>{{delItem.total_real_delivery}}</td>\r\n                                    <!-- minDelivery -->\r\n                                    <td *ngIf="delItem.total_min_delivery !== null">{{delItem.total_min_delivery}}</td>\r\n                                    <td *ngIf="delItem.total_min_delivery === null">\r\n                                        <i class="fa fa-question warnColoring" aria-hidden="true"></i>\r\n                                    </td>\r\n                                    <!-- maxDelivery -->\r\n                                    <td *ngIf="delItem.total_max_delivery !== null">{{delItem.total_max_delivery}}</td>\r\n                                    <td *ngIf="delItem.total_max_delivery === null">\r\n                                        <i class="fa fa-question warnColoring" aria-hidden="true"></i>\r\n                                    </td>\r\n                                    <!-- min -->\r\n                                    <td>{{delItem.total_min}}</td>\r\n                                    <!-- max -->\r\n                                    <td>{{delItem.total_max}}</td>\r\n                                    <!-- stock -->\r\n                                    <td *ngIf="delItem.total_stock !== null">{{delItem.total_stock}}</td>\r\n                                    <td *ngIf="delItem.total_stock === null">\r\n                                        <i class="fa fa-question warnColoring" aria-hidden="true"></i>\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <!-- sum title -->\r\n                                    <td colspan="3" style="font-weight: bold;">Sum</td>\r\n                                    <!-- sum real delivery  -->\r\n                                    <td>{{tab_all[\'sum_total_real_delivery\']}}</td>\r\n                                    <!-- sum min delivery  -->\r\n                                    <td *ngIf="tab_all[\'sum_total_min_delivery\'] !== null">\r\n                                        {{tab_all[\'sum_total_min_delivery\']}}\r\n                                    </td>\r\n                                    <td *ngIf="tab_all[\'sum_total_min_delivery\'] === null"><i\r\n                                            class="fa fa-question warnColoring"\r\n                                            aria-hidden="true"></i></td>\r\n                                    <!-- sum max delivery  -->\r\n                                    <td *ngIf="tab_all[\'sum_total_max_delivery\'] !== null">\r\n                                        {{tab_all[\'sum_total_max_delivery\']}}\r\n                                    </td>\r\n                                    <td *ngIf="tab_all[\'sum_total_max_delivery\'] === null"><i\r\n                                            class="fa fa-question warnColoring"\r\n                                            aria-hidden="true"></i></td>\r\n                                    <!-- sum min  -->\r\n                                    <td>{{tab_all[\'sum_total_min\']}}</td>\r\n                                    <!-- sum max  -->\r\n                                    <td>{{tab_all[\'sum_total_max\']}}</td>\r\n                                    <!-- sum stock  -->\r\n                                    <td *ngIf="tab_all[\'sum_total_stock\'] !== null">{{tab_all[\'sum_total_stock\']}}\r\n                                    </td>\r\n                                    <td *ngIf="tab_all[\'sum_total_stock\'] === null"><i\r\n                                            class="fa fa-question warnColoring"\r\n                                            aria-hidden="true"></i></td>\r\n                                </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </md-card-content>\r\n                    </md-card>\r\n                </md-card-content>\r\n                <md-card-content>\r\n                    <button md-raised-button class="ButtonStyle" *ngIf="isToday"\r\n                            [(disabled)]="!isReporter && overallDeliveryModel._shouldDisabled"\r\n                            (click)="printDelivery(overallDeliveryModel)">Print\r\n                    </button>\r\n                </md-card-content>\r\n            </md-card>\r\n        </md-tab>\r\n        <!-- receiver table -->\r\n        <!-- this block html code that includes (receivers), just show for main prep and main kitchen -->\r\n        <!-- and this code hide, when reporter is login -->\r\n        <div *ngIf="!isReporter">\r\n            <md-tab *ngFor="let rcv of receivers" class="delayedTab">\r\n                <ng-template md-tab-label>\r\n                    <i *ngIf="rcv.warn === \'count\'" class="fa fa-exclamation warnColoring" aria-hidden="true"></i>\r\n                    {{rcv.name}}\r\n                </ng-template>\r\n                <ng-template md-tab-label *ngIf="rcv.warn === \'login\'">\r\n                    <i class="fa fa-exclamation warnColoring" aria-hidden="true"></i>\r\n                    <i class="fa fa-exclamation warnColoring" aria-hidden="true"></i> {{rcv.name}}\r\n                </ng-template>\r\n                <ng-template md-tab-label *ngIf="rcv.warn === \'count\'">\r\n                    <i class="fa fa-exclamation warnColoring" aria-hidden="true"></i> {{rcv.name}}\r\n                </ng-template>\r\n                <ng-template md-tab-label *ngIf="rcv.warn === \'no\'">\r\n                    {{rcv.name}}\r\n                </ng-template>\r\n                <md-card class="innerCard"\r\n                         *ngIf="!isWaiting[rcv.name] && receiversDeliveryModels[rcv.name] !== undefined && receiversDeliveryModels[rcv.name] !== null">\r\n                    <md-card-title>To Do: Delivery</md-card-title>\r\n                    <md-card-content>\r\n                        <md-card style="min-width: 600px !important; overflow-x: auto;">\r\n                            <md-card-content>\r\n                                <table class="table table-striped">\r\n                                    <thead style="width: 100%">\r\n                                    <tr>\r\n                                        <th style="width: 30px">#</th>\r\n                                        <th>Code</th>\r\n                                        <th>Product</th>\r\n                                        <th>Real Delivery</th>\r\n                                        <th>Min Delivery</th>\r\n                                        <th>Max Delivery</th>\r\n                                        <th>Min Required</th>\r\n                                        <th>Max Stock</th>\r\n                                        <th>Current Stock</th>\r\n                                        <th>Last Count</th>\r\n                                        <th>Last Count Date</th>\r\n                                        <th>Days to Next Counting</th>\r\n                                    </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                    <tr *ngFor="let delItem of filteredBranchDeliveries[rcv.name];let i = index"\r\n                                        [ngClass]="[delItem.realDelivery ? countToday(delItem.stockDate) ? \'normalColoring\' : \'warnColoring\' : \'zeroColoring\']">\r\n                                        <td style="width: 40px" class="buttonItem" *ngIf="delItem.state !== \'added\'"\r\n                                            [ngClass]="[\r\n                  delItem.ref_type_id === delivery_types.IS_NEW_PRODUCT ? \'number-orange\' : \'\',\r\n                  delItem.ref_type_id === delivery_types.COUNTING_TODAY ? \'number-success\' : \'\',\r\n                  delItem.ref_type_id === delivery_types.COUNTED_BUT_NOT_DELIVERED ? \'number-warning\' : \'\',\r\n                  delItem.ref_type_id === delivery_types.NOT_COUNTED_BUT_DELIVERED_AND_FINALIZED ? \'number-pink\' : \'\',\r\n                  delItem.ref_type_id === delivery_types.NOT_COUNTED_AND_NOT_DELIVERED ? \'number-info\' : \'\',\r\n                  delItem.ref_type_id === delivery_types.DELIVERED_LESS_THAN_MIN_STOCK ? \'number-danger\' : \'\'\r\n                  ]">{{i+1}}\r\n                                        </td>\r\n                                        <td style="width: 40px" class="buttonItem"\r\n                                            *ngIf="delItem.id === null && !delItem.ref_type_id">\r\n                                            <button md-mini-fab (click)="removeDeliveryItem(delItem)">\r\n                                                <i class="fa fa-times" aria-hidden="true"></i>\r\n                                            </button>\r\n                                        </td>\r\n                                        <td class="buttonItem"\r\n                                            *ngIf="delItem.id !== null && !delItem.ref_type_id && delItem.state === \'added\'">\r\n                                            <md-chip-list>\r\n                                                <md-chip color="primary" selected="true">Added</md-chip>\r\n                                            </md-chip-list>\r\n                                        </td>\r\n                                        <td class="codeItem">\r\n                                            {{delItem.productCode}}\r\n                                        </td>\r\n                                        <td class="nameItem name"\r\n                                            [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\r\n                                            {{delItem.productName}}\r\n                                        </td>\r\n                                        <td class="inputItem">\r\n                                            <md-input-container>\r\n                                                <input mdInput type="number" min="0"\r\n                                                       [ngClass]="[(rcv.warn ||((delItem.minDelivery > delItem.realDelivery || delItem.maxDelivery < delItem.realDelivery ) && isToday)) ? \'notEqualValues\' : \'equalValues\']"\r\n                                                       [(disabled)]="!isToday" placeholder="Real Delivery"\r\n                                                       [ngModel]="delItem.realDelivery"\r\n                                                       (change)="checkRealDeliveryValue($event, delItem)"/>\r\n                                            </md-input-container>\r\n                                        </td>\r\n                                        <td class="column" *ngIf="delItem.stock !== null && delItem.id !== null">\r\n                                            {{delItem.minDelivery}}\r\n                                        </td>\r\n                                        <td class="column" *ngIf="delItem.stock === null || delItem.id === null">\r\n                                            <i class="fa fa-question warnColoring" aria-hidden="true"></i>\r\n                                        </td>\r\n                                        <td class="column" *ngIf="delItem.stock !== null && delItem.id !== null">\r\n                                            {{delItem.maxDelivery}}\r\n                                        </td>\r\n                                        <td class="column" *ngIf="delItem.stock === null || delItem.id === null">\r\n                                            <i class="fa fa-question warnColoring" aria-hidden="true"></i>\r\n                                        </td>\r\n                                        <td class="column">\r\n                                            {{delItem.min}}\r\n                                        </td>\r\n                                        <td class="column">\r\n                                            {{delItem.max}}\r\n                                        </td>\r\n                                        <td class="column" *ngIf="delItem.stock !== null && delItem.id !== null">\r\n                                            {{delItem.stock}}\r\n                                        </td>\r\n                                        <td class="column" *ngIf="delItem.stock === null || delItem.id === null">\r\n                                            <i class="fa fa-question warnColoring" aria-hidden="true"></i>\r\n                                        </td>\r\n                                        <td class="column">\r\n                                            {{delItem.oldCount}}\r\n                                        </td>\r\n                                        <td style="min-width: 80px !important;" class="column">\r\n                                            {{delItem.stockDate}}\r\n                                        </td>\r\n                                        <td *ngIf="delItem.untilNextCountingDay!==null" class="column">\r\n                                            {{delItem.untilNextCountingDay}}\r\n                                        </td>\r\n                                        <td *ngIf="delItem.untilNextCountingDay===null" class="column"><i\r\n                                                class="fa fa-question warnColoring" aria-hidden="true"></i></td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td [style.width]="thereIsProactiveItem ? \'unset\' : \'30px\'" class="number"></td>\r\n                                        <td class="sum" colspan="3">Sum</td>\r\n                                        <td class="inputItem">{{receiversSumDeliveries[rcv.name].realDelivery}}</td>\r\n                                        <td class="column" *ngIf="rcv.warn === \'no\'">\r\n                                            {{receiversSumDeliveries[rcv.name].minDelivery}}\r\n                                        </td>\r\n                                        <td class="column" *ngIf="rcv.warn === \'count\' || rcv.warn === \'unknown\'">\r\n                                            <i class="fa fa-question warnColoring" aria-hidden="true"></i>\r\n                                        </td>\r\n                                        <td class="column" *ngIf="rcv.warn === \'no\'">\r\n                                            {{receiversSumDeliveries[rcv.name].maxDelivery}}\r\n                                        </td>\r\n                                        <td class="column" *ngIf="rcv.warn === \'count\' || rcv.warn === \'unknown\'">\r\n                                            <i class="fa fa-question warnColoring" aria-hidden="true"></i>\r\n                                        </td>\r\n                                        <td class="column">{{receiversSumDeliveries[rcv.name].min}}</td>\r\n                                        <td class="column">{{receiversSumDeliveries[rcv.name].max}}</td>\r\n                                        <td class="column" *ngIf="rcv.warn === \'no\'">\r\n                                            {{receiversSumDeliveries[rcv.name].stock}}\r\n                                        </td>\r\n                                        <td class="column" *ngIf="rcv.warn === \'count\' || rcv.warn === \'unknown\'">\r\n                                            <i class="fa fa-question warnColoring" aria-hidden="true"></i>\r\n                                        </td>\r\n                                        <td style="min-width: 80px !important;" class="column">-</td>\r\n                                        <td>-</td>\r\n                                    </tr>\r\n                                    <tr\r\n                                            *ngIf="isToday && !receiversDeliveryModels[rcv.name]._shouldDisabled && productsList[rcv.name] !== undefined && productsList[rcv.name].length > 0">\r\n                                        <td class="buttonItem"></td>\r\n                                        <td class="codeItem" colspan="2">\r\n                                            <md-input-container>\r\n                                                <input mdInput type="text"\r\n                                                       [(disabled)]="receiversDeliveryModels[rcv.name]._shouldDisabled"\r\n                                                       class="pnc" placeholder="Product name/code"\r\n                                                       [mdAutocomplete]="auto"\r\n                                                       [formControl]="productNameCodeCtrl" (focus)="showProductList()"\r\n                                                       (blur)="clearInput($event)"/>\r\n                                                <md-autocomplete #auto="mdAutocomplete">\r\n                                                    <md-option *ngFor="let nameCode of filteredNameCode | async"\r\n                                                               [value]="nameCode">\r\n                                                        {{nameCode}}\r\n                                                    </md-option>\r\n                                                </md-autocomplete>\r\n                                            </md-input-container>\r\n                                        </td>\r\n                                        <td class="nameItem"></td>\r\n                                        <td class="inputItem"></td>\r\n                                        <td class="column"></td>\r\n                                        <td class="column"></td>\r\n                                        <td class="column"></td>\r\n                                        <td class="column"></td>\r\n                                        <td style="min-width: 80px !important;" class="column"></td>\r\n                                    </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                            </md-card-content>\r\n                        </md-card>\r\n                    </md-card-content>\r\n                    <md-card-content>\r\n                        <!-- *ngIf="isToday" -->\r\n                        <!-- [disabled]="!receiversDeliveryModels[rcv.name]._isSubmitted || receiversDeliveryModels[rcv.name]._deliveries.length <= 0" -->\r\n                        <button md-raised-button class="ButtonStyle"\r\n                               \r\n                                (click)="printDelivery(receiversDeliveryModels[rcv.name])">Print\r\n                        </button>\r\n                        <button md-raised-button class="ButtonStyle"\r\n                                [disabled]="receiversDeliveryModels[rcv.name]._isPrinted"\r\n                                *ngIf="isToday" (click)="submitDelivery(receiversDeliveryModels[rcv.name])">Submit\r\n                        </button>\r\n                    </md-card-content>\r\n                </md-card>\r\n            </md-tab>\r\n        </div>\r\n\r\n    </md-tab-group>\r\n    <!-- loading -->\r\n    <div *ngIf="!dataIsReady">\r\n        <div class="flex-container waiting" fxLayout="row" fxLayoutAlign="center center">\r\n            <div class="flex-item" fxFlex="80">\r\n                <div class="flex-container" fxLayout="column" fxLayoutAlign="center center">\r\n                    <div class="flex-item" fxFlex="80">\r\n                        <i style="color: white !important;" class="fa fa-circle-o-notch fa-spin fa-3x fa-fw"></i>\r\n                        <span class="sr-only">Loading...</span>\r\n                    </div>\r\n                    <div class="flex-item" fxFlex="20">\r\n                        <br/>\r\n                        <span class="waitingMessage">Please wait until we fetch and process delivery data</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</md-card>'},802:function(e,t){e.exports="\r\n"},803:function(e,t){e.exports='<md-card>\r\n  <md-card-header>\r\n    <md-card-title>\r\n      <h3> WARNING!</h3>\r\n    </md-card-title>\r\n  </md-card-header>\r\n  <md-card-content>\r\n    <p>{{message}}</p>\r\n  </md-card-content>\r\n  <md-card-actions>\r\n    <button md-raised-button color="primary" (click)="dialogRef.close(true)">Confirm</button>\r\n    <button md-raised-button color="accent" (click)="dialogRef.close(false)">Cancel</button>\r\n  </md-card-actions>\r\n</md-card>\r\n'},804:function(e,t){e.exports='<!-- products categories -->\r\n<div class="row" style="margin: 20px;">\r\n  <div class="col-md-6 alert alert-success">Products should be counted today</div> <!-- ref_type_id = null -->\r\n  <div class="col-md-6 alert alert-warning">Products counted but not delivered</div> <!-- ref_type_id = 2-->\r\n  <div class="col-md-6 alert alert-pink">Products not counted but delivered and finalized</div> <!-- ref_type_id = 3 -->\r\n  <div class="col-md-6 alert alert-info">Products should be counted in earlier days</div> <!-- ref_type_id = 4 -->\r\n  <div class="col-md-6 alert alert-danger">Products with deliveries less than min stock</div> <!-- ref_type_id = 5 -->\r\n  <div class="col-md-6 alert alert-orange">New Products You\'ve Added to Stock</div>\r\n</div>\r\n<md-card style="background-color: #607D8B; border-radius: 7px; text-align: left; margin: 10px;">\r\n  <md-card-title class="cardTitle hidden-mobile">{{unitName}} Inventory</md-card-title>\r\n  <md-card class="innerCard">\r\n\r\n    <md-card-title class="hidden-mobile">To Do: Inventory Takings</md-card-title>\r\n    <md-card-header class="hidden-mobile">\r\n      <material-datepicker [date]="selectedDate" (onSelect)="dateChanged($event)">\r\n      </material-datepicker>\r\n    </md-card-header>\r\n    <md-card-content>\r\n      <md-card style="overflow: auto;">\r\n        <md-card-content>\r\n          <table class="table table-responsive">\r\n            <thead style="width:100%">\r\n              <tr>\r\n                <th style="width:30px">#</th>\r\n                <th [ngStyle]="{\'width.px\': noButton ? 0 : 24}">&nbsp;</th>\r\n                <th class="name">Product</th>\r\n                <th>Code</th>\r\n                <th>Unopened Packs</th>\r\n                <th class="hidden-mobile">Last Count</th>\r\n                <th>Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody class="scrollable"\r\n              *ngIf="inventoryModel !== null && inventoryModel !== undefined && inventoryModel._inventories.length > 0">\r\n              <tr *ngFor="let invItem of inventoryModel._inventories;let i = index" [@itemState]="invItem.state"\r\n                [ngClass]="[invItem.unopenedPack ? \'counted\': \'\',\r\n                            (!invItem.shouldCountToday && invItem.shouldIncluded) ? \'warnColoring\' : \'normalColoring\',\r\n                            invItem.unopenedPack > invItem.stockMax ? \'packMoreThanMax\' : \'\'\r\n                            ]">\r\n                <!-- position 1 -->\r\n                <td [ngClass]="[\r\n                    invItem.ref_type_id === delivery_types.IS_NEW_PRODUCT ? \'number-orange\' : \'\',\r\n                    invItem.ref_type_id === delivery_types.COUNTING_TODAY ? \'number-success\' : \'\',\r\n                    invItem.ref_type_id === delivery_types.COUNTED_BUT_NOT_DELIVERED ? \'number-warning\' : \'\',\r\n                    invItem.ref_type_id === delivery_types.NOT_COUNTED_BUT_DELIVERED_AND_FINALIZED ? \'number-pink\' : \'\',\r\n                    invItem.ref_type_id === delivery_types.NOT_COUNTED_AND_NOT_DELIVERED ? \'number-info\' : \'\',\r\n                    invItem.ref_type_id === delivery_types.DELIVERED_LESS_THAN_MIN_STOCK ? \'number-danger\' : \'\']">\r\n                  {{i+1}}</td>\r\n                <!-- <td [ngStyle]="{\'width.px\': noButton ? 0 : 24}" *ngIf="invItem.shouldIncluded">&nbsp;</td> -->\r\n                <!-- product name 2 -->\r\n                <td class="name"> {{invItem.productName}} </td>\r\n                <!-- product code 3-->\r\n                <td> {{invItem.productCode}} </td>\r\n                <!-- product un open packed 4-->\r\n                <td>\r\n                  <md-input-container>\r\n                    <input mdInput name="unopenedPack" type="number" [(ngModel)]="invItem.unopenedPack" placeholder="Packs"\r\n                      (ngModelChange)="checkDisability(invItem)" [disabled]="!isSameDates || invItem.is_disabled"\r\n                      min="0" />\r\n                  </md-input-container>\r\n                </td>\r\n                <!-- last date, counted product 5 -->\r\n                <td *ngIf="invItem.lastCount !== null" class="hidden-mobile"\r\n                  [ngClass]="[(this.isSameDates && !invItem.shouldCountToday && invItem.shouldIncluded) ? \'warnColoring\' : \'normalColoring\']">\r\n                  {{invItem.lastCount | date: \'d MMM yy\'}}\r\n                </td>\r\n                <td *ngIf="invItem.lastCount === null">\r\n                  -\r\n                </td>\r\n                <!-- remove new product added into list 6-->\r\n                <ng-container\r\n                  *ngIf="!invItem.shouldIncluded || invItem.ref_type_id === delivery_types.IS_NEW_PRODUCT && isSameDates; else elseTemplate">\r\n                  <td>\r\n                    <button tabindex="-1" md-mini-fab (click)="removeInventoryItem(invItem)">\r\n                      <i class="fa fa-times" aria-hidden="true"></i>\r\n                    </button>\r\n                  </td>\r\n                </ng-container>\r\n                <ng-template #elseTemplate>\r\n                  <td>-</td>\r\n                </ng-template>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n\r\n        </md-card-content>\r\n        <!-- new product select -->\r\n        <md-card-content *ngIf="filteredNameCode && isSameDates && (isFirstTimeFillsForm || !isUpdateMode)">\r\n          <md-input-container style="width: 100%;">\r\n            <input mdInput type="text" placeholder="Product name/code" [mdAutocomplete]="auto" style="text-align: left;"\r\n              [formControl]="productNameCodeCtrl" #autoNameCode (focus)="showProductList()" />\r\n            <md-autocomplete #auto="mdAutocomplete">\r\n              <md-option *ngFor="let nameCode of filteredNameCode | async" [value]="nameCode" style="width: 100%;"\r\n                (onSelect)="productSelected(nameCode)">\r\n                {{nameCode}}\r\n              </md-option>\r\n            </md-autocomplete>\r\n          </md-input-container>\r\n        </md-card-content>\r\n      </md-card>\r\n    </md-card-content>\r\n    <md-card-content>\r\n      <button md-raised-button class="ButtonStyle" *ngIf="isSameDates"  [disabled]="submitDisability()"\r\n        (click)="isUpdateMode ? enableEditMode() : submitInventories()">{{isUpdateMode ? \'Update\' : \'Submit\'}}</button>\r\n    </md-card-content>\r\n  </md-card>\r\n</md-card>'},805:function(e,t){e.exports='<md-card style="margin:16px !important; padding: 24px 16px !important;">\r\n  <md-card-title>Login</md-card-title>\r\n  <md-card-content>\r\n    <md-input-container>\r\n      <input mdInput focus placeholder="Username" [(ngModel)]="username" (change)="onChange()">\r\n    </md-input-container>\r\n    <md-input-container>\r\n      <input mdInput placeholder="Password" type="password" [(ngModel)]="password" (change)="onChange()" (keydown)="ifEnterLogin($event)">\r\n    </md-input-container>\r\n  </md-card-content>\r\n  <md-card-actions>\r\n    <button md-mini-fab [disabled]="!loginEnabled" (click)="userLogin()" color="primary" title="Login">\r\n      <md-icon fontSet="fa" fontIcon="fa-arrow-right"></md-icon>\r\n    </button>\r\n  </md-card-actions>\r\n</md-card>\r\n'},806:function(e,t){e.exports='<md-toolbar color="primary" style="font-weight:200;font-size:100%; overflow: hidden;max-width:100vw">\r\n  <span><a style="font-size:120%" class="toolbar" [routerLink]="[\'\']">Siirgista Internal Delivery</a></span>\r\n  <div style="margin: 20px;">\r\n    {{currentDate | date:\'yyyy-MM-dd HH-mm-ss\'}}\r\n  </div>\r\n  <span class="fill-remaining-space"></span>\r\n  <span *ngIf="!auth"><a  class="toolbar" [routerLink]="[\'login\']"><span class="fa fa-sign-in"></span> Login</a></span>\r\n  <span *ngIf="auth"><a  class="toolbar" (click)="logout()">{{user}} <i class="fa fa-sign-out"></i> Logout</a></span>\r\n  <span *ngIf="auth" class="hidden-mobile" style="margin-left:20px">{{remainedTime}}</span>\r\n</md-toolbar>\r\n<nav *ngIf="auth" class="hidden-mobile" md-tab-nav-bar>\r\n  <a md-tab-link *ngIf="isAdmin" [routerLink]="[\'units\']" routerLinkActive #unitsLink="routerLinkActive" [active]="unitsLink.isActive">Units</a>\r\n  <a md-tab-link *ngIf="isAdmin" [routerLink]="[\'products\']" routerLinkActive #productsLink="routerLinkActive" [active]="productsLink.isActive">Products</a>\r\n  <a md-tab-link *ngIf="isAdmin" [routerLink]="[\'override\']" routerLinkActive #overrideLink="routerLinkActive" [active]="overrideLink.isActive">Override Rules</a>\r\n  <a md-tab-link *ngIf="isBranch" [routerLink]="[\'inventory\']" routerLinkActive #inventoryLink="routerLinkActive" [active]="inventoryLink.isActive">Inventory</a>\r\n  <a md-tab-link *ngIf="isPrep" [routerLink]="[\'delivery\']" routerLinkActive #deliveryLink="routerLinkActive" [active]="deliveryLink.isActive">Delivery</a>\r\n  <a md-tab-link *ngIf="isAdmin" [routerLink]="[\'reports\']" routerLinkActive #reportsLink="routerLinkActive" [active]="reportsLink.isActive">Reports</a>\r\n</nav>\r\n'},807:function(e,t){e.exports='<md-card style="background-color: #607D8B; border-radius: 7px; text-align: left; margin: 10px;">\r\n  <md-card-title class="cardTitle">Inventory Rules Overrides</md-card-title>\r\n  <div *ngIf="!isAdmin">\r\n    <md-card\r\n      [ngClass]="[(isFiltered && filteredProductModel._product.isOverridden) ? \'innerCardOverride\' : \'innerCard\']">\r\n      <md-card-content>\r\n        <md-input-container style="width: 100%;">\r\n          <input mdInput focus type="text" class="pnc" placeholder="Product name/code"\r\n                 [mdAutocomplete]="auto" [formControl]="productModelCtrl" #autoNameCode/>\r\n          <md-autocomplete #auto="mdAutocomplete">\r\n            <md-option *ngFor="let nameCode of filteredNameCode | async" [value]="nameCode">\r\n              {{nameCode}}\r\n            </md-option>\r\n          </md-autocomplete>\r\n        </md-input-container>\r\n      </md-card-content>\r\n      <app-counting-rule *ngIf="isFiltered"\r\n                         [isOverridden]="true"\r\n                         [(minQty)]="filteredProductModel._product.minQty"\r\n                         [(maxQty)]="filteredProductModel._product.maxQty"\r\n                         [(coefficients)]="filteredProductModel._product.coefficients"\r\n                         [(recursionRule)]="filteredProductModel._product.countingRecursion"\r\n                         (hasError)="countingRuleErrorHandler($event)"\r\n                         (changed)="checkDisabilityStatus()">\r\n      </app-counting-rule>\r\n    </md-card>\r\n  </div>\r\n  <div>\r\n    <md-card class="mat-card" style="width:210px; margin-bottom:10px;padding:5px; border-radius:25px;">\r\n      <md-radio-group [(ngModel)]="is_kitchen" (change)="changeFilter()">\r\n        <md-radio-button style="padding: 0 10px;" [value]="false">Front</md-radio-button>\r\n        <md-radio-button style="padding: 0 10px;" [value]="true">Kitchen</md-radio-button>\r\n      </md-radio-group>\r\n    </md-card>\r\n  </div>\r\n  <md-tab-group *ngIf="isAdmin" class="materialTab" [(selectedIndex)]="selectedIndex" (selectChange)="changedTab()">\r\n    <md-tab *ngFor="let branch of branchList" label="{{branch.name}}">\r\n      <md-card\r\n        [ngClass]="[(isFiltered && filteredProductModel._product.isOverridden) ? \'innerCardOverride\' : \'innerCard\']">\r\n        <md-card-content>\r\n          <md-input-container style="width: 100%;">\r\n            <input mdInput type="text" class="pnc" placeholder="Product name/code"\r\n                   [mdAutocomplete]="auto" [formControl]="productModelCtrl"\r\n                   (focus)="showProductList($event)" #autoNameCode/>\r\n            <md-autocomplete #auto="mdAutocomplete">\r\n              <md-option *ngFor="let nameCode of filteredNameCode | async" [value]="nameCode">\r\n                {{nameCode}}\r\n              </md-option>\r\n            </md-autocomplete>\r\n          </md-input-container>\r\n        </md-card-content>\r\n        <app-counting-rule *ngIf="isFiltered"\r\n                           [isOverridden]="true"\r\n                           [(minQty)]="filteredProductModel._product.minQty"\r\n                           [(maxQty)]="filteredProductModel._product.maxQty"\r\n                           [(coefficients)]="filteredProductModel._product.coefficients"\r\n                           [(recursionRule)]="filteredProductModel._product.countingRecursion"\r\n                           (hasError)="countingRuleErrorHandler($event)"\r\n                           (changed)="checkDisabilityStatus()">\r\n        </app-counting-rule>\r\n      </md-card>\r\n    </md-tab>\r\n  </md-tab-group>\r\n  <br/>\r\n  <md-card-content>\r\n    <button md-raised-button *ngIf="isFiltered && !filteredProductModel._product.isOverridden"\r\n            class="ButtonStyle addBtn" (click)="doClickedAction(ae.add)" [(disabled)]="addIsDisable">Add\r\n    </button>\r\n    <button md-raised-button *ngIf="isFiltered && filteredProductModel._product.isOverridden"\r\n            class="ButtonStyle updateBtn" (click)="doClickedAction(ae.update)" [(disabled)]="updateIsDisable">Update\r\n    </button>\r\n    <button md-raised-button *ngIf="isFiltered && filteredProductModel._product.isOverridden"\r\n            class="ButtonStyle deleteBtn" (click)="doClickedAction(ae.delete)" [(disabled)]="deleteIsDisable">Delete\r\n    </button>\r\n  </md-card-content>\r\n</md-card>\r\n'},808:function(e,t){e.exports='<div class="flex-container" fxLayout="row" fxLayoutAlign="center center">\r\n  <div class="flex-item title" fxFlex="80">Siirgista Bros - {{unitName_title}}</div>\r\n  <div style="float: right;" class="flex-item subtitle" fxFlex="20">{{currentDate | date: \'dd MMMM yyyy\'}}</div>\r\n</div>\r\n<div class="title" style="font-weight: bold">{{unitName_subTitle}} Delivery Note</div>\r\n\r\n<div *ngIf="!isOverallPrint">\r\n  <table class="table">\r\n    <thead class="titleBox">\r\n      <tr>\r\n      <td>#</td>\r\n      <td>Product Code</td>\r\n      <td>Product Name</td>\r\n      <td>Real Delivery</td>\r\n      <td>Current Stock</td>\r\n      <td>Stock After Delivery</td>\r\n      <td>Min Delivery</td>\r\n      <td>Days to Next Counting</td>\r\n    </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor="let item of itemList;let i=index">\r\n      <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{i + 1}}</td>\r\n      <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.productCode}}</td>\r\n      <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.productName}}</td>\r\n      <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.realDelivery}}</td>\r\n      <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.currentStock===null ? \'NA\' : item.currentStock}}</td>\r\n      <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.stockAfterDelivery}}</td>\r\n      <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.minDelivery}}</td>\r\n      <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.daysToNext}}</td>\r\n    </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n<div *ngIf="isOverallPrint">\r\n  <table class="table">\r\n    <thead class="titleBox">\r\n      <tr>\r\n        <td>#</td>\r\n        <td>Product Code</td>\r\n        <td>Product Name</td>\r\n        <td>Total Delivery</td>\r\n        <td *ngFor="let rcvName of receivers">{{rcvName}}</td>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor="let item of itemList;let i = index">\r\n        <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{i + 1}}</td>\r\n        <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.productCode}}</td>\r\n        <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.productName}}</td>\r\n        <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'">{{item.totalDelivery}}</td>\r\n        <td class="box" [style.background]="i%2 ? \'silver\' : \'unset\'" *ngFor="let rcvName of receivers">{{item[rcvName]}}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n<br/>\r\n<!--<div style="color: darkred" *ngIf="showWarningMessage">-->\r\n  <!--<div>-->\r\n    <!--<label>Warning: Hitting print button will finalised delivery numbers.</label>-->\r\n  <!--</div>-->\r\n  <!--<div>-->\r\n    <!--<label>Please make sure all values are correct</label>-->\r\n  <!--</div>-->\r\n<!--</div>-->\r\n<br/>\r\n<div>\r\n  <button md-raised-button class="ButtonStyle" (click)="dialogRef.close(\'print\')">Print</button>\r\n  <button md-raised-button class="ButtonStyle" (click)="dialogRef.close(\'cancel\')">Cancel</button>\r\n</div>\r\n'},809:function(e,t){e.exports='<md-card style="background-color: #607D8B; border-radius: 7px; text-align: left; margin: 10px;">\r\n <md-card-title class="cardTitle">Products</md-card-title>\r\n  <md-tab-group class="materialTab" [selectedIndex]="selectedIndex">\r\n    <md-tab label="Add">\r\n      <md-card class="innerCard">\r\n        <app-product-sub-form [isAdd]="true" [isAdding]="isAdding" [actionIsSuccess]="actionIsSuccess" (action)="doClickedAction($event)"></app-product-sub-form>\r\n      </md-card>\r\n    </md-tab>\r\n    <md-tab label="Modify">\r\n      <md-card class="innerCard">\r\n        <md-card-content>\r\n          <md-grid-list cols="3" rowHeight="50px">\r\n            <md-grid-tile colspan="2" style="margin-right: 5px;">\r\n              <md-input-container style="width: 100%;">\r\n                <input mdInput type="text" class="pnc" placeholder="Product name"\r\n                       [mdAutocomplete]="autoName" [formControl]="productModelCtrlName"\r\n                       #autoNameInput (focus)="showProductList($event, \'name\')"/>\r\n                <md-autocomplete #autoName="mdAutocomplete">\r\n                  <md-option *ngFor="let name of filteredName | async" [value]="name">\r\n                    {{name}}\r\n                  </md-option>\r\n                </md-autocomplete>\r\n              </md-input-container>\r\n            </md-grid-tile>\r\n            <md-grid-tile colspan="1" style="margin-left: 5px;">\r\n              <md-input-container style="width: 100%">\r\n                <input mdInput type="text" class="pnc" placeholder="Product code"\r\n                       [mdAutocomplete]="autoCode" [formControl]="productModelCtrlCode"\r\n                       #autoCodeInput (focus)="showProductList($event, \'code\')"/>\r\n                <md-autocomplete #autoCode="mdAutocomplete">\r\n                  <md-option *ngFor="let code of filteredCode | async" [value]="code">\r\n                    {{code}}\r\n                  </md-option>\r\n                </md-autocomplete>\r\n              </md-input-container>\r\n            </md-grid-tile>\r\n          </md-grid-list>\r\n        </md-card-content>\r\n        <app-product-sub-form *ngIf="isFiltered" [isAdd]="false" [actionIsSuccess]="actionIsSuccess" [productModel]="filteredProductModel" (action)="doClickedAction($event)"></app-product-sub-form>\r\n      </md-card>\r\n    </md-tab>\r\n  </md-tab-group>\r\n</md-card>\r\n'},810:function(e,t){e.exports='<span class="FormTitleStyle">{{formTitle}}</span>\r\n<md-card>\r\n  <div class="flex-container" fxLayout="column" fxLayoutAlign="left top">\r\n    <div class="flex-item" fxFlex="20%">\r\n      <md-card-content>\r\n        <md-input-container>\r\n          <input mdInput type="text" class="name" placeholder="Name" [(ngModel)]="product.name" (keyup)="disabilityStatus()"/>\r\n        </md-input-container>\r\n        <md-input-container>\r\n          <input mdInput type="text" class="code" placeholder="Code" [(ngModel)]="product.code" (keyup)="disabilityStatus()"/>\r\n        </md-input-container>\r\n        <md-input-container>\r\n          <input mdInput type="number" class="size" placeholder="size" [(ngModel)]="product.size" (keyup)="disabilityStatus()"/>\r\n        </md-input-container>\r\n        <md-select placeholder="Measuring Units" class="measuringUnit" [(ngModel)]="product.measuringUnit" (change)="disabilityStatus()">\r\n          <md-option *ngFor="let mu of measuringUnits" [value]="mu">{{mu}}</md-option>\r\n        </md-select>\r\n        <md-input-container>\r\n          <input mdInput type="number" class="size" placeholder="Price (£)" [(ngModel)]="product.price" (keyup)="disabilityStatus()"/>\r\n        </md-input-container>\r\n        <div>\r\n          <span>Preparation Unit</span>\r\n          <md-radio-group class="prepUnitId" [(ngModel)]="product.prep_unit_id" (change)="disabilityStatus()">\r\n            <div *ngFor="let pu of prepUnits">\r\n              <md-radio-button [value]="pu.id">{{pu.name}}</md-radio-button>\r\n              <br/>\r\n            </div>\r\n          </md-radio-group>\r\n        </div>\r\n      </md-card-content>\r\n    </div>\r\n    <div class="flex-item" fxFlex="70%">\r\n      <md-card-content *ngIf="hasCountingRuleError">\r\n        <label class="errorMessage">{{countingRuleError}}</label>\r\n      </md-card-content>\r\n      <md-card-content>\r\n        <app-counting-rule [(coefficients)]="product.coefficients"\r\n                           [(minQty)]="product.minQty"\r\n                           [(maxQty)]="product.maxQty"\r\n                           [(recursionRule)]="product.countingRecursion"\r\n                           (hasError)="countingRuleErrorHandler($event)"></app-counting-rule>\r\n      </md-card-content>\r\n    </div>\r\n    <div class="flex-item" fxFlex="10%">\r\n      <md-card-content>\r\n        <button md-raised-button *ngIf="isAdd" class="ButtonStyle addBtn" (click)="actionEmitter(ae.add)" [(disabled)]="addIsDisable" id="addBtn">Add</button>\r\n        <button md-raised-button *ngIf="!isAdd" class="ButtonStyle updateBtn" (click)="actionEmitter(ae.update)" [(disabled)]="updateIsDisable" id="updateBtn">Update</button>\r\n        <button md-raised-button *ngIf="!isAdd" class="ButtonStyle deleteBtn" (click)="actionEmitter(ae.delete)" [(disabled)]= "deleteIsDisable" id="deleteBtn">Delete</button>\r\n      </md-card-content>\r\n    </div>\r\n  </div>\r\n</md-card>\r\n<br/>\r\n'},811:function(e,t){e.exports='<md-card class="outerCard">\r\n  <md-card-title class="cardTitle">Reports</md-card-title>\r\n  <md-card class="innerCard" style="margin: 15px">\r\n    <div>\r\n      <md-card-title style="font-size:125%;font-weight: 600">Delivery Report</md-card-title>\r\n    </div>\r\n    <md-card-content class="mat-card">\r\n    <div fxLayout.xs="column" fxLayout.sm="column" fxLayout="row" style="padding-top:30px">\r\n      <div fxFlex="50">\r\n        <md-select placeholder="Branch" style="width:300px" [(ngModel)]="branchIdForDeliveryReport">\r\n          <md-option *ngFor="let branch of branches" [value]="branch.id">{{branch.name}}</md-option>\r\n        </md-select>\r\n      </div>\r\n\r\n      <div fxFlex="25" style="padding:5px 0">\r\n        <label for="start-range-input">Start of period:</label>\r\n        <material-datepicker class="flex-item" placeholder="Start of period" [(date)]="startDate" id="start-range-input" (dateChange)="checkDisabilityStatus()">\r\n        </material-datepicker>\r\n      </div>\r\n      <div fxFlex="25"  style="padding:5px 0">\r\n        <label for="start-range-input">End of period:</label>\r\n        <material-datepicker class="flex-item" placeholder="End of period" [(date)]="endDate" id="end-range-input" (dateChange)="checkDisabilityStatus()">\r\n        </material-datepicker>\r\n      </div>\r\n    </div>\r\n    </md-card-content>\r\n    <md-card-actions style="text-align: right">\r\n        <button md-raised-button (click)="prepareDeliveryReport()" [disabled]="deliveryReportBtnDisabled">\r\n          <i class="fa fa-download" aria-hidden="true"></i> Download\r\n        </button>\r\n    </md-card-actions>\r\n  </md-card>\r\n  <md-card class="innerCard" style="margin: 15px">\r\n    <md-card-title style="font-size:125%;font-weight: 600">Products Report</md-card-title>\r\n    <md-card-content class="mat-card">\r\n    <div fxLayout.xs="column" fxLayout.sm="column" fxLayout="row" style="padding-top:30px">\r\n      <div fxFlex="50">\r\n        <md-select placeholder="Branch" style="width:300px" [(ngModel)]="branchIdForProductReport">\r\n          <md-option *ngFor="let branch of branches" [value]="branch.id">{{branch.name}}</md-option>\r\n        </md-select>\r\n      </div>\r\n    </div>\r\n      </md-card-content>\r\n      <md-card-actions style="text-align: right">\r\n        <button md-raised-button (click)="loadDataForProductsReport()">\r\n          <i class="fa fa-download" aria-hidden="true"></i> Download\r\n        </button>\r\n      </md-card-actions>\r\n  </md-card>\r\n  <md-card class="innerCard" style="margin: 15px">\r\n    <md-card-title style="font-size:125%;font-weight: 600">Inventory Counting Report</md-card-title>\r\n    <md-card-content  class="mat-card">\r\n    <div fxLayout.xs="column" fxLayout.sm="column" fxLayout="row" style="padding-top:30px">\r\n      <div fxFlex="50">\r\n        <md-select placeholder="Branch" style="width:300px" [(ngModel)]="branchIdForInventoryReport" (change)="checkDisabilityStatus()">\r\n          <md-option *ngFor="let branch of branchesWithoutAllOption" [value]="branch.id">{{branch.name}}</md-option>\r\n        </md-select>\r\n      </div>\r\n    </div>\r\n    </md-card-content>\r\n      <md-card-actions style="text-align: right">\r\n        <button md-raised-button (click)="prepareInventoryCountingReport()" [disabled]="inventoryReportBtnDisabled">\r\n          <i class="fa fa-download" aria-hidden="true"></i> Download\r\n        </button>\r\n      </md-card-actions>\r\n  </md-card>\r\n</md-card>\r\n'},812:function(e,t){e.exports='<md-card>\r\n  <md-card-title>\r\n  Days {{reverse?\'remained to month-end\':\'past from month\'}}\r\n  </md-card-title>\r\n  <md-card-content>\r\n    <md-button-toggle-group *ngFor="let row of calDays;let i=index" multiple [vertical]="true">\r\n      <md-button-toggle *ngFor="let day of row" [value]="day" (change)="monthDaysChange($event)" [checked]="days.indexOf(reverse?day+1:day)!==-1">{{day}}</md-button-toggle>\r\n    </md-button-toggle-group>\r\n  </md-card-content>\r\n</md-card>\r\n'},813:function(e,t){e.exports='<md-input-container>\r\n  <input mdInput type="number" placeholder="Interval" [(ngModel)]="options.interval" (ngModelChange)="onChange()"\r\n         min="1">\r\n  <md-hint>{{options.freq ? \'Every\' : \'Never\'}} {{options.freq && options.interval>1?options.interval:\'\'}}\r\n    {{freqsName[freqsConst.indexOf(options.freq)]}}{{options.interval>1?\'s\':\'\'}}\r\n  </md-hint>\r\n</md-input-container><br/>\r\n<md-button-toggle-group [(ngModel)]="freq" [vertical]="true" (ngModelChange)="onChange()">\r\n  <md-button-toggle *ngFor="let f of freqs;let i = index;" [value]="freqsConst[i]">\r\n    {{f}}\r\n  </md-button-toggle>\r\n</md-button-toggle-group>\r\n<span *ngIf="showMonthOptions">\r\n<md-button-toggle-group [(ngModel)]="monthlyInputMode" [vertical]="true" (ngModelChange)="onMonthlyInputModeChange($event)">\r\n  <md-button-toggle [value]="\'week\'">\r\n    By Weekdays\r\n  </md-button-toggle>\r\n  <md-button-toggle [value]="\'month\'">\r\n    By Month Days\r\n  </md-button-toggle>\r\n</md-button-toggle-group>\r\n   <span *ngIf="monthlyInputMode===\'month\'">\r\n<md-button-toggle-group multiple [vertical]="true">\r\n  <md-button-toggle value="past" (change)="monthDaysPastOrRemainedChange($event)"\r\n                    [checked]="monthDaysOption.indexOf(\'past\')!==-1">\r\n    Days Past\r\n  </md-button-toggle>\r\n  <md-button-toggle value="remained" (change)="monthDaysPastOrRemainedChange($event)"\r\n                    [checked]="monthDaysOption.indexOf(\'remained\')!==-1">\r\n    Days Remained\r\n  </md-button-toggle>\r\n</md-button-toggle-group>\r\n<app-monthday *ngIf="showMonthDaysPast" [days]="monthDaysPast" (daysChange)="monthDaysPastChange($event)"></app-monthday>\r\n<app-monthday *ngIf="showMonthDaysRemained" [reverse]="true" [days]="monthDaysRemained"\r\n              (daysChange)="monthDaysRemainedChange($event)"></app-monthday>\r\n</span>\r\n<md-button-toggle-group *ngIf="monthlyInputMode===\'week\'" multiple [vertical]="true">\r\n  <md-button-toggle *ngFor="let pos of weekpos;let i=index" [value]="pos" [checked]="bysetpos.indexOf(pos)!==-1"\r\n                    (change)="weekposChange($event)">{{weekposName[i]}}</md-button-toggle>\r\n</md-button-toggle-group>\r\n  </span>\r\n<md-button-toggle-group *ngIf="showWeekdays" multiple [vertical]="true">\r\n  <md-button-toggle *ngFor="let weekday of weekdays;let i = index;" [value]="weekdaysConst[i]"\r\n                    [checked]="byweekday.indexOf(weekdaysConst[i])!==-1" (change)="byweekdayChange($event)">\r\n    {{weekday}}\r\n  </md-button-toggle>\r\n</md-button-toggle-group>\r\n<h4>Next occurrences</h4>\r\n<pre>{{text}}</pre>\r\n'},814:function(e,t){e.exports='<span class="FormTitleStyle">{{formTitle}}</span>\r\n<md-card>\r\n  <md-radio-group class="RadioButtonStyle" [(ngModel)]="unit.is_branch" id="isBranch" (change)="disabilityStatus()">\r\n    <md-radio-button [value]="true">Branch</md-radio-button>\r\n    <md-radio-button [value]="false">Prep Unit</md-radio-button>\r\n    <md-radio-button [value]="null">Reporter</md-radio-button>\r\n  </md-radio-group>\r\n  <br>\r\n  <md-radio-group *ngIf="unit.is_branch !== null && unit.is_branch" class="RadioButtonStyle" [(ngModel)]="unit.is_kitchen" id="isKitchen" (change)="disabilityStatus()">\r\n    <md-radio-button [value]="false">Front</md-radio-button>\r\n    <md-radio-button [value]="true">Kitchen</md-radio-button>\r\n  </md-radio-group>\r\n  <md-radio-group *ngIf="unit.is_branch !== null &&!unit.is_branch" class="RadioButtonStyle" [(ngModel)]="unit.is_kitchen" id="isKitchen2" (change)="disabilityStatus()">\r\n    <md-radio-button [value]="false">Main Depot</md-radio-button>\r\n    <md-radio-button [value]="true">Prep Kitchen</md-radio-button>\r\n  </md-radio-group>\r\n  <md-radio-group *ngIf="unit.is_branch === null" class="RadioButtonStyle" [(ngModel)]="unit.is_kitchen" id="isKitchen2" (change)="disabilityStatus()">\r\n    <md-radio-button [value]="false">Main Depot</md-radio-button>\r\n    <md-radio-button [value]="true">Prep Kitchen</md-radio-button>\r\n  </md-radio-group>\r\n  <br>\r\n  <md-input-container>\r\n    <input mdInput placeholder="Unit Name" type="text" (keyup)="disabilityStatus()" [(ngModel)]="unit.name" class="name"/>\r\n  </md-input-container>\r\n  <md-input-container>\r\n\r\n    <input mdInput autocomplete="off" placeholder="Admin Username" type="text" (keyup)="disabilityStatus()" [(ngModel)]="unit.username" class="username"/>\r\n  </md-input-container>\r\n  <br>\r\n  <md-input-container >\r\n    <input mdInput autocomplete="off" placeholder="Admin Password" type="password" (keyup)="disabilityStatus()" [(ngModel)]="unit.password" class="password"/>\r\n  </md-input-container>\r\n  <br>\r\n    <button md-raised-button *ngIf="isAdd" class="ButtonStyle" (click)="actionEmitter(ae.add)" [(disabled)]="addIsDisable" class="addBtn">Add</button>\r\n    <button md-raised-button *ngIf="!isAdd" class="ButtonStyle" (click)="actionEmitter(ae.update)" [(disabled)]="updateIsDisable" class="updateBtn">Update</button>\r\n    <button md-raised-button *ngIf="!isAdd" class="ButtonStyle" (click)="actionEmitter(ae.delete)" [(disabled)]= "deleteIsDisable" class="deleteBtn">Delete</button>\r\n</md-card>\r\n'},815:function(e,t){e.exports='<md-card class="outerCard">\r\n  <md-card-title class="cardTitle">Branches and Preparation Units</md-card-title>\r\n  <md-card class="innerCard">\r\n    <app-sub-form [isAdd]="true" [isAdding]="isAdding" [actionIsSuccess]="actionIsSuccess" (action)="doClickedAction($event)"></app-sub-form>\r\n    <app-sub-form *ngFor="let um of unitModels" [isAdd]="false" [actionIsSuccess]="actionIsSuccess" [unitModel]="um" (action)="doClickedAction($event)"></app-sub-form>\r\n  </md-card>\r\n</md-card>\r\n'},87:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.add=0]="add",e[e.update=1]="update",e[e.delete=2]="delete"}(t.ActionEnum||(t.ActionEnum={}))}},[1080]);