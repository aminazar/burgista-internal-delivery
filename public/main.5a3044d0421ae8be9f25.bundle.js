webpackJsonp([0,3],{1150:function(e,t,n){t=e.exports=n(29)(),t.push([e.i,"",""]),e.exports=e.exports.toString()},1151:function(e,t,n){t=e.exports=n(29)(),t.push([e.i,".numInput{max-width:100px;min-width:80px}.errorMessage{font-weight:700;color:darkred}",""]),e.exports=e.exports.toString()},1152:function(e,t,n){t=e.exports=n(29)(),t.push([e.i,".notEqualValues{background-color:#faebd7}.warnColoring{color:darkred}.normalColoring{color:#000}.waiting{margin-top:60px!important;margin-bottom:60px!important;-ms-flex-line-pack:center!important;align-content:center!important}.waitingMessage{color:#fff;font-weight:700;text-align:center}",""]),e.exports=e.exports.toString()},1153:function(e,t,n){t=e.exports=n(29)(),t.push([e.i,"",""]),e.exports=e.exports.toString()},1154:function(e,t,n){t=e.exports=n(29)(),t.push([e.i,".warnColoring{color:red}.normalColoring{color:#000}",""]),e.exports=e.exports.toString()},1155:function(e,t,n){t=e.exports=n(29)(),t.push([e.i,"",""]),e.exports=e.exports.toString()},1156:function(e,t,n){t=e.exports=n(29)(),t.push([e.i,"a.toolbar{color:#fff}a.toolbar:hover{color:brown}a.toolbar:visited{color:#fff}a.toolbar:active,a.toolbar:after{text-weight:bold;color:#faebd7}",""]),e.exports=e.exports.toString()},1157:function(e,t,n){t=e.exports=n(29)(),t.push([e.i,"",""]),e.exports=e.exports.toString()},1158:function(e,t,n){t=e.exports=n(29)(),t.push([e.i,"@media screen{#printpage,#printpage *{display:none}}@media print{body *{visibility:hidden;background:transparent}#printpage,#printpage *,body *{-webkit-print-color-adjust:exact!important}#printpage,#printpage *{visibility:visible}#printpage{position:absolute;left:0;top:0}}",""]),e.exports=e.exports.toString()},1159:function(e,t,n){t=e.exports=n(29)(),t.push([e.i,".OuterDivStyle{background-color:#607d8b;width:700px;padding:10px;border-radius:7px;text-align:left;margin-left:3px}.InnerDivStyle{background-color:#fff;width:90%;padding:10px;margin-left:2%}.SpanStyle{font-size:x-large;font-weight:700;margin-left:7px}",""]),e.exports=e.exports.toString()},1160:function(e,t,n){t=e.exports=n(29)(),t.push([e.i,"input{min-width:100px}.ButtonStyle{margin-left:12px;margin-top:20px;margin-bottom:5px;border-radius:5px;border-width:5px;border-color:#728653;background-color:#607d8b;font-weight:700}md-card{border:2px solid #607d8b;direction:ltr}.numInput{max-width:100px;min-width:80px}",""]),e.exports=e.exports.toString()},1161:function(e,t,n){t=e.exports=n(29)(),t.push([e.i,"",""]),e.exports=e.exports.toString()},1162:function(e,t,n){t=e.exports=n(29)(),t.push([e.i,"",""]),e.exports=e.exports.toString()},1163:function(e,t,n){t=e.exports=n(29)(),t.push([e.i,".h{visibility:hidden}.v{visibility:visible}",""]),e.exports=e.exports.toString()},1164:function(e,t,n){t=e.exports=n(29)(),t.push([e.i,".InputStyle{width:35%;margin-top:8px;border:1.5px solid #728653;text-indent:2%}.DivStyle{width:90%;border:2px solid #728653;direction:ltr}.TopSpanStyle{margin-top:8px}.SpanStyle,.TopSpanStyle{width:85px;display:inline-block;text-align:right;font-size:small;font-weight:700}.SpanStyle{margin-top:4px}.ButtonStyle{margin-left:12px;margin-top:20px;margin-bottom:5px;border-radius:5px;border-width:5px;border-color:#728653;background-color:#607d8b;font-weight:700}.RadioButtonStyle{margin-left:20px}md-card{border:2px solid #607d8b;direction:ltr}",""]),e.exports=e.exports.toString()},1165:function(e,t,n){t=e.exports=n(29)(),t.push([e.i,".OuterDivStyle{background-color:#607d8b;width:700px;padding:10px;border-radius:7px;text-align:left;margin-left:3px}.InnerDivStyle{background-color:#fff;width:90%;padding:10px;margin-left:2%}.SpanStyle{font-size:x-large;font-weight:700;margin-left:7px}",""]),e.exports=e.exports.toString()},1169:function(e,t,n){function i(e){return n(o(e))}function o(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./af":568,"./af.js":568,"./ar":575,"./ar-dz":569,"./ar-dz.js":569,"./ar-kw":570,"./ar-kw.js":570,"./ar-ly":571,"./ar-ly.js":571,"./ar-ma":572,"./ar-ma.js":572,"./ar-sa":573,"./ar-sa.js":573,"./ar-tn":574,"./ar-tn.js":574,"./ar.js":575,"./az":576,"./az.js":576,"./be":577,"./be.js":577,"./bg":578,"./bg.js":578,"./bm":579,"./bm.js":579,"./bn":580,"./bn.js":580,"./bo":581,"./bo.js":581,"./br":582,"./br.js":582,"./bs":583,"./bs.js":583,"./ca":584,"./ca.js":584,"./cs":585,"./cs.js":585,"./cv":586,"./cv.js":586,"./cy":587,"./cy.js":587,"./da":588,"./da.js":588,"./de":591,"./de-at":589,"./de-at.js":589,"./de-ch":590,"./de-ch.js":590,"./de.js":591,"./dv":592,"./dv.js":592,"./el":593,"./el.js":593,"./en-au":594,"./en-au.js":594,"./en-ca":595,"./en-ca.js":595,"./en-gb":596,"./en-gb.js":596,"./en-ie":597,"./en-ie.js":597,"./en-il":598,"./en-il.js":598,"./en-nz":599,"./en-nz.js":599,"./eo":600,"./eo.js":600,"./es":603,"./es-do":601,"./es-do.js":601,"./es-us":602,"./es-us.js":602,"./es.js":603,"./et":604,"./et.js":604,"./eu":605,"./eu.js":605,"./fa":606,"./fa.js":606,"./fi":607,"./fi.js":607,"./fo":608,"./fo.js":608,"./fr":611,"./fr-ca":609,"./fr-ca.js":609,"./fr-ch":610,"./fr-ch.js":610,"./fr.js":611,"./fy":612,"./fy.js":612,"./gd":613,"./gd.js":613,"./gl":614,"./gl.js":614,"./gom-latn":615,"./gom-latn.js":615,"./gu":616,"./gu.js":616,"./he":617,"./he.js":617,"./hi":618,"./hi.js":618,"./hr":619,"./hr.js":619,"./hu":620,"./hu.js":620,"./hy-am":621,"./hy-am.js":621,"./id":622,"./id.js":622,"./is":623,"./is.js":623,"./it":624,"./it.js":624,"./ja":625,"./ja.js":625,"./jv":626,"./jv.js":626,"./ka":627,"./ka.js":627,"./kk":628,"./kk.js":628,"./km":629,"./km.js":629,"./kn":630,"./kn.js":630,"./ko":631,"./ko.js":631,"./ky":632,"./ky.js":632,"./lb":633,"./lb.js":633,"./lo":634,"./lo.js":634,"./lt":635,"./lt.js":635,"./lv":636,"./lv.js":636,"./me":637,"./me.js":637,"./mi":638,"./mi.js":638,"./mk":639,"./mk.js":639,"./ml":640,"./ml.js":640,"./mn":641,"./mn.js":641,"./mr":642,"./mr.js":642,"./ms":644,"./ms-my":643,"./ms-my.js":643,"./ms.js":644,"./mt":645,"./mt.js":645,"./my":646,"./my.js":646,"./nb":647,"./nb.js":647,"./ne":648,"./ne.js":648,"./nl":650,"./nl-be":649,"./nl-be.js":649,"./nl.js":650,"./nn":651,"./nn.js":651,"./pa-in":652,"./pa-in.js":652,"./pl":653,"./pl.js":653,"./pt":655,"./pt-br":654,"./pt-br.js":654,"./pt.js":655,"./ro":656,"./ro.js":656,"./ru":657,"./ru.js":657,"./sd":658,"./sd.js":658,"./se":659,"./se.js":659,"./si":660,"./si.js":660,"./sk":661,"./sk.js":661,"./sl":662,"./sl.js":662,"./sq":663,"./sq.js":663,"./sr":665,"./sr-cyrl":664,"./sr-cyrl.js":664,"./sr.js":665,"./ss":666,"./ss.js":666,"./sv":667,"./sv.js":667,"./sw":668,"./sw.js":668,"./ta":669,"./ta.js":669,"./te":670,"./te.js":670,"./tet":671,"./tet.js":671,"./tg":672,"./tg.js":672,"./th":673,"./th.js":673,"./tl-ph":674,"./tl-ph.js":674,"./tlh":675,"./tlh.js":675,"./tr":676,"./tr.js":676,"./tzl":677,"./tzl.js":677,"./tzm":679,"./tzm-latn":678,"./tzm-latn.js":678,"./tzm.js":679,"./ug-cn":680,"./ug-cn.js":680,"./uk":681,"./uk.js":681,"./ur":682,"./ur.js":682,"./uz":684,"./uz-latn":683,"./uz-latn.js":683,"./uz.js":684,"./vi":685,"./vi.js":685,"./x-pseudo":686,"./x-pseudo.js":686,"./yo":687,"./yo.js":687,"./zh-cn":688,"./zh-cn.js":688,"./zh-hk":689,"./zh-hk.js":689,"./zh-tw":690,"./zh-tw.js":690};i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=1169},1170:function(e,t){e.exports='<app-navbar></app-navbar>\n<div *ngIf="showError" style="width:100%;background:darkred;color:white"><i class="fa fa-close" style="padding:5px" (click)="closeError()"></i> {{error}}</div>\n<div class="flex-container" style="overflow: auto;"\n     fxLayout="row" fxLayout.xs="column"\n     fxLayoutAlign="center center" fxLayoutAlign.xs="start start">\n  \x3c!--<div class="flex-item" fxFlex="33"></div>--\x3e\n  <div class="flex-item" fxFlex="80"><router-outlet></router-outlet></div>\n  \x3c!--<div class="flex-item" fxFlex="33"></div>--\x3e\n</div>\n'},1171:function(e,t){e.exports='<span *ngIf="!isOverridden">Inventory Rules By Default:</span>\n<span *ngIf="isOverridden">Inventory Rules Overrides:</span>\n<br/>\n<md-card>\n  <div class="errorMessage">{{showMessage}}</div>\n  <div class="flex-container" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="center top" fxLayoutAlign.xs="start start">\n    <div class="flex-item" style="margin: 5px;" fxFlex="30%">\n      <div class="flex-container" fxLayout="column" fxLayoutAlign="left top">\n        <div class="flex-item" style="margin-left: 5px;" fxFlex="20%">\n          <md-card-content>\n            <md-input-container>\n              <input mdInput min="0" class="numInput minQty" type="number" placeholder="Min Qty" [(ngModel)]="minQty" (ngModelChange)="minChange()" id="minQty" min="0" maxlength="5"/>\n            </md-input-container>\n            <md-input-container>\n              <input mdInput min="0" class="numInput maxQty" type="number" placeholder="Max Qty" [(ngModel)]="maxQty" (ngModelChange)="maxChange()" id="maxQty" maxlength="5"/>\n            </md-input-container>\n          </md-card-content>\n        </div>\n        <div class="flex-item" fxFlex="80%">\n          <md-card-content>\n            <span>Coefficients</span>\n            <md-card>\n              <md-card-content>\n                <div>\n                  <br/>\n                  <div *ngFor="let day of days">\n                    <md-input-container>\n\n                      <input mdInput min="0" class="numInput" type="number" placeholder="{{day}}" [(ngModel)]="coefficients[day]" (ngModelChange)="coeffChange()" id="{{day}}"/>\n                    </md-input-container>\n                  </div>\n                </div>\n              </md-card-content>\n            </md-card>\n          </md-card-content>\n        </div>\n      </div>\n    </div>\n    <div class="flex-item" style="margin: 5px;" fxFlex="70%">\n      <md-card-content>\n        <span>Inventory Counting Recursion</span>\n        <md-card>\n          <md-card-content>\n            <app-rrule [RRuleStr]="recursionRule" (RRuleStrChange)="recurChange($event)"></app-rrule>\n          </md-card-content>\n        </md-card>\n      </md-card-content>\n    </div>\n  </div>\n</md-card>\n'},1172:function(e,t){e.exports='<md-card class="outerCard">\n  <div class="flex-container"\n       fxLayout="row" fxLayout.xs="column" fxLayout.sm="column"\n       fxLayoutAlign="center center" fxLayoutAlign.xs="start start" fxLayoutAlign.sm="start start">\n    <md-card-title class="flex-item cardTitle" fxFlex="70">{{unitName}} Delivery</md-card-title>\n    <material-datepicker class="flex-item" fxFlex="30" [(date)]="selectedDate" (onSelect)="dateChanged()">\n    </material-datepicker>\n  </div>\n  <md-tab-group *ngIf="dataIsReady" class="materialTab" [(selectedIndex)]="selectedIndex" (selectChange)="tabChanged()">\n    <md-tab label="All" *ngIf="overallDeliveryModel._deliveries !== undefined">\n      <md-card class="innerCard">\n        <md-card-title>To Do: Delivery</md-card-title>\n        <md-card-content>\n          <md-card style="overflow: auto;">\n            <md-card-content>\n              <table class="table">\n                <thead>\n                  <tr>\n                    <td></td>\n                    <td>Code</td>\n                    <td>Product</td>\n                    <td>Real Delivery</td>\n                    <td>Min Delivery</td>\n                    <td>Max Delivery</td>\n                    <td>Min Required</td>\n                    <td>Max Stock Capacity</td>\n                    <td>Branches Stock</td>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr *ngFor="let delItem of overallDeliveryModel._deliveries">\n                    <td *ngIf="delItem.id !== null"></td>\n                    <td *ngIf="delItem.id === null">\n                      <md-chip-list>\n                        <md-chip color="primary" selected="true">Added</md-chip>\n                      </md-chip-list>\n                    </td>\n                    <td>{{delItem.productCode}}</td>\n                    <td>{{delItem.productName}}</td>\n                    <td>{{delItem.realDelivery}}</td>\n                    <td *ngIf="delItem.minDelivery !== null">{{delItem.minDelivery}}</td>\n                    <td *ngIf="delItem.minDelivery === null"><i class="fa fa-question warnColoring" aria-hidden="true"></i></td>\n                    <td *ngIf="delItem.maxDelivery !== null">{{delItem.maxDelivery}}</td>\n                    <td *ngIf="delItem.maxDelivery === null"><i class="fa fa-question warnColoring" aria-hidden="true"></i></td>\n                    <td>{{delItem.min}}</td>\n                    <td>{{delItem.max}}</td>\n                    <td *ngIf="delItem.stock !== null">{{delItem.stock}}</td>\n                    <td *ngIf="delItem.stock === null"><i class="fa fa-question warnColoring" aria-hidden="true"></i></td>\n                </tr>\n                  <br/>\n                  <br/>\n                  <tr>\n                    <td></td>\n                    <td colspan="2">Sum</td>\n                    <td>{{receiversSumDeliveries[\'All\'].realDelivery}}</td>\n                    <td *ngIf="receiversSumDeliveries[\'All\'].minDelivery !== null">{{receiversSumDeliveries[\'All\'].minDelivery}}</td>\n                    <td *ngIf="receiversSumDeliveries[\'All\'].minDelivery === null"><i class="fa fa-question warnColoring" aria-hidden="true"></i></td>\n                    <td *ngIf="receiversSumDeliveries[\'All\'].maxDelivery !== null">{{receiversSumDeliveries[\'All\'].maxDelivery}}</td>\n                    <td *ngIf="receiversSumDeliveries[\'All\'].maxDelivery === null"><i class="fa fa-question warnColoring" aria-hidden="true"></i></td>\n                    <td>{{receiversSumDeliveries[\'All\'].min}}</td>\n                    <td>{{receiversSumDeliveries[\'All\'].max}}</td>\n                    <td *ngIf="receiversSumDeliveries[\'All\'].stock !== null">{{receiversSumDeliveries[\'All\'].stock}}</td>\n                    <td *ngIf="receiversSumDeliveries[\'All\'].stock === null"><i class="fa fa-question warnColoring" aria-hidden="true"></i></td>\n                  </tr>\n                </tbody>\n              </table>\n            </md-card-content>\n          </md-card>\n        </md-card-content>\n        <md-card-content>\n          <button md-raised-button class="ButtonStyle"\n                  *ngIf="isToday"\n                  [(disabled)]="overallDeliveryModel._shouldDisabled"\n                  (click)="printDelivery(overallDeliveryModel)">Print</button>\n        </md-card-content>\n      </md-card>\n    </md-tab>\n    <md-tab *ngFor="let rcv of receivers" class="delayedTab">\n      <template md-tab-label>\n        <i *ngIf="rcv.warn === \'count\'" class="fa fa-exclamation warnColoring" aria-hidden="true"></i>\n        {{rcv.name}}\n      </template>\n      <template md-tab-label *ngIf="rcv.warn === \'login\'">\n        <i class="fa fa-exclamation warnColoring" aria-hidden="true"></i>\n        <i class="fa fa-exclamation warnColoring" aria-hidden="true"></i> {{rcv.name}}\n      </template>\n      <template md-tab-label *ngIf="rcv.warn === \'count\'">\n        <i class="fa fa-exclamation warnColoring" aria-hidden="true"></i> {{rcv.name}}\n      </template>\n      <template md-tab-label *ngIf="rcv.warn === \'no\'">\n        {{rcv.name}}\n      </template>\n      <md-card class="innerCard"\n               *ngIf="!isWaiting[rcv.name] && receiversDeliveryModels[rcv.name] !== undefined && receiversDeliveryModels[rcv.name] !== null">\n        <md-card-title>To Do: Delivery</md-card-title>\n        <md-card-content>\n          <md-card style="min-width: 600px !important; overflow-x: auto;">\n            <md-card-content>\n              <table class="table">\n                <thead>\n                <tr>\n                  <td></td>\n                  <td>Code</td>\n                  <td>Product</td>\n                  <td>Real Delivery</td>\n                  <td>Min Delivery</td>\n                  <td>Max Delivery</td>\n                  <td>Min Required</td>\n                  <td>Max Stock Capacity</td>\n                  <td>Current Stock</td>\n                  <td>Stock Date</td>\n                </tr>\n                </thead>\n                <tbody style="height: 200px;">\n                <tr *ngFor="let delItem of receiversDeliveryModels[rcv.name]._deliveries">\n                  <td class="buttonItem" *ngIf="delItem.id !== null && delItem.state !== \'added\'"></td>\n                  <td class="buttonItem" *ngIf="delItem.id === null">\n                    <button md-mini-fab\n                            (click)="removeDeliveryItem(delItem)">\n                      <i class="fa fa-times" aria-hidden="true"></i>\n                    </button>\n                  </td>\n                  <td class="buttonItem" *ngIf="delItem.id !== null && delItem.state === \'added\'">\n                    <md-chip-list>\n                      <md-chip color="primary" selected="true">Added</md-chip>\n                    </md-chip-list>\n                  </td>\n                  <td class="codeItem"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    {{delItem.productCode}}\n                  </td>\n                  <td class="nameItem "\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    {{delItem.productName}}\n                  </td>\n                  <td class="inputItem">\n                    <md-input-container>\n                      <input mdInput type="number"\n                             min="0"\n                             [ngClass]="[(rcv.warn ||((delItem.minDelivery > delItem.realDelivery || delItem.maxDelivery < delItem.realDelivery ) && isToday)) ? \'notEqualValues\' : \'equalValues\']"\n                             [(disabled)]="!isToday"\n                             placeholder="Real Delivery"\n                             [ngModel]="delItem.realDelivery"\n                             (change)="checkRealDeliveryValue($event, delItem)"/>\n                    </md-input-container>\n                  </td>\n                  <td class="column" *ngIf="delItem.stock !== null && delItem.id !== null"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    {{delItem.minDelivery}}\n                  </td>\n                  <td class="column" *ngIf="delItem.stock === null || delItem.id === null"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    <i class="fa fa-question warnColoring" aria-hidden="true"></i>\n                  </td>\n                  <td class="column" *ngIf="delItem.stock !== null && delItem.id !== null"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    {{delItem.maxDelivery}}\n                  </td>\n                  <td class="column" *ngIf="delItem.stock === null || delItem.id === null"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    <i class="fa fa-question warnColoring" aria-hidden="true"></i>\n                  </td>\n                  <td class="column"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">{{delItem.min}}\n                  </td>\n                  <td class="column"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">{{delItem.max}}\n                  </td>\n                  <td class="column" *ngIf="delItem.stock !== null && delItem.id !== null"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    {{delItem.stock}}\n                  </td>\n                  <td class="column" *ngIf="delItem.stock === null || delItem.id === null"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    <i class="fa fa-question warnColoring" aria-hidden="true"></i>\n                  </td>\n                  <td style="min-width: 80px !important;" class="column"\n                      [ngClass]="[(countToday(delItem.stockDate)) ? \'normalColoring\' : \'warnColoring\']">\n                    {{delItem.stockDate}}\n                  </td>\n                </tr>\n                <br/>\n                <br/>\n                <tr>\n                  <td class="buttonItem"></td>\n                  <td class="nameItem" colspan="2">Sum</td>\n                  <td class="inputItem">{{receiversSumDeliveries[rcv.name].realDelivery}}</td>\n                  <td class="column" *ngIf="rcv.warn === \'no\'">\n                    {{receiversSumDeliveries[rcv.name].minDelivery}}\n                  </td>\n                  <td class="column" *ngIf="rcv.warn === \'count\' || rcv.warn === \'unknown\'">\n                    <i class="fa fa-question warnColoring" aria-hidden="true"></i>\n                  </td>\n                  <td class="column" *ngIf="rcv.warn === \'no\'">\n                    {{receiversSumDeliveries[rcv.name].maxDelivery}}\n                  </td>\n                  <td class="column" *ngIf="rcv.warn === \'count\' || rcv.warn === \'unknown\'">\n                    <i class="fa fa-question warnColoring" aria-hidden="true"></i>\n                  </td>\n                  <td class="column">{{receiversSumDeliveries[rcv.name].min}}</td>\n                  <td class="column">{{receiversSumDeliveries[rcv.name].max}}</td>\n                  <td class="column" *ngIf="rcv.warn === \'no\'">\n                    {{receiversSumDeliveries[rcv.name].stock}}\n                  </td>\n                  <td class="column" *ngIf="rcv.warn === \'count\' || rcv.warn === \'unknown\'">\n                    <i class="fa fa-question warnColoring" aria-hidden="true"></i>\n                  </td>\n                  <td style="min-width: 80px !important;" class="column">-</td>\n                </tr>\n                <tr\n                  *ngIf="isToday && !receiversDeliveryModels[rcv.name]._shouldDisabled && productsList[rcv.name] !== undefined && productsList[rcv.name].length > 0">\n                  <td class="buttonItem"></td>\n                  <td class="codeItem" colspan="2">\n                    <md-input-container>\n                      <input mdInput type="text" [(disabled)]="receiversDeliveryModels[rcv.name]._shouldDisabled"\n                             class="pnc" placeholder="Product name/code" [mdAutocomplete]="auto"\n                             [formControl]="productNameCodeCtrl" (focus)="showProductList()"\n                             (blur)="clearInput($event)"/>\n                      <md-autocomplete #auto="mdAutocomplete">\n                        <md-option *ngFor="let nameCode of filteredNameCode | async" [value]="nameCode">\n                          {{nameCode}}\n                        </md-option>\n                      </md-autocomplete>\n                    </md-input-container>\n                  </td>\n                  <td class="nameItem"></td>\n                  <td class="inputItem"></td>\n                  <td class="column"></td>\n                  <td class="column"></td>\n                  <td class="column"></td>\n                  <td class="column"></td>\n                  <td style="min-width: 80px !important;" class="column"></td>\n                </tr>\n                </tbody>\n              </table>\n            </md-card-content>\n          </md-card>\n        </md-card-content>\n        <md-card-content>\n          <button md-raised-button class="ButtonStyle"\n                  *ngIf="isToday"\n                  [disabled]="!receiversDeliveryModels[rcv.name]._isSubmitted || receiversDeliveryModels[rcv.name]._deliveries.length <= 0"\n                  (click)="printDelivery(receiversDeliveryModels[rcv.name])">Print</button>\n          <button md-raised-button class="ButtonStyle"\n                  *ngIf="isToday"\n                  (click)="submitDelivery(receiversDeliveryModels[rcv.name])">Submit</button>\n        </md-card-content>\n      </md-card>\n    </md-tab>\n  </md-tab-group>\n  <div *ngIf="!dataIsReady">\n    <div class="flex-container waiting" fxLayout="row" fxLayoutAlign="center center">\n      <div class="flex-item" fxFlex="80">\n        <div class="flex-container" fxLayout="column" fxLayoutAlign="center center">\n          <div class="flex-item" fxFlex="80">\n            <i style="color: white !important;" class="fa fa-circle-o-notch fa-spin fa-3x fa-fw"></i>\n            <span class="sr-only">Loading...</span>\n          </div>\n          <div class="flex-item" fxFlex="20">\n            <br/>\n            <span class="waitingMessage">Please wait until we fetch and process delivery data</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</md-card>\n'},1173:function(e,t){e.exports="\n"},1174:function(e,t){e.exports='<md-card style="background-color: #607D8B; border-radius: 7px; text-align: left; margin: 10px;">\n  <md-card-title class="cardTitle">{{unitName}} Inventory</md-card-title>\n  <md-card class="innerCard">\n    <div class="flex-container"\n         fxLayout="row" fxLayout.xs="column" fxLayout.sm="column"\n         fxLayoutAlign="center center" fxLayoutAlign.xs="start start" fxLayoutAlign.sm="start start">\n      <md-card-title class="flex-item" fxFlex="70">To Do: Inventory Takings</md-card-title>\n      <material-datepicker class="flex-item" fxFlex="30" [(date)]="selectedDate" (onSelect)="dateChanged()">\n      </material-datepicker>\n    </div>\n    <md-card-content>\n      <md-card style="overflow: auto;">\n        <md-card-content>\n          <table class="table">\n            <thead>\n              <tr>\n                <td class="buttonItem col-xs-1">&nbsp;</td>\n                <td class="inputItem col-xs-3">Unopened Packs</td>\n                <td class="codeItem col-xs-3">Code</td>\n                <td class="nameItem col-xs-3">Product</td>\n                <td style="min-width: 80px !important;" class="column col-xs-2">Last Count</td>\n              </tr>\n            </thead>\n            <tbody style="height: 200px;" *ngIf="inventoryModel !== null && inventoryModel !== undefined && inventoryModel._inventories.length > 0">\n              <tr *ngFor="let invItem of inventoryModel._inventories" [@itemState]="invItem.state">\n                  <td class="buttonItem col-xs-1" *ngIf="invItem.shouldIncluded">&nbsp;</td>\n                  <td class="buttonItem col-xs-1" *ngIf="!invItem.shouldIncluded">\n                    <button md-mini-fab (click)="removeInventoryItem(invItem)"><i class="fa fa-times" aria-hidden="true"></i></button>\n                  </td>\n                  <td class="inputItem col-xs-3">\n                    <md-input-container>\n                      <input mdInput type="number" [(ngModel)]="invItem.unopenedPack" placeholder="Unopened Packs"\n                             (ngModelChange)="checkDisability(invItem)"\n                             [disabled]="!isSameDates"\n                             min="0"\n                             [ngClass]="[(!invItem.shouldCountToday && invItem.shouldIncluded) ? \'warnColoring\' : \'normalColoring\']"/>\n                    </md-input-container>\n                  </td>\n                  <td class="codeItem col-xs-3"\n                                [ngClass]="[(!invItem.shouldCountToday && invItem.shouldIncluded) ? \'warnColoring\' : \'normalColoring\']">\n                    {{invItem.productCode}}\n                  </td>\n                  <td class="nameItem col-xs-3"\n                                [ngClass]="[(!invItem.shouldCountToday && invItem.shouldIncluded) ? \'warnColoring\' : \'normalColoring\']">\n                    {{invItem.productName}}\n                  </td>\n                  <td class="column col-xs-2"\n                                *ngIf="invItem.lastCount !== null"\n                                [ngClass]="[(!invItem.shouldCountToday && invItem.shouldIncluded) ? \'warnColoring\' : \'normalColoring\']">\n                    {{invItem.lastCount | date: \'d MMM yy\'}}\n                  </td>\n                  <td style="min-width: 80px !important;" class="column col-xs-2"\n                                *ngIf="invItem.lastCount === null"\n                                [ngClass]="[(!invItem.shouldCountToday && invItem.shouldIncluded) ? \'warnColoring\' : \'normalColoring\']">\n                    -\n                  </td>\n              </tr>\n            </tbody>\n          </table>\n          <table class="table">\n            <tr *ngIf="isSameDates">\n              <td class="buttonItem col-xs-1">&nbsp;</td>\n              <td class="inputItem col-xs-3">\n                <md-input-container>\n                  <input mdInput type="number" placeholder="Unopened Packs" #unopenedPack/>\n                </md-input-container>\n              </td>\n              <td class="inputItem col-xs-7" colspan="2">\n                <md-input-container>\n                  <input mdInput type="text" class="pnc" placeholder="Product name/code" [mdAutocomplete]="auto" [formControl]="productNameCodeCtrl" #autoNameCode (focus)="showProductList()"/>\n                  <md-autocomplete #auto="mdAutocomplete">\n                    <md-option *ngFor="let nameCode of filteredNameCode | async" [value]="nameCode">\n                      {{nameCode}}\n                    </md-option>\n                  </md-autocomplete>\n                </md-input-container>\n              </td>\n              <td style="min-width: 80px !important;" class="column col-xs-1">\n              </td>\n            </tr>\n          </table>\n        </md-card-content>\n      </md-card>\n    </md-card-content>\n    <md-card-content>\n      <button md-raised-button class="ButtonStyle"\n              *ngIf="isSameDates"\n              [(disabled)]="submitShouldDisabled || waiting"\n              (click)="submitInventories()">Submit</button>\n    </md-card-content>\n  </md-card>\n</md-card>\n'},1175:function(e,t){e.exports='<md-card>\n  <md-card-title>Login</md-card-title>\n  <md-card-content>\n    <md-input-container>\n      <input mdInput focus placeholder="Username" [(ngModel)]="username" (change)="onChange()">\n    </md-input-container>\n    <md-input-container>\n      <input mdInput placeholder="Password" type="password" [(ngModel)]="password" (change)="onChange()" (keydown)="ifEnterLogin($event)">\n    </md-input-container>\n  </md-card-content>\n  <md-card-actions>\n    <button md-mini-fab [disabled]="!loginEnabled" (click)="userLogin()" color="primary" title="Login">\n      <md-icon fontSet="fa" fontIcon="fa-arrow-right"></md-icon>\n    </button>\n  </md-card-actions>\n</md-card>\n'},1176:function(e,t){e.exports='<md-toolbar color="primary" style="font-weight:200;font-size:100%">\n  <span><a style="font-weight:400;font-size:120%" class="toolbar" [routerLink]="[\'\']">Burgista Internal Delivery</a></span>\n  <span class="fill-remaining-space"></span>\n  <span *ngIf="!auth"><a  class="toolbar" [routerLink]="[\'login\']"><span class="fa fa-sign-in"></span> Login</a></span>\n  <span *ngIf="auth"><a  class="toolbar" (click)="logout()">{{user}} <i class="fa fa-sign-out"></i> Logout</a></span>\n</md-toolbar>\n<nav *ngIf="auth" md-tab-nav-bar>\n  <a md-tab-link *ngIf="isAdmin" [routerLink]="[\'units\']" routerLinkActive #unitsLink="routerLinkActive" [active]="unitsLink.isActive">Units</a>\n  <a md-tab-link *ngIf="isAdmin" [routerLink]="[\'products\']" routerLinkActive #productsLink="routerLinkActive" [active]="productsLink.isActive">Products</a>\n  <a md-tab-link *ngIf="isBranch || isAdmin" [routerLink]="[\'override\']" routerLinkActive #overrideLink="routerLinkActive" [active]="overrideLink.isActive">Override Rules</a>\n  <a md-tab-link *ngIf="isBranch" [routerLink]="[\'inventory\']" routerLinkActive #inventoryLink="routerLinkActive" [active]="inventoryLink.isActive">Inventory</a>\n  <a md-tab-link *ngIf="isPrep" [routerLink]="[\'delivery\']" routerLinkActive #deliveryLink="routerLinkActive" [active]="deliveryLink.isActive">Delivery</a>\n  <a md-tab-link *ngIf="isAdmin" [routerLink]="[\'reports\']" routerLinkActive #reportsLink="routerLinkActive" [active]="reportsLink.isActive">Reports</a>\n</nav>\n'},1177:function(e,t){e.exports='<md-card style="background-color: #607D8B; border-radius: 7px; text-align: left; margin: 10px;">\n  <md-card-title class="cardTitle">Inventory Rules Overrides</md-card-title>\n  <div *ngIf="!isAdmin">\n    <md-card [ngClass]="[(isFiltered && filteredProductModel._product.isOverridden) ? \'innerCardOverride\' : \'innerCard\']">\n      <md-card-content>\n        <md-input-container style="width: 100%;">\n          <input mdInput focus type="text" class="pnc" placeholder="Product name/code"\n                 [mdAutocomplete]="auto" [formControl]="productModelCtrl" #autoNameCode />\n          <md-autocomplete #auto="mdAutocomplete">\n            <md-option *ngFor="let nameCode of filteredNameCode | async" [value]="nameCode">\n              {{nameCode}}\n            </md-option>\n          </md-autocomplete>\n        </md-input-container>\n      </md-card-content>\n      <app-counting-rule *ngIf="isFiltered"\n                         [isOverridden]="true"\n                         [(minQty)]="filteredProductModel._product.minQty"\n                         [(maxQty)]="filteredProductModel._product.maxQty"\n                         [(coefficients)]="filteredProductModel._product.coefficients"\n                         [(recursionRule)]="filteredProductModel._product.countingRecursion"\n                         (hasError)="countingRuleErrorHandler($event)"\n                         (changed)="checkDisabilityStatus()">\n      </app-counting-rule>\n    </md-card>\n  </div>\n  <md-tab-group *ngIf="isAdmin" class="materialTab" [(selectedIndex)]="selectedIndex" (selectChange)="changedTab()">\n    <md-tab *ngFor="let branch of branchList" label="{{branch.name}}">\n      <md-card [ngClass]="[(isFiltered && filteredProductModel._product.isOverridden) ? \'innerCardOverride\' : \'innerCard\']">\n        <md-card-content>\n          <md-input-container style="width: 100%;">\n            <input mdInput type="text" class="pnc" placeholder="Product name/code"\n                   [mdAutocomplete]="auto" [formControl]="productModelCtrl"\n                   (focus)="showProductList($event)" #autoNameCode/>\n            <md-autocomplete #auto="mdAutocomplete">\n              <md-option *ngFor="let nameCode of filteredNameCode | async" [value]="nameCode">\n                {{nameCode}}\n              </md-option>\n            </md-autocomplete>\n          </md-input-container>\n        </md-card-content>\n        <app-counting-rule *ngIf="isFiltered"\n                           [isOverridden]="true"\n                           [(minQty)]="filteredProductModel._product.minQty"\n                           [(maxQty)]="filteredProductModel._product.maxQty"\n                           [(coefficients)]="filteredProductModel._product.coefficients"\n                           [(recursionRule)]="filteredProductModel._product.countingRecursion"\n                           (hasError)="countingRuleErrorHandler($event)"\n                           (changed)="checkDisabilityStatus()">\n        </app-counting-rule>\n      </md-card>\n    </md-tab>\n  </md-tab-group>\n  <br/>\n  <md-card-content>\n    <button md-raised-button *ngIf="isFiltered && !filteredProductModel._product.isOverridden" class="ButtonStyle addBtn" (click)="doClickedAction(ae.add)" [(disabled)]="addIsDisable">Add</button>\n    <button md-raised-button *ngIf="isFiltered && filteredProductModel._product.isOverridden" class="ButtonStyle updateBtn" (click)="doClickedAction(ae.update)" [(disabled)]="updateIsDisable">Update</button>\n    <button md-raised-button *ngIf="isFiltered && filteredProductModel._product.isOverridden" class="ButtonStyle deleteBtn" (click)="doClickedAction(ae.delete)" [(disabled)]= "deleteIsDisable">Delete</button>\n  </md-card-content>\n</md-card>\n'},1178:function(e,t){e.exports='<div class="flex-container" fxLayout="row" fxLayoutAlign="center center">\n  <div class="flex-item title" fxFlex="80">Burgista Bros - {{unitName_title}}</div>\n  <div style="float: right;" class="flex-item subtitle" fxFlex="20">{{currentDate | date: \'dd MMMM yyyy\'}}</div>\n</div>\n<div class="title" style="font-weight: bold">{{unitName_subTitle}} Delivery Note</div>\n\n<div *ngIf="!isOverallPrint">\n  <table class="table">\n    <thead class="titleBox">\n      <tr>\n      <td>#</td>\n      <td>Product Code</td>\n      <td>Product Name</td>\n      <td>Real Delivery</td>\n      <td>Current Stock</td>\n      <td>Stock After Delivery</td>\n      <td>Stock surplus/deficit</td>\n    </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor="let item of itemList">\n      <td class="box">{{item.rowNum}}</td>\n      <td class="box">{{item.productCode}}</td>\n      <td class="box">{{item.productName}}</td>\n      <td class="box">{{item.realDelivery}}</td>\n      <td class="box">{{item.currentStock===null ? \'NA\' : item.currentStock}}</td>\n      <td class="box">{{item.stockAfterDelivery}}</td>\n      <td class="box">{{item.stockSurplusDeficit}}</td>\n    </tr>\n    </tbody>\n  </table>\n</div>\n<div *ngIf="isOverallPrint">\n  <table class="table">\n    <thead class="titleBox">\n      <tr>\n        <td>#</td>\n        <td>Product Code</td>\n        <td>Product Name</td>\n        <td>Total Delivery</td>\n        <td *ngFor="let rcvName of receivers">{{rcvName}}</td>\n        <td>Total Stock surplus/deficit</td>\n      </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor="let item of itemList">\n        <td class="box">{{item.rowNum}}</td>\n        <td class="box">{{item.productCode}}</td>\n        <td class="box">{{item.productName}}</td>\n        <td class="box">{{item.totalDelivery}}</td>\n        <td class="box" *ngFor="let rcvName of receivers">{{item[rcvName]}}</td>\n        <td class="box">{{item.totalStockSurplusDeficit}}</td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n<br/>\n\x3c!--<div style="color: darkred" *ngIf="showWarningMessage">--\x3e\n  \x3c!--<div>--\x3e\n    \x3c!--<label>Warning: Hitting print button will finalised delivery numbers.</label>--\x3e\n  \x3c!--</div>--\x3e\n  \x3c!--<div>--\x3e\n    \x3c!--<label>Please make sure all values are correct</label>--\x3e\n  \x3c!--</div>--\x3e\n\x3c!--</div>--\x3e\n<br/>\n<div>\n  <button md-raised-button class="ButtonStyle" (click)="dialogRef.close(\'print\')">Print</button>\n  <button md-raised-button class="ButtonStyle" (click)="dialogRef.close(\'cancel\')">Cancel</button>\n</div>\n'},1179:function(e,t){e.exports='<md-card style="background-color: #607D8B; border-radius: 7px; text-align: left; margin: 10px;">\n <md-card-title class="cardTitle">Products</md-card-title>\n  <md-tab-group class="materialTab" [selectedIndex]="selectedIndex">\n    <md-tab label="Add">\n      <md-card class="innerCard">\n        <app-product-sub-form [isAdd]="true" [isAdding]="isAdding" [actionIsSuccess]="actionIsSuccess" (action)="doClickedAction($event)"></app-product-sub-form>\n      </md-card>\n    </md-tab>\n    <md-tab label="Modify">\n      <md-card class="innerCard">\n        <md-card-content>\n          <md-grid-list cols="3" rowHeight="50px">\n            <md-grid-tile colspan="2" style="margin-right: 5px;">\n              <md-input-container style="width: 100%;">\n                <input mdInput type="text" class="pnc" placeholder="Product name"\n                       [mdAutocomplete]="autoName" [formControl]="productModelCtrlName"\n                       #autoNameInput (focus)="showProductList($event, \'name\')"/>\n                <md-autocomplete #autoName="mdAutocomplete">\n                  <md-option *ngFor="let name of filteredName | async" [value]="name">\n                    {{name}}\n                  </md-option>\n                </md-autocomplete>\n              </md-input-container>\n            </md-grid-tile>\n            <md-grid-tile colspan="1" style="margin-left: 5px;">\n              <md-input-container style="width: 100%">\n                <input mdInput type="text" class="pnc" placeholder="Product code"\n                       [mdAutocomplete]="autoCode" [formControl]="productModelCtrlCode"\n                       #autoCodeInput (focus)="showProductList($event, \'code\')"/>\n                <md-autocomplete #autoCode="mdAutocomplete">\n                  <md-option *ngFor="let code of filteredCode | async" [value]="code">\n                    {{code}}\n                  </md-option>\n                </md-autocomplete>\n              </md-input-container>\n            </md-grid-tile>\n          </md-grid-list>\n        </md-card-content>\n        <app-product-sub-form *ngIf="isFiltered" [isAdd]="false" [actionIsSuccess]="actionIsSuccess" [productModel]="filteredProductModel" (action)="doClickedAction($event)"></app-product-sub-form>\n      </md-card>\n    </md-tab>\n  </md-tab-group>\n</md-card>\n'},1180:function(e,t){e.exports='<span class="FormTitleStyle">{{formTitle}}</span>\n<md-card>\n  <div class="flex-container" fxLayout="column" fxLayoutAlign="left top">\n    <div class="flex-item" fxFlex="20%">\n      <md-card-content>\n        <md-input-container>\n          <input mdInput type="text" class="name" placeholder="Name" [(ngModel)]="product.name" (keyup)="disabilityStatus()"/>\n        </md-input-container>\n        <md-input-container>\n          <input mdInput type="text" class="code" placeholder="Code" [(ngModel)]="product.code" (keyup)="disabilityStatus()"/>\n        </md-input-container>\n        <md-input-container>\n          <input mdInput type="number" class="size" placeholder="size" [(ngModel)]="product.size" (keyup)="disabilityStatus()"/>\n        </md-input-container>\n        <md-select placeholder="Measuring Units" class="measuringUnit" [(ngModel)]="product.measuringUnit" (change)="disabilityStatus()">\n          <md-option *ngFor="let mu of measuringUnits" [value]="mu">{{mu}}</md-option>\n        </md-select>\n        <md-input-container>\n          <input mdInput type="number" class="size" placeholder="Price (Â£)" [(ngModel)]="product.price" (keyup)="disabilityStatus()"/>\n        </md-input-container>\n        <div>\n          <span>Preparation Unit</span>\n          <md-radio-group class="prepUnitId" [(ngModel)]="product.prep_unit_id" (change)="disabilityStatus()">\n            <div *ngFor="let pu of prepUnits">\n              <md-radio-button [value]="pu.id">{{pu.name}}</md-radio-button>\n              <br/>\n            </div>\n          </md-radio-group>\n        </div>\n      </md-card-content>\n    </div>\n    <div class="flex-item" fxFlex="70%">\n      <md-card-content *ngIf="hasCountingRuleError">\n        <label class="errorMessage">{{countingRuleError}}</label>\n      </md-card-content>\n      <md-card-content>\n        <app-counting-rule [(coefficients)]="product.coefficients"\n                           [(minQty)]="product.minQty"\n                           [(maxQty)]="product.maxQty"\n                           [(recursionRule)]="product.countingRecursion"\n                           (hasError)="countingRuleErrorHandler($event)"></app-counting-rule>\n      </md-card-content>\n    </div>\n    <div class="flex-item" fxFlex="10%">\n      <md-card-content>\n        <button md-raised-button *ngIf="isAdd" class="ButtonStyle addBtn" (click)="actionEmitter(ae.add)" [(disabled)]="addIsDisable" id="addBtn">Add</button>\n        <button md-raised-button *ngIf="!isAdd" class="ButtonStyle updateBtn" (click)="actionEmitter(ae.update)" [(disabled)]="updateIsDisable" id="updateBtn">Update</button>\n        <button md-raised-button *ngIf="!isAdd" class="ButtonStyle deleteBtn" (click)="actionEmitter(ae.delete)" [(disabled)]= "deleteIsDisable" id="deleteBtn">Delete</button>\n      </md-card-content>\n    </div>\n  </div>\n</md-card>\n<br/>\n'},1181:function(e,t){e.exports='<md-card class="outerCard">\n  <md-card-title class="cardTitle">Reports</md-card-title>\n  <md-card class="innerCard">\n    <h2>Delivery Report</h2>\n    <div class="row">\n      <div class="col-xs-12 col-lg-2 col-sm-3">\n        <md-select placeholder="Branch" class="branch" [(ngModel)]="branchIdForDeliveryReport">\n          <md-option *ngFor="let branch of branches" [value]="branch.id">{{branch.name}}</md-option>\n        </md-select>\n      </div>\n      <div class="col-xs-5 col-sm-4 col-lg-3">\n        <label for="start-range-input">Start of period:</label>\n        <material-datepicker class="flex-item" fxFlex="30" [(date)]="startDate" id="start-range-input" (dateChange)="checkDisabilityStatus()">\n        </material-datepicker>\n      </div>\n      <div class="col-xs-5 col-sm-4 col-lg-3">\n        <label for="end-range-input">End of period:</label>\n        <material-datepicker class="flex-item" fxFlex="30" [(date)]="endDate" id="end-range-input" (dateChange)="checkDisabilityStatus()">\n        </material-datepicker>\n      </div>\n    </div>\n    <div class="row" style="margin-top: 10px;">\n      <div class="col-xs-9 col-sm-6 col-lg-4 col-xs-push-3 col-lg-push-2">\n        <button type="button" class="btn btn-default btn-block" (click)="prepareDeliveryReport()" [disabled]="deliveryReportBtnDisabled">\n          <i class="fa fa-download" aria-hidden="true"></i> Download delivery report\n        </button>\n      </div>\n    </div>\n    <hr>\n    <h2>Products Report</h2>\n    <div class="row">\n      <div class="col-xs-3 col-lg-2">\n        <md-select placeholder="Branch" class="branch" [(ngModel)]="branchIdForProductReport">\n          <md-option *ngFor="let branch of branches" [value]="branch.id">{{branch.name}}</md-option>\n        </md-select>\n      </div>\n      <div class="col-xs-9 col-sm-6 col-lg-4">\n        <button type="button" class="btn btn-default btn-block" (click)="loadDataForProductsReport()">\n          <i class="fa fa-download" aria-hidden="true"></i> Download products report\n        </button>\n      </div>\n    </div>\n    <hr>\n    <h2>Inventory Counting Report</h2>\n    <div class="row">\n      <div class="col-xs-3 col-lg-2">\n        <md-select placeholder="Branch" class="branch" [(ngModel)]="branchIdForInventoryReport" (change)="checkDisabilityStatus()">\n          <md-option *ngFor="let branch of branchesWithoutAllOption" [value]="branch.id">{{branch.name}}</md-option>\n        </md-select>\n      </div>\n      <div class="col-xs-9 col-sm-6 col-lg-4">\n        <button type="button" class="btn btn-default btn-block" (click)="prepareInventoryCountingReport()" [disabled]="inventoryReportBtnDisabled">\n          <i class="fa fa-download" aria-hidden="true"></i> Download inventory counting report\n        </button>\n      </div>\n    </div>\n  </md-card>\n</md-card>\n'},1182:function(e,t){e.exports='<md-card>\n  <md-card-title>\n  Days {{reverse?\'remained to month-end\':\'past from month\'}}\n  </md-card-title>\n  <md-card-content>\n    <md-button-toggle-group *ngFor="let row of calDays;let i=index" multiple [vertical]="true">\n      <md-button-toggle *ngFor="let day of row" [value]="day" (change)="monthDaysChange($event)" [checked]="days.indexOf(reverse?day+1:day)!==-1">{{day}}</md-button-toggle>\n    </md-button-toggle-group>\n  </md-card-content>\n</md-card>\n'},1183:function(e,t){e.exports='<md-input-container>\n  <input mdInput type="number" placeholder="Interval" [(ngModel)]="options.interval" (ngModelChange)="onChange()"\n         min="1">\n  <md-hint>{{options.freq ? \'Every\' : \'Never\'}} {{options.freq && options.interval>1?options.interval:\'\'}}\n    {{freqsName[freqsConst.indexOf(options.freq)]}}{{options.interval>1?\'s\':\'\'}}\n  </md-hint>\n</md-input-container><br/>\n<md-button-toggle-group [(ngModel)]="freq" [vertical]="true" (ngModelChange)="onChange()">\n  <md-button-toggle *ngFor="let f of freqs;let i = index;" [value]="freqsConst[i]">\n    {{f}}\n  </md-button-toggle>\n</md-button-toggle-group>\n<span *ngIf="showMonthOptions">\n<md-button-toggle-group [(ngModel)]="monthlyInputMode" [vertical]="true" (ngModelChange)="onMonthlyInputModeChange($event)">\n  <md-button-toggle [value]="\'week\'">\n    By Weekdays\n  </md-button-toggle>\n  <md-button-toggle [value]="\'month\'">\n    By Month Days\n  </md-button-toggle>\n</md-button-toggle-group>\n   <span *ngIf="monthlyInputMode===\'month\'">\n<md-button-toggle-group multiple [vertical]="true">\n  <md-button-toggle value="past" (change)="monthDaysPastOrRemainedChange($event)"\n                    [checked]="monthDaysOption.indexOf(\'past\')!==-1">\n    Days Past\n  </md-button-toggle>\n  <md-button-toggle value="remained" (change)="monthDaysPastOrRemainedChange($event)"\n                    [checked]="monthDaysOption.indexOf(\'remained\')!==-1">\n    Days Remained\n  </md-button-toggle>\n</md-button-toggle-group>\n<app-monthday *ngIf="showMonthDaysPast" [days]="monthDaysPast" (daysChange)="monthDaysPastChange($event)"></app-monthday>\n<app-monthday *ngIf="showMonthDaysRemained" [reverse]="true" [days]="monthDaysRemained"\n              (daysChange)="monthDaysRemainedChange($event)"></app-monthday>\n</span>\n<md-button-toggle-group *ngIf="monthlyInputMode===\'week\'" multiple [vertical]="true">\n  <md-button-toggle *ngFor="let pos of weekpos;let i=index" [value]="pos" [checked]="bysetpos.indexOf(pos)!==-1"\n                    (change)="weekposChange($event)">{{weekposName[i]}}</md-button-toggle>\n</md-button-toggle-group>\n  </span>\n<md-button-toggle-group *ngIf="showWeekdays" multiple [vertical]="true">\n  <md-button-toggle *ngFor="let weekday of weekdays;let i = index;" [value]="weekdaysConst[i]"\n                    [checked]="byweekday.indexOf(weekdaysConst[i])!==-1" (change)="byweekdayChange($event)">\n    {{weekday}}\n  </md-button-toggle>\n</md-button-toggle-group>\n<h4>Next occurrences</h4>\n<pre>{{text}}</pre>\n'},1184:function(e,t){e.exports='<span class="FormTitleStyle">{{formTitle}}</span>\n<md-card>\n  <md-radio-group class="RadioButtonStyle" [(ngModel)]="unit.is_branch" id="isBranch" (change)="disabilityStatus()">\n    <md-radio-button [value]="true">Branch</md-radio-button>\n    <md-radio-button [value]="false">Prep Unit</md-radio-button>\n  </md-radio-group>\n  <br>\n  <md-radio-group *ngIf="unit.is_branch !== null && unit.is_branch" class="RadioButtonStyle" [(ngModel)]="unit.is_kitchen" id="isKitchen" (change)="disabilityStatus()">\n    <md-radio-button [value]="false">Front</md-radio-button>\n    <md-radio-button [value]="true">Kitchen</md-radio-button>\n  </md-radio-group>\n  <md-radio-group *ngIf="unit.is_branch !== null &&!unit.is_branch" class="RadioButtonStyle" [(ngModel)]="unit.is_kitchen" id="isKitchen2" (change)="disabilityStatus()">\n    <md-radio-button [value]="false">Main Depot</md-radio-button>\n    <md-radio-button [value]="true">Prep Kitchen</md-radio-button>\n  </md-radio-group>\n  <br>\n  <md-input-container>\n    <input mdInput placeholder="Unit Name" type="text" (keyup)="disabilityStatus()" [(ngModel)]="unit.name" class="name"/>\n  </md-input-container>\n  <md-input-container>\n\n    <input mdInput autocomplete="off" placeholder="Admin Username" type="text" (keyup)="disabilityStatus()" [(ngModel)]="unit.username" class="username"/>\n  </md-input-container>\n  <br>\n  <md-input-container >\n    <input mdInput autocomplete="off" placeholder="Admin Password" type="password" (keyup)="disabilityStatus()" [(ngModel)]="unit.password" class="password"/>\n  </md-input-container>\n  <br>\n    <button md-raised-button *ngIf="isAdd" class="ButtonStyle" (click)="actionEmitter(ae.add)" [(disabled)]="addIsDisable" class="addBtn">Add</button>\n    <button md-raised-button *ngIf="!isAdd" class="ButtonStyle" (click)="actionEmitter(ae.update)" [(disabled)]="updateIsDisable" class="updateBtn">Update</button>\n    <button md-raised-button *ngIf="!isAdd" class="ButtonStyle" (click)="actionEmitter(ae.delete)" [(disabled)]= "deleteIsDisable" class="deleteBtn">Delete</button>\n</md-card>\n'},1185:function(e,t){e.exports='<md-card class="outerCard">\n  <md-card-title class="cardTitle">Branches and Preparation Units</md-card-title>\n  <md-card class="innerCard">\n    <app-sub-form [isAdd]="true" [isAdding]="isAdding" [actionIsSuccess]="actionIsSuccess" (action)="doClickedAction($event)"></app-sub-form>\n    <app-sub-form *ngFor="let um of unitModels" [isAdd]="false" [actionIsSuccess]="actionIsSuccess" [unitModel]="um" (action)="doClickedAction($event)"></app-sub-form>\n  </md-card>\n</md-card>\n'},145:function(e,t,n){"use strict";!function(e){e[e.add=0]="add",e[e.update=1]="update",e[e.delete=2]="delete"}(t.ActionEnum||(t.ActionEnum={}));t.ActionEnum},1470:function(e,t,n){e.exports=n(805)},218:function(e,t,n){"use strict";var i=function(){function e(){this.countingRecursion="",this.coefficients={Monday:1,Tuesday:1,Wednesday:1,Thursday:1,Friday:1,Saturday:1,Sunday:1,Usage:1},this.isOverridden=!1}return e}();t.Product=i},219:function(e,t,n){"use strict";var i=function(){function e(){}return e}();t.Unit=i},321:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(524),a=n(56),d=n(2),c=function(){function e(e,t){this.messageService=e,this.winRef=t,this._unitSupplier="",this._unitConsumer="",this._isOverallPrint=!1,this._receivers=[],this._deliveryModels={},this._showWarningMessage=!0,this.currentDate=new Date,this._window=t.nativeWindow}return e.prototype.getItems=function(){return this._isOverallPrint?this.overallItems():this.eachUnitItems()},e.prototype.eachUnitItems=function(){for(var e=[],t=0,n=0,i=this._deliveryModels[this._unitConsumer]._deliveries;n<i.length;n++){var o=i[n];t++;var r={};r.rowNum=t,r.productCode=o.productCode,r.productName=o.productName,r.realDelivery=o.realDelivery,r.currentStock=o.stock,r.stockAfterDelivery=o.realDelivery+o.stock,r.stockSurplusDeficit=o.realDelivery+o.stock-o.max,e.push(r)}return console.log("Counter:"+t),console.log("Result:"+e),e},e.prototype.overallItems=function(){for(var e=[],t=0,n=function(n){t++;var o={};o.rowNum=t,o.productCode=n.productCode,o.productName=n.productName;for(var r=0,s=0,a=0,d=i._receivers;a<d.length;a++){var c=d[a],l=i._deliveryModels[c]._deliveries.find(function(e){return e.productCode.toLowerCase()===n.productCode.toLowerCase()});void 0===l?o[c]="-":(o[c]=l.realDelivery,r+=l.realDelivery,s+=l.realDelivery-l.minDelivery)}o.totalDelivery=r,o.totalStockSurplusDeficit=s,e.push(o)},i=this,o=0,r=this._deliveryModels.All._deliveries;o<r.length;o++){n(r[o])}return e},e.prototype.printData=function(){var e="",t=d(this.currentDate).format("ddd D MMM YYYY"),n='<table width="100%">\n                  <tr>\n                  <td width="70%" style="float: left; text-align: left; vertical-align: top"><label class="title">Burgista Bros - '+this._unitSupplier+'</label></td>\n                  <td width="30%" style="float: right; text-align: right; vertical-align: top"><label class="title">'+t+'</label></td>\n                  </tr>\n                  <tr>\n                  <td style="float: left; text-align: left"><label class="subtitle">'+this._unitConsumer+" Delivery Note</label></td>\n                  </tr>\n                  </table>",i="";if(this._isOverallPrint){i='<table class="table">\n                      <thead>\n                      <tr>\n                      <td>#</td>\n                      <td>Product Code</td>\n                      <td>Product Name</td>\n                      <td>Total Delivery</td>';for(var o=0,r=this._receivers;o<r.length;o++){var s=r[o];i+="<td>"+s+"</td>"}i+="<td>Total Stock surplus/deficit</td></tr></thead><tbody>"}else i='<table class="table"><thead><tr><td>#</td><td>Product Code</td><td>Product Name</td><td>Real Delivery</td><td>Current Stock</td><td>Stock After Delivery</td><td>Stock surplus/deficit</td></tr></thead><tbody>';var a="";if(this._isOverallPrint)for(var c=0,l=this.getItems();c<l.length;c++){var u=l[c];if(u.rowNum%2==1){a+="<tr><td>"+u.rowNum+"</td><td>"+u.productCode+"</td><td>"+u.productName+"</td><td>"+u.totalDelivery+"</td>";for(var p=0,m=this._receivers;p<m.length;p++){var s=m[p];a+="<td>"+u[s]+"</td>"}a+="<td>"+u.totalStockSurplusDeficit+"</td></tr>"}else{a+='<tr><td class="highlight">'+u.rowNum+'</td><td class="highlight">'+u.productCode+'</td><td class="highlight">'+u.productName+'</td><td class="highlight">'+u.totalDelivery+"</td>";for(var h=0,f=this._receivers;h<f.length;h++){var s=f[h];a+='<td class="highlight">'+u[s]+"</td>"}a+='<td class="highlight">'+u.totalStockSurplusDeficit+"</td></tr>"}}else for(var v=0,y=this.getItems();v<y.length;v++){var u=y[v];u.rowNum%2==1?a+="<tr>\n                                <td>"+u.rowNum+"</td>\n                                <td>"+u.productCode+"</td>\n                                <td>"+u.productName+"</td>\n                                <td>"+u.realDelivery+"</td>\n                                <td>"+(null===u.currentStock?"N/A":u.currentStock)+"</td>\n                                <td>"+(null===u.currentStock?"N/A":u.stockAfterDelivery)+"</td>\n                                <td>"+(null===u.currentStock?"N/A":u.stockSurplusDeficit)+"</td>\n                                </tr>":a+='<tr>\n                                <td class="highlight">'+u.rowNum+'</td>\n                                <td class="highlight">'+u.productCode+'</td>\n                                <td class="highlight">'+u.productName+'</td>\n                                <td class="highlight">'+u.realDelivery+'</td>\n                                <td class="highlight">'+(null===u.currentStock?"N/A":u.currentStock)+'</td>\n                                <td class="highlight">'+(null===u.currentStock?"N/A":u.stockAfterDelivery)+'</td>\n                                <td class="highlight">'+(null===u.currentStock?"N/A":u.stockSurplusDeficit)+"</td>\n                                </tr>"}i+=a+"</tbody></table>",e+="<div>"+n+"</div>",e+="<div>"+i+"</div>";var g=this._window.open("","_blank","width=1000,height=600,scrollbars=no,menubar=no,toolbar=no,location=no,status=no,titlebar=no");g?(g.window.focus(),g.document.write('<!DOCTYPE><html><head><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"  media="screen, print" /><style type="text/css" media="print, screen">@page{margin: 2mm;  /* this affects the margin in the printer settings */} html{color: black;margin: 5px;  /* this affects the margin on the html before sending to printer */} body{margin: 2mm 5mm 2mm 5mm; /* margin you want for the content */-webkit-print-color-adjust: exact;} .title{font-size: 2em;font-weight: normal;}.subtitle{font-size: 2em;font-weight: bold;}.highlight{background-color: #adadad !important;}.normal{background-color: white !important;}.table .highlight{background-color: #adadad !important;}</style></head><body onload="window.print()"><div class="container">'+e+"</div></body></html>"),g.document.close()):this.messageService.warn("Print pop-up is blocked by browser. Enable pop-ups from this page.")},e.prototype.getMonthName=function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e+1]},e=i([r.Injectable(),o("design:paramtypes",["function"==typeof(t=void 0!==a.MessageService&&a.MessageService)&&t||Object,"function"==typeof(n=void 0!==s.WindowRef&&s.WindowRef)&&n||Object])],e);var t,n}();t.PrintService=c},322:function(e,t,n){"use strict";var i=n(218),o=n(102),r=n(153),s=function(e){var t=r.RRule.fromString(e).options;return t.dtstart=new Date("2018-01-01"),r.RRule.optionsToString(t).replace(/\nRRULE:/g,";").split(";").filter(function(e){return!["HOUR","MINUTE","SECOND"].map(function(t){return e.startsWith("BY"+t)}).reduce(function(e,t){return e||t},!1)}).sort().join(";")},a=function(){function e(e){this.waiting=new o.BehaviorSubject({adding:!1,updating:!1,deleting:!1}),this._product=new i.Product,this._product.isOverridden=e.isOverridden,this._product.id=e.id,this._product.name=e.name,this._product.price=e.price,this._product.code=e.code,this._product.size=e.size,this._product.measuringUnit=e.measuringUnit,this._product.prep_unit_id=e.prep_unit_id,this._product.minQty=e.minQty,this._product.maxQty=e.maxQty,this._product.price=e.price;for(var t in e.coefficients)this._product.coefficients[t]=e.coefficients[t];this._product.countingRecursion=e.countingRecursion}return e.prototype.isDifferent=function(e){var t=!1,n=!1;for(var i in e)if("price"!==i)if("coefficients"===i)for(var o in e.coefficients)null===e.coefficients[o]&&(n=!0),+this._product.coefficients[o]!=+e.coefficients[o]&&(t=!0);else null===e[i]&&(n=!0),"countingRecursion"===i&&s(this._product[i])!==s(e[i])&&(t=!0),"countingRecursion"!==i&&this._product[i]!==e[i]&&(t=!0);return t&&!n},e.prototype.getDifferentValues=function(e){var t={};for(var n in e)if("coefficients"===n)for(var i in e.coefficients)this._product.coefficients[i]!==e.coefficients[i]&&(t.coefficients||(t.coefficients={}),t.coefficients[i]=e.coefficients[i]);else this._product[n]!==e[n]&&(t[n]=e[n]);return t},e.prototype.setProduct=function(e){null==this._product&&(this._product=new i.Product),this._product.isOverridden=e.isOverridden,this._product.id=e.id,this._product.name=e.name,this._product.code=e.code,this._product.size=e.size,this._product.measuringUnit=e.measuringUnit,this._product.prep_unit_id=e.prep_unit_id,this._product.minQty=e.minQty,this._product.maxQty=e.maxQty,this._product.price=e.price;for(var t in e.coefficients)this._product.coefficients[t]=e.coefficients[t];this._product.countingRecursion=e.countingRecursion},e.toAnyObject=function(e){var t={};for(var n in e)switch(n){case"id":t.pid=e.id;break;case"name":t.name=e.name;break;case"code":t.code=e.code;break;case"size":t.size=e.size;break;case"measuringUnit":t.measuring_unit=e.measuringUnit;break;case"prep_unit_id":t.prep_unit_id=e.prep_unit_id;break;case"minQty":t.default_min=e.minQty;break;case"maxQty":t.default_max=e.maxQty;break;case"price":t.price=e.price;break;case"countingRecursion":t.default_date_rule=e.countingRecursion;break;case"coefficients":for(var i in e.coefficients)switch(i){case"Monday":t.default_mon_multiple=e.coefficients.Monday;break;case"Tuesday":t.default_tue_multiple=e.coefficients.Tuesday;break;case"Wednesday":t.default_wed_multiple=e.coefficients.Wednesday;break;case"Thursday":t.default_thu_multiple=e.coefficients.Thursday;break;case"Friday":t.default_fri_multiple=e.coefficients.Friday;break;case"Saturday":t.default_sat_multiple=e.coefficients.Saturday;break;case"Sunday":t.default_sun_multiple=e.coefficients.Sunday;break;case"Usage":t.default_usage=e.coefficients.Usage}}return t},e.toAnyObjectOverride=function(e){var t={};for(var n in e)switch(n){case"id":t.pid=e.id;break;case"minQty":t.min=e.minQty;break;case"maxQty":t.max=e.maxQty;break;case"countingRecursion":t.date_rule=e.countingRecursion;break;case"coefficients":for(var i in e.coefficients)switch(i){case"Monday":t.mon_multiple=e.coefficients.Monday;break;case"Tuesday":t.tue_multiple=e.coefficients.Tuesday;break;case"Wednesday":t.wed_multiple=e.coefficients.Wednesday;break;case"Thursday":t.thu_multiple=e.coefficients.Thursday;break;case"Friday":t.fri_multiple=e.coefficients.Friday;break;case"Saturday":t.sat_multiple=e.coefficients.Saturday;break;case"Sunday":t.sun_multiple=e.coefficients.Sunday;break;case"Usage":t.usage=e.coefficients.Usage}}return t},e.fromAnyObject=function(e){var t=new i.Product;for(var n in e)switch(n){case"isOverridden":t.isOverridden=!0;break;case"pid":t.id=e[n];break;case"name":t.name=e[n];break;case"code":t.code=e[n];break;case"size":t.size=e[n];break;case"measuring_unit":t.measuringUnit=e[n];break;case"prep_unit_id":t.prep_unit_id=e[n];break;case"default_min":t.minQty=e[n];break;case"default_max":t.maxQty=e[n];break;case"price":e.price?t.price=parseFloat(e.price.substring(1)):t.price=null;break;case"default_date_rule":t.countingRecursion=e[n];break;case"default_mon_multiple":t.coefficients.Monday=e[n];break;case"default_tue_multiple":t.coefficients.Tuesday=e[n];break;case"default_wed_multiple":t.coefficients.Wednesday=e[n];break;case"default_thu_multiple":t.coefficients.Thursday=e[n];break;case"default_fri_multiple":t.coefficients.Friday=e[n];break;case"default_sat_multiple":t.coefficients.Saturday=e[n];break;case"default_sun_multiple":t.coefficients.Sunday=e[n];break;case"default_usage":t.coefficients.Usage=e[n]}return t},e}();t.ProductModel=a},524:function(e,t,n){"use strict";function i(){return window}var o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=n(0),a=function(){function e(){}return Object.defineProperty(e.prototype,"nativeWindow",{get:function(){return i()},enumerable:!0,configurable:!0}),e=o([s.Injectable(),r("design:paramtypes",[])],e)}();t.WindowRef=a},525:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(528),a=n(56),d=n(212),c=function(){function e(e,t,n){this.loggedInGuard=e,this.messageService=t,this.snackBar=n,this.title="app works!",this.showError=!1}return e.prototype.ngOnInit=function(){var e=this;this.messageService.err$.subscribe(function(t){e.showError=!0,e.error=t.statusText+": "+t.text()}),this.messageService.msg$.subscribe(function(t){e.showError=!1,e.snackBar.open(t,"x",{duration:3e3,extraClasses:["snackBar"]})}),this.messageService.warn$.subscribe(function(t){e.snackBar.open(t,"x",{duration:3e3,extraClasses:["warnBar"]})})},e.prototype.closeError=function(){this.showError=!1},e=i([r.Component({selector:"app-root",template:n(1170),styles:[n(1150)]}),o("design:paramtypes",["function"==typeof(t=void 0!==s.LoggedInGuard&&s.LoggedInGuard)&&t||Object,"function"==typeof(c=void 0!==a.MessageService&&a.MessageService)&&c||Object,"function"==typeof(l=void 0!==d.MdSnackBar&&d.MdSnackBar)&&l||Object])],e);var t,c,l}();t.AppComponent=c},526:function(e,t,n){"use strict";var i=function(){function e(){this.realDelivery=0,this.minDelivery=0,this.maxDelivery=0,this.state="exist",this.isPrinted=!1}return e}();t.Delivery=i},527:function(e,t,n){"use strict";var i=function(){function e(){this.unopenedPack=null,this.shouldIncluded=!0,this.shouldCountToday=!0}return e}();t.Inventory=i},528:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(216),a=n(96),d=function(){function e(e,t){var n=this;this.authService=e,this.router=t,this.isLoggedIn=!1,this.authService.auth$.subscribe(function(e){n.isLoggedIn=e})}return e.prototype.canActivate=function(e,t){return this.isLoggedIn||(this.authService.originBeforeLogin=t.url,this.router.navigate(["login"])),this.isLoggedIn},e=i([r.Injectable(),o("design:paramtypes",["function"==typeof(t=void 0!==a.AuthService&&a.AuthService)&&t||Object,"function"==typeof(n=void 0!==s.Router&&s.Router)&&n||Object])],e);var t,n}();t.LoggedInGuard=d},529:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(212),a=n(2),d=n(321),c=function(){function e(e,t){this.dialogRef=e,this.printService=t,this.unitName_title="",this.unitName_subTitle="",this.isOverallPrint=!1,this.currentDate=a().format("D MMMM YYYY"),this.receivers=[],this.itemList=[],this.showWarningMessage=!0}return e.prototype.ngOnInit=function(){this.isOverallPrint=this.printService._isOverallPrint,this.receivers=this.printService._receivers,this.unitName_title=this.printService._unitSupplier,this.unitName_subTitle=this.printService._unitConsumer,this.showWarningMessage=this.printService._showWarningMessage,this.currentDate=a(this.printService.currentDate).format("D MMMM YYYY"),this.itemList=this.printService.getItems()},e=i([r.Component({selector:"app-print-viewer",template:n(1178),styles:[n(1158)]}),o("design:paramtypes",["function"==typeof(t=void 0!==s.MdDialogRef&&s.MdDialogRef)&&t||Object,"function"==typeof(c=void 0!==d.PrintService&&d.PrintService)&&c||Object])],e);var t,c}();t.PrintViewerComponent=c},530:function(e,t,n){"use strict";var i=n(219),o=function(){function e(e){this.waiting={updating:!1,deleting:!1,adding:!1},this._unit=new i.Unit,this._unit.id=e.id,this._unit.name=e.name,this._unit.username=e.username,this._unit.password=e.password,this._unit.is_branch=e.is_branch,this._unit.is_kitchen=e.is_kitchen}return e.prototype.isDifferent=function(e){return""!==e.password||(e.name!==this._unit.name||(e.username!==this._unit.username||(e.is_branch!==this._unit.is_branch||e.is_kitchen!==this._unit.is_kitchen)))},e.prototype.getDifferentValues=function(e){var t={};return""!==e.password&&(t.password=e.password),e.name!==this._unit.name&&(t.name=e.name),e.username!==this._unit.username&&(t.username=e.username),e.is_branch!==this._unit.is_branch&&(t.is_branch=e.is_branch),e.is_kitchen!==this._unit.is_kitchen&&(t.is_kitchen=e.is_kitchen),t},e.prototype.setUnit=function(e){this._unit.id=e.id,this._unit.name=e.name,this._unit.username=e.username,this._unit.password=e.password,this._unit.is_branch=e.is_branch,this._unit.is_kitchen=e.is_kitchen},e}();t.UnitModel=o},56:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(102),a=n(139),d=function(){function e(){this.errStream=new s.Subject,this.err$=this.errStream.asObservable(),this.msgStream=new s.Subject,this.msg$=this.msgStream.asObservable(),this.warningStream=new s.Subject,this.warn$=this.warningStream.asObservable()}return e.prototype.error=function(e){e=this.changeToUnderstandableMessage(e);var t=new a.ResponseOptions,n="";try{e.json().Message?n=e.json().Message:"object"==typeof e.json().Message&&(n="")}catch(t){n=e.text()}t.body=n;var i=new a.Response(t);i.statusText=e.statusText,i.status=e.status,this.errStream.next(i)},e.prototype.message=function(e){this.msgStream.next(e)},e.prototype.warn=function(e){this.warningStream.next(e)},e.prototype.changeToUnderstandableMessage=function(e){var t=e._body,n=new a.ResponseOptions;if(-1!==t.indexOf("foreign key constraint")){n.body="Can not delete this item because other data items depend on it.";var i=new a.Response(n);return i.statusText="Data Integrity Error",i}if(-1!==t.indexOf("duplicate key value")){var o='constraint "',r=t.substring(t.indexOf(o)+o.length,t.indexOf('_key"')).replace(/\_/g," ");n.body='Can not add this item because same "'+r+'" already exists.';var i=new a.Response(n);return i.statusText="Data Integrity Error",i}if(-1!==t.indexOf("null value")&&-1!==t.indexOf("not-null constraint")){var o='in column "',r=t.substring(t.indexOf(o)+o.length,t.indexOf('" violates')).replace(/\_/g," ");n.body='The "'+r+'" field cannot be blank.';var i=new a.Response(n);return i.statusText="Data Integrity Error",i}return e},e=i([r.Injectable(),o("design:paramtypes",[])],e)}();t.MessageService=d},64:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(139);n(46);var a=function(){function e(e){this.http=e}return e.prototype.call=function(e){return this.http.get("/api/"+e)},e.prototype.insert=function(e,t){return this.http.put("/api/"+e,t).map(function(e){return e.json()})},e.prototype.get=function(e){return this.call(e).map(function(e){return e.json()})},e.prototype.getWithParams=function(e,t){var n=new s.URLSearchParams;for(var i in t)t.hasOwnProperty(i)&&n.set(i,t[i]);return this.http.get("/api/"+e,{search:n}).map(function(e){return e.json()})},e.prototype.delete=function(e,t){return this.http.delete("/api/"+e+"/"+t)},e.prototype.update=function(e,t,n){return this.http.post("/api/"+e+(t?"/"+t:""),n)},e=i([r.Injectable(),o("design:paramtypes",["function"==typeof(t=void 0!==s.Http&&s.Http)&&t||Object])],e);var t}();t.RestService=a},804:function(e,t){function n(e){throw new Error("Cannot find module '"+e+"'.")}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=804},805:function(e,t,n){"use strict";n(998);var i=n(945),o=n(0),r=n(997),s=n(984);r.environment.production&&o.enableProdMode(),i.platformBrowserDynamic().bootstrapModule(s.AppModule)},96:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(7),a=n(64),d=n(216),c=n(56),l=function(){function e(e,t,n){var i=this;this.restService=e,this.router=t,this.messageService=n,this.authStream=new s.Subject,this.user="",this.userType="",this.unitName="",this.auth$=this.authStream.asObservable(),this.originBeforeLogin="/",this.restService.call("validUser").subscribe(function(e){i.afterLogin(e),i.messageService.message("You are already logged in as "+i.user+".")},function(e){r.isDevMode()&&console.log(e),i.authStream.next(!1),i.router.navigate(["login"])})}return e.prototype.logIn=function(e,t){var n=this;this.restService.update("login",null,{username:e,password:t}).subscribe(function(e){n.afterLogin(e),n.messageService.message(n.user+" logged in.")},function(e){n.authStream.next(!1),n.messageService.error(e),r.isDevMode()&&console.log(e)})},e.prototype.afterLogin=function(e){var t=e.json();this.user=t.user,this.unitName=t.name,this.userType=t.userType,this.isKitchen=t.isKitchen,this.unit_id=t.uid,this.authStream.next(!0);var n=this.originBeforeLogin;null!==n&&"/"!==n?"branch"===this.userType?-1!==n.indexOf("inventory")||-1!==n.indexOf("override")?this.router.navigate([n]):this.router.navigate(["inventory"]):"prep"===this.userType?-1!==n.indexOf("delivery")?this.router.navigate([n]):this.router.navigate(["delivery"]):"admin"===this.userType&&(-1!==n.indexOf("units")||-1!==n.indexOf("products")||-1!==n.indexOf("override")||-1!==n.indexOf("reports")?this.router.navigate([n]):this.router.navigate([""])):"branch"===this.userType?this.router.navigate(["inventory"]):"prep"===this.userType?this.router.navigate(["delivery"]):this.router.navigate(["/"])},e.prototype.logOff=function(){var e=this;this.restService.call("logout").subscribe(function(){e.messageService.message(e.user+" logged out."),e.user="",e.userType="",e.unitName="",e.authStream.next(!1),e.router.navigate(["login"])},function(t){e.messageService.error(t),r.isDevMode()&&console.log(t)})},e=i([r.Injectable(),o("design:paramtypes",["function"==typeof(t=void 0!==a.RestService&&a.RestService)&&t||Object,"function"==typeof(n=void 0!==d.Router&&d.Router)&&n||Object,"function"==typeof(l=void 0!==c.MessageService&&c.MessageService)&&l||Object])],e);var t,n,l}();t.AuthService=l},978:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(53),s=n(0),a=n(31),d=n(139),c=n(525),l=n(987),u=n(988),p=n(983),m=n(96),h=n(64),f=n(528),v=n(216),y=n(212),g=n(975);n(1167);var b=n(996),D=n(995),C=n(894),_=n(994),x=n(993),w=n(990),M=n(991),S=n(979),k=n(56),I=n(982),R=n(989),P=n(985),O=n(980),j=n(529),A=n(321),N=n(524),L=n(992),E=function(){function e(){}return e=i([s.NgModule({declarations:[c.AppComponent,l.LoginComponent,u.NavbarComponent,p.HomeComponent,b.UnitFormComponent,D.SubFormComponent,_.RRuleComponent,x.MonthdayComponent,w.ProductFormComponent,M.ProductSubFormComponent,S.CountingRuleComponent,I.FocusDirective,R.OverrideFormComponent,P.InventoryFormComponent,O.DeliveryFormComponent,j.PrintViewerComponent,L.ReportsComponent],entryComponents:[j.PrintViewerComponent],imports:[r.BrowserModule,a.FormsModule,d.HttpModule,y.MaterialModule.forRoot(),C.FlexLayoutModule,a.ReactiveFormsModule,g.DatepickerModule,v.RouterModule.forRoot([{path:"",component:p.HomeComponent,pathMatch:"full"},{path:"login",component:l.LoginComponent},{path:"units",component:b.UnitFormComponent,canActivate:[f.LoggedInGuard]},{path:"products",component:w.ProductFormComponent,canActivate:[f.LoggedInGuard]},{path:"override",component:R.OverrideFormComponent,canActivate:[f.LoggedInGuard]},{path:"inventory",component:P.InventoryFormComponent,canActivate:[f.LoggedInGuard]},{path:"delivery",component:O.DeliveryFormComponent,canActivate:[f.LoggedInGuard]},{path:"reports",component:L.ReportsComponent,canActivate:[f.LoggedInGuard]}])],providers:[m.AuthService,h.RestService,f.LoggedInGuard,k.MessageService,A.PrintService,N.WindowRef],bootstrap:[c.AppComponent]}),o("design:paramtypes",[])],e)}();t.AppModule=E},979:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=function(){function e(){this.isOverridden=!1,this.coefficientsChange=new r.EventEmitter,this.minQtyChange=new r.EventEmitter,this.maxQtyChange=new r.EventEmitter,this.recursionRuleChange=new r.EventEmitter,this.hasError=new r.EventEmitter,this.days=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","Usage"],this.errorMessage={}}return Object.defineProperty(e.prototype,"minQty",{get:function(){return this._mq},set:function(e){-12345678===e?(this._mq=null,this.ngOnInit()):this._mq=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.coeffChange=function(){this.coefficientsChange.emit(this.coefficients);var e=0;for(var t in this.coefficients)e++,this.coefficients[t]<0&&(this.coefficients[t]=0),this.coefficients[t]?this.sendError("",10+e):this.sendError(t+" coefficient should be a non-zero number",10+e)},e.prototype.minChange=function(){this.minQty<0&&(this.minQty=0),this.minQtyChange.emit(this.minQty),this.sendError("",0),this.checkMinMax()},e.prototype.maxChange=function(){this.maxQty<0&&(this.maxQty=0),this.maxQtyChange.emit(this.maxQty),this.sendError("",1),this.checkMinMax()},e.prototype.recurChange=function(e){this.recursionRuleChange.emit(e.value),e.error?this.sendError("Recursion rule warning: "+e.error,2):this.sendError("",2)},e.prototype.checkMinMax=function(){null!==this.minQty&&null!==this.maxQty&&(this.minQty>this.maxQty?this.sendError("The Min Qty should be less than or equal to Max Qty",3):this.sendError("",3))},e.prototype.sendError=function(e,t){if(this.errorMessage[t]=e,e)this.hasError.emit(e);else{for(var n in this.errorMessage)this.errorMessage[n]&&(e=this.errorMessage[n]);this.hasError.emit(e)}this.showMessage=e},i([r.Input(),o("design:type",Boolean)],e.prototype,"isOverridden",void 0),i([r.Input(),o("design:type",Object)],e.prototype,"coefficients",void 0),i([r.Input(),o("design:type",Object),o("design:paramtypes",[Object])],e.prototype,"minQty",null),i([r.Input(),o("design:type",Object)],e.prototype,"maxQty",void 0),i([r.Input(),o("design:type",Object)],e.prototype,"recursionRule",void 0),i([r.Output(),o("design:type",Object)],e.prototype,"coefficientsChange",void 0),i([r.Output(),o("design:type",Object)],e.prototype,"minQtyChange",void 0),i([r.Output(),o("design:type",Object)],e.prototype,"maxQtyChange",void 0),i([r.Output(),o("design:type",Object)],e.prototype,"recursionRuleChange",void 0),i([r.Output(),o("design:type",Object)],e.prototype,"hasError",void 0),e=i([r.Component({selector:"app-counting-rule",template:n(1171),styles:[n(1151)]}),o("design:paramtypes",[])],e)}();t.CountingRuleComponent=s},980:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(96),a=n(64),d=n(981),c=n(526),l=n(31),u=n(56),p=n(218),m=n(212),h=n(529),f=n(321),v=n(2),y=n(102),g=function(){function e(e,t,n,i,o){this.authService=e,this.restService=t,this.msgService=n,this.dialog=i,this.printService=o,this.dataIsReady=!1,this.isWaiting={},this.receiverName="All",this.isToday=!0,this.selectedIndex=0,this.receivers=[],this.receiversSumDeliveries={},this.receiversDeliveryModels={},this.productName_Code={},this.productsList={}}return e.prototype.ngOnInit=function(){var e=this;null!==this.overallDeliveryModel&&void 0!==this.overallDeliveryModel||(this.overallDeliveryModel=new d.DeliveryModel("All")),this.overallDeliveryModel._shouldDisabled=!0,this.unitName=this.authService.unitName,this.isKitchen=this.authService.isKitchen,this.currentDate=new Date,this.selectedDate=new Date,this.restService.get("date").subscribe(function(t){e.currentDate=new Date(t),e.selectedDate=new Date(t)},function(e){console.error(e)}),this.receiversDeliveryModels={All:this.overallDeliveryModel};var t=new c.Delivery;t.realDelivery=0,t.min=0,t.max=0,t.minDelivery=0,t.maxDelivery=0,t.stock=0,this.receiversSumDeliveries={All:t},this.receivers=[],this.restService.get("unit?isBranch=true&isKitchen="+this.isKitchen).subscribe(function(t){for(var n=0,i=t;n<i.length;n++){var o=i[n],r={id:o.uid,name:o.name,warn:"no"};e.receivers.push(r),e.isWaiting[r.name]=!1}e.getDeliveryData()},function(e){console.log(e.message)}),this.productNameCodeCtrl=new l.FormControl,this.filteredNameCode=this.productNameCodeCtrl.valueChanges.map(function(t){return e.filterProducts(t)}),this.productNameCodeCtrl.valueChanges.subscribe(function(t){var n=e.productName_Code[e.receiverName].find(function(e){return e.toLowerCase()===t.toLowerCase()});if(void 0!==n&&null!==n){var i=n.substr(0,n.indexOf("-")-1),o=n.substr(n.indexOf("-")+2),r=new c.Delivery;r.id=null,r.productCode=i,r.productName=o;var s=e.productsList[e.receiverName].find(function(e){return e.code.toLowerCase()===i.toLowerCase()});r.min=s.minQty,r.max=s.maxQty,r.realDelivery=null,r.stock=0,r.minDelivery=r.min-r.stock<0?0:r.min-r.stock,r.maxDelivery=r.max-r.stock,r.stockDate=v(r.stockDate).format("dd MMM YY"),e.receiversDeliveryModels[e.receiverName].add(r),e.calSumRow(e.receiverName,r,"add"),e.calSumRow("All",r,"add"),e.productName_Code[e.receiverName]=e.productName_Code[e.receiverName].filter(function(e){return e.toLowerCase()!==n.toLowerCase()}),void 0===e.overallDeliveryModel.getByCode(r.productCode)?(e.overallDeliveryModel.add(r),e.updateOverallDelivery(r.productCode,r,"add","min",0),e.updateOverallDelivery(r.productCode,r,"add","max",0),e.updateOverallDelivery(r.productCode,r,"add","realDelivery",0),e.updateOverallDelivery(r.productCode,r,"add","minDelivery",0),e.updateOverallDelivery(r.productCode,r,"add","maxDelivery",0),e.updateOverallDelivery(r.productCode,r,"add","stock",0)):(e.updateOverallDelivery(r.productCode,r,"add","min",r.min),e.updateOverallDelivery(r.productCode,r,"add","max",r.max),e.updateOverallDelivery(r.productCode,r,"add","realDelivery",r.realDelivery),e.updateOverallDelivery(r.productCode,r,"add","minDelivery",r.minDelivery),e.updateOverallDelivery(r.productCode,r,"add","maxDelivery",r.maxDelivery),e.updateOverallDelivery(r.productCode,r,"add","stock",r.stock)),e.receiversDeliveryModels[e.receiverName]._isSubmitted=!1}},function(e){console.log(e.message)})},e.prototype.dateChanged=function(){this.selectedDate.getFullYear()!==this.currentDate.getFullYear()?this.isToday=!1:this.selectedDate.getMonth()!==this.currentDate.getMonth()?this.isToday=!1:this.selectedDate.getDate()!==this.currentDate.getDate()?this.isToday=!1:this.isToday=!0,this.overallDeliveryModel.clear(),this.getDeliveryData()},e.prototype.removeDeliveryItem=function(e){var t=this;if(0===this.selectedIndex)console.log("Error. Cannot remove added items from 'All' tab");else{this.updateOverallDelivery(e.productCode,e,"sub","realDelivery",e.realDelivery),this.updateOverallDelivery(e.productCode,e,"sub","minDelivery",e.minDelivery),this.updateOverallDelivery(e.productCode,e,"sub","maxDelivery",e.maxDelivery),this.updateOverallDelivery(e.productCode,e,"sub","stock",e.stock),this.updateOverallDelivery(e.productCode,e,"sub","min",e.min),this.updateOverallDelivery(e.productCode,e,"sub","max",e.max),this.receiversDeliveryModels[this.receiverName].deleteByCode(e.productCode);for(var n=[],i=0,o=0,r=0,s=0,a=this.receivers;s<a.length;s++){var d=a[s],c=this.receiversDeliveryModels[d.name]._deliveries.find(function(t){return t.productCode.toLowerCase()===e.productCode.toLowerCase()});void 0!==c&&(n.push(c.id),i+=c.minDelivery,o+=c.maxDelivery,r+=c.stock)}if(void 0===n.find(function(e){return null===e})){var l=this.overallDeliveryModel._deliveries.find(function(t){return t.productCode.toLowerCase()===e.productCode.toLowerCase()});void 0!==l&&(l.minDelivery=i,l.maxDelivery=o,l.stock=r)}var u=this.receivers.find(function(e){return e.name.toLowerCase()===t.receiverName.toLowerCase()});void 0===this.receiversDeliveryModels[this.receiverName]._deliveries.find(function(e){return null===e.id})?void 0===this.receiversDeliveryModels[this.receiverName]._deliveries.find(function(e){return null===e.stock})?u.warn="no":u.warn="count":u.warn="unknown",this.calSumRow(this.receiverName,e,"sub"),this.overallDeliveryModel._deliveries.length>0&&(this.receiversSumDeliveries.All.realDelivery=this.overallDeliveryModel._deliveries.map(function(e){return e.realDelivery}).reduce(function(e,t){return e+t}),this.receiversSumDeliveries.All.min=this.overallDeliveryModel._deliveries.map(function(e){return e.min}).reduce(function(e,t){return e+t}),this.receiversSumDeliveries.All.max=this.overallDeliveryModel._deliveries.map(function(e){return e.max}).reduce(function(e,t){return e+t}),void 0===this.overallDeliveryModel._deliveries.find(function(e){return null===e.stock})&&(this.receiversSumDeliveries.All.minDelivery=this.overallDeliveryModel._deliveries.map(function(e){return e.minDelivery}).reduce(function(e,t){return e+t}),this.receiversSumDeliveries.All.maxDelivery=this.overallDeliveryModel._deliveries.map(function(e){return e.maxDelivery}).reduce(function(e,t){return e+t}),this.receiversSumDeliveries.All.stock=this.overallDeliveryModel._deliveries.map(function(e){return e.stock}).reduce(function(e,t){return e+t}))),this.productName_Code[this.receiverName].push(e.productCode+" - "+e.productName),this.receiversDeliveryModels[this.receiverName]._isSubmitted=!1}},e.prototype.filterProducts=function(e){return e?this.productName_Code[this.receiverName].filter(function(t){return new RegExp(e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"gi").test(t)}):this.productName_Code[this.receiverName]},e.prototype.checkRealDeliveryValue=function(e,t){var n=""===e.srcElement.value?0:parseInt(e.srcElement.value);if(n<0)return e.srcElement.value=0,void(t.realDelivery=0);n<t.minDelivery?this.msgService.warn("The 'Real Delivery' value is less than 'Min' value"):n>t.maxDelivery&&this.msgService.warn("The 'Real Delivery' value is greater than 'Max Delivery' value"),this.updateOverallDelivery(t.productCode,t,"add","realDelivery",n-t.realDelivery),this.receiversSumDeliveries[this.receiverName].realDelivery+=n-t.realDelivery,this.receiversSumDeliveries.All.realDelivery+=n-t.realDelivery,t.realDelivery=n,this.receiversDeliveryModels[this.receiverName]._isSubmitted=!1},e.prototype.tabChanged=function(){0===this.selectedIndex?this.receiverName="All":this.receiverName=this.receivers[this.selectedIndex-1].name},e.prototype.updateOverallDelivery=function(e,t,n,i,o){switch(i){case"min":this.overallDeliveryModel.updateDeliveryProperty(n,e,"min",o);break;case"max":this.overallDeliveryModel.updateDeliveryProperty(n,e,"max",o);break;case"realDelivery":this.overallDeliveryModel.updateDeliveryProperty(n,e,"realDelivery",o);break;case"minDelivery":null!==t.stock&&null!==t.id||(o=null),this.overallDeliveryModel.updateDeliveryProperty(n,e,"minDelivery",o);break;case"maxDelivery":null!==t.stock&&null!==t.id||(o=null),this.overallDeliveryModel.updateDeliveryProperty(n,e,"maxDelivery",o);break;case"stock":null!==t.stock&&null!==t.id||(o=null),this.overallDeliveryModel.updateDeliveryProperty(n,e,"stock",o)}0===this.overallDeliveryModel.getByCode(e).min&&0===this.overallDeliveryModel.getByCode(e).max&&this.overallDeliveryModel.deleteByCode(e),this.overallDeliveryModel._deliveries.sort(function(e,t){return e.productName.toLowerCase()>t.productName.toLowerCase()?1:e.productName.toLowerCase()<t.productName.toLowerCase()?-1:e.productCode.toLowerCase()>t.productCode.toLowerCase()?1:e.productCode.toLowerCase()<e.productCode.toLowerCase()?-1:0})},e.prototype.countToday=function(e){return null!==e&&v(e).format("YYMMDD")===v(this.currentDate).format("YYMMDD")},e.prototype.printDelivery=function(e){if("All"===e._unitName){for(var t=0,n=this.receivers;t<n.length;t++){var i=n[t];if(!this.receiversDeliveryModels[i.name]._isSubmitted)return void this.msgService.warn(i.name+" data is not submitted")}this.sendForPrint(e,!0)}else e._isSubmitted?(e._shouldDisabled=!0,this.sendForPrint(e,!1)):this.msgService.warn("You should first submit the list")},e.prototype.submitDelivery=function(e){for(var t=this,n=function(n){if(null===n.realDelivery)return i.msgService.warn("Delivery data are submitted, but delivery value of '"+n.productName+"' was blank."),{value:void 0};if(0===n.realDelivery&&i.msgService.warn("Delivery data are submitted, but delivery value of '"+n.productName+"' was zero"),e._isSubmitted=!0,null===n.id){var o=i.receivers.find(function(e){return e.name.toLowerCase()===t.receiverName.toLowerCase()}).id,r=i.productsList[i.receiverName].find(function(e){return e.code.toLowerCase()===n.productCode.toLowerCase()}).id;i.restService.insert("delivery/"+o,d.DeliveryModel.toAnyObject(n,n.isPrinted,r)).subscribe(function(e){n.state="added",n.id=e,t.msgService.message("Delivery data are submitted")},function(n){e._isSubmitted=!1,console.log(n.message),t.msgService.error(n)})}else i.restService.update("delivery",n.id,d.DeliveryModel.toAnyObject(n,n.isPrinted,null)).subscribe(function(e){console.log("Update this item successfully")},function(n){e._isSubmitted=!1,console.log(n.message),t.msgService.error(n)})},i=this,o=0,r=e._deliveries;o<r.length;o++){var s=r[o],a=n(s);if("object"==typeof a)return a.value}},e.prototype.sendForPrint=function(e,t){var n=this;this.printService._isOverallPrint=t,this.printService._unitSupplier=this.unitName,this.printService._unitConsumer=t?"Aggregated":this.receiverName,this.printService._receivers=this.receivers.map(function(e){return e.name}),this.printService._deliveryModels=this.receiversDeliveryModels,this.printService._deliveryModels.All=this.overallDeliveryModel,this.printService._showWarningMessage=!this.receiversDeliveryModels[this.receiverName]._isPrinted,this.printService.currentDate=this.currentDate,this.dialog.open(h.PrintViewerComponent,{height:"600px",width:"1200px"}).afterClosed().subscribe(function(i){if("print"===i)if(t)n.printService.printData();else{for(var o=new y.BehaviorSubject(!1),r=!0,s=0,a=function(t){t.isPrinted=!0,n.restService.update("delivery",t.id,d.DeliveryModel.toAnyObject(t,t.isPrinted,null)).subscribe(function(t){e._isPrinted=e._deliveries.map(function(e){return e.isPrinted}).reduce(function(e,t){return e&&t}),++s>=e._deliveries.length&&o.next(!0)},function(n){t.isPrinted=!1,e._isPrinted=!1,r=!1,++s>=e._deliveries.length&&o.next(!0)})},c=0,l=e._deliveries;c<l.length;c++){var u=l[c];a(u)}o.subscribe(function(e){e&&r&&(n.checkOverallPrintDisability(),n.printService.printData())})}},function(e){return console.log(e.message)})},e.prototype.checkOverallPrintDisability=function(){for(var e=!0,t=0,n=this.receivers;t<n.length;t++){var i=n[t];!this.receiversDeliveryModels[i.name]._isPrinted&&this.receiversDeliveryModels[i.name]._deliveries.length>0&&(e=!1)}this.overallDeliveryModel._shouldDisabled=!e},e.prototype.getDeliveryData=function(){for(var e=this,t=v(this.selectedDate).format("YYYYMMDD"),n=function(n){n.warn="no",i.isWaiting[n.name]=!0,i.waiting(),i.restService.get("delivery/"+t+"/"+n.id).subscribe(function(t){e.isWaiting[n.name]=!1,e.waiting(),e.productsList[n.name]=[],e.receiversDeliveryModels[n.name]=new d.DeliveryModel(n.name),e.receiversSumDeliveries[n.name]=new c.Delivery,e.receiversSumDeliveries[n.name].min=0,e.receiversSumDeliveries[n.name].max=0,e.receiversSumDeliveries[n.name].minDelivery=0,e.receiversSumDeliveries[n.name].maxDelivery=0,e.receiversSumDeliveries[n.name].realDelivery=0,e.receiversSumDeliveries[n.name].stock=0;for(var i=0,o=t;i<o.length;i++){var r=o[i];if(null===r.id){var s=new p.Product;s.id=r.productId,s.code=r.productCode,s.name=r.productName,s.minQty=r.min,s.maxQty=r.max,void 0===e.productsList[n.name]&&(e.productsList[n.name]=[]),e.productsList[n.name].push(s),void 0===e.productName_Code[n.name]&&(e.productName_Code[n.name]=[]),e.productName_Code[n.name].push(r.productCode+" - "+r.productName)}else{null!==r.stock&&"number"==typeof r.stock||(n.warn="count");var a=new c.Delivery;a.id=r.id,a.productCode=r.productCode,a.productName=r.productName,null===r.stock&&null===r.realDelivery?a.realDelivery=null:null===r.realDelivery?a.realDelivery=r.max-r.stock<0?0:r.max-r.stock:a.realDelivery=r.realDelivery,a.minDelivery=r.min-r.stock<0?0:r.min-r.stock,a.maxDelivery=r.max-r.stock>=0?r.max-r.stock:0,a.min=r.min,a.max=r.max,a.stock=r.stock,a.isPrinted=r.isPrinted,null===r.stockDate?a.stockDate=null:a.stockDate=v(r.stockDate).format("DD MMM YY"),a.state="exist",e.receiversDeliveryModels[n.name].add(a),e.calSumRow(n.name,a,"add"),e.calSumRow("All",a,"add"),void 0===e.overallDeliveryModel.getByCode(r.productCode)?e.overallDeliveryModel.add(a):(e.updateOverallDelivery(r.productCode,a,"add","min",a.min),e.updateOverallDelivery(r.productCode,a,"add","max",a.max),e.updateOverallDelivery(r.productCode,a,"add","realDelivery",a.realDelivery),e.updateOverallDelivery(r.productCode,a,"add","minDelivery",a.minDelivery),e.updateOverallDelivery(r.productCode,a,"add","maxDelivery",a.maxDelivery),e.updateOverallDelivery(r.productCode,a,"add","stock",a.stock))}}e.receiversDeliveryModels[n.name]._deliveries.length>0?e.receiversDeliveryModels[n.name]._isPrinted=e.receiversDeliveryModels[n.name]._deliveries.map(function(e){return e.isPrinted}).reduce(function(e,t){return e&&t}):e.receiversDeliveryModels[n.name]._isSubmitted=!0,e.receiversDeliveryModels[n.name]._isPrinted&&(e.receiversDeliveryModels[n.name]._isSubmitted=!0),e.receiversDeliveryModels[n.name]._deliveries.sort(function(t,n){return!e.countToday(t.stockDate)&&e.countToday(n.stockDate)?-1:e.countToday(t.stockDate)&&!e.countToday(n.stockDate)?1:t.productName.toLowerCase()>n.productName.toLowerCase()?1:t.productName.toLowerCase()<n.productName.toLowerCase()?-1:t.productCode.toLowerCase()>n.productCode.toLowerCase()?1:t.productCode.toLowerCase()<t.productCode.toLowerCase()?-1:0})},function(t){e.isWaiting[n.name]=!1,e.waiting(),console.log(t.message)})},i=this,o=0,r=this.receivers;o<r.length;o++){n(r[o])}},e.prototype.showProductList=function(){this.productNameCodeCtrl.setValue("")},e.prototype.clearInput=function(e){setTimeout(function(){e.target.value=""},50)},e.prototype.calSumRow=function(e,t,n){if("add"===n){if(null===t.stock||null===t.id)if("All"!==e){var i=this.receivers.find(function(t){return t.name.toLowerCase()===e.toLowerCase()});"no"===i.warn&&(i.warn="unknown")}else this.receiversSumDeliveries.All.minDelivery=null,this.receiversSumDeliveries.All.maxDelivery=null,this.receiversSumDeliveries.All.stock=null;this.receiversSumDeliveries[e].min+=t.min,this.receiversSumDeliveries[e].max+=t.max,null!==this.receiversSumDeliveries[e].minDelivery&&(this.receiversSumDeliveries[e].minDelivery+=t.minDelivery),null!==this.receiversSumDeliveries[e].maxDelivery&&(this.receiversSumDeliveries[e].maxDelivery+=t.maxDelivery),this.receiversSumDeliveries[e].realDelivery+=t.realDelivery,null!==this.receiversSumDeliveries[e].stock&&(this.receiversSumDeliveries[e].stock+=t.stock)}else this.receiversSumDeliveries[e].min-=t.min,this.receiversSumDeliveries[e].max-=t.max,this.receiversSumDeliveries[e].minDelivery-=t.minDelivery,this.receiversSumDeliveries[e].maxDelivery-=t.maxDelivery,this.receiversSumDeliveries[e].realDelivery-=t.realDelivery,this.receiversSumDeliveries[e].stock-=null===t.stock?0:t.stock},e.prototype.waiting=function(){for(var e=!1,t=0,n=this.receivers;t<n.length;t++){var i=n[t];e=e||this.isWaiting[i.name]}this.dataIsReady=!e},e=i([r.Component({selector:"app-delivery-form",template:n(1172),styles:[n(1152)],animations:[r.trigger("itemState",[r.state("exist",r.style({opacity:1,transform:"translateX(0) scale(1)"})),r.state("delete",r.style({opacity:0,display:"none",transform:"translateX(0) scale(1)"})),r.state("sent",r.style({opacity:0,display:"none",transform:"translateX(0) scale(1)"})),r.transition("exist => delete",[r.animate("1s ease-out",r.style({opacity:0,transform:"translateX(-100%) scale(1)"}))]),r.transition("exist => sent",[r.animate("0.5s ease-out",r.style({opacity:0,transform:"translateX(0) scale(0.5)"}))])])]}),o("design:paramtypes",["function"==typeof(t=void 0!==s.AuthService&&s.AuthService)&&t||Object,"function"==typeof(g=void 0!==a.RestService&&a.RestService)&&g||Object,"function"==typeof(b=void 0!==u.MessageService&&u.MessageService)&&b||Object,"function"==typeof(D=void 0!==m.MdDialog&&m.MdDialog)&&D||Object,"function"==typeof(C=void 0!==f.PrintService&&f.PrintService)&&C||Object])],e);var t,g,b,D,C}();t.DeliveryFormComponent=g},981:function(e,t,n){"use strict";var i=n(526),o=function(){function e(e){this._deliveries=[],this._unitName="",this._shouldDisabled=!1,this._isSubmitted=!1,this._isPrinted=!1,this._unitName=e}return e.prototype.add=function(e){var t=new i.Delivery;for(var n in e)t[n]=e[n];this._deliveries.push(t)},e.prototype.get=function(e){return this._deliveries.find(function(t){return t.id===e})},e.prototype.getByCode=function(e){return this._deliveries.find(function(t){return t.productCode.toLowerCase()===e.toLowerCase()})},e.prototype.deleteByCode=function(e){try{return this._deliveries=this._deliveries.filter(function(t){return t.productCode.toLowerCase()!==e.toLowerCase()}),!0}catch(e){return console.log(e.message),!1}},e.prototype.clear=function(){this._deliveries=[]},e.prototype.replaceDeliveryProperty=function(e,t,n){try{return this._deliveries.find(function(t){return t.productCode.toLowerCase()===e.toLowerCase()})[t]=n,!0}catch(e){return console.log(e.message),!1}},e.prototype.updateDeliveryProperty=function(e,t,n,i){try{var o=this._deliveries.find(function(e){return e.productCode.toLowerCase()===t.toLowerCase()});if(null!==i&&null!==o[n]||"realDelivery"===n||"min"===n||"max"===n)switch(e){case"add":o[n]+=i;break;case"sub":o[n]-=i}else o[n]=null;return!0}catch(e){return console.log(e.message),!1}},e.toAnyObject=function(e,t,n){var i={};return i.real_delivery=e.realDelivery,i.is_delivery_finalised=t,null!==n&&(i.product_id=n),i},e}();t.DeliveryModel=o},982:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=function(){function e(e,t){this._el=e,this.renderer=t}return e.prototype.ngAfterViewInit=function(){this.renderer.invokeElementMethod(this._el.nativeElement,"focus")},e=i([r.Directive({selector:"[focus]"}),o("design:paramtypes",["function"==typeof(t=void 0!==r.ElementRef&&r.ElementRef)&&t||Object,"function"==typeof(n=void 0!==r.Renderer&&r.Renderer)&&n||Object])],e);var t,n}();t.FocusDirective=s},983:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=function(){function e(){}return e.prototype.ngOnInit=function(){},e=i([r.Component({selector:"app-home",template:n(1173),styles:[n(1153)]}),o("design:paramtypes",[])],e)}();t.HomeComponent=s},984:function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}i(n(525)),i(n(978))},985:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(31),a=n(96),d=n(64),c=n(986),l=n(527),u=n(1465),p=n(218),m=n(2),h=function(){function e(e,t){this.authService=e,this.restService=t,this.unitName="",this.isSameDates=!0,this.submitShouldDisabled=!0,this.products=[],this.productName_Code=[],this.waiting=!1}return e.prototype.ngOnInit=function(){var e=this;this.unitName=this.authService.unitName,this.currentDate=new Date,this.selectedDate=new Date,this.restService.get("date").subscribe(function(t){e.currentDate=new Date(t),e.selectedDate=new Date(t)},function(e){return console.error(e)}),null!==this.inventoryModel&&void 0!==this.inventoryModel||(this.inventoryModel=new c.InventoryModel(this.unitName)),this.getInventoryData(),this.productNameCodeCtrl=new s.FormControl,this.filteredNameCode=this.productNameCodeCtrl.valueChanges.startWith(null).map(function(t){return e.filterProducts(t)}),this.productNameCodeCtrl.valueChanges.subscribe(function(t){var n=e.productName_Code.find(function(e){return e.toLowerCase()===t.toLowerCase()});if(void 0!==n&&null!==n){var i=new l.Inventory;i.id=null,i.unopenedPack=void 0!==e.unopenedPack.nativeElement.value&&null!==e.unopenedPack.nativeElement.value&&""!==e.unopenedPack.nativeElement.value?e.unopenedPack.nativeElement.value:0,i.productCode=t.substr(0,t.indexOf("-")-1),i.productName=t.substr(t.indexOf("-")+2),i.productId=e.products.find(function(e){return e.code===i.productCode}).id,i.lastCount=new Date(e.currentDate.getFullYear(),e.currentDate.getMonth(),e.currentDate.getDate()),i.state="exist",i.shouldIncluded=!1,e.inventoryModel.add(i),e.unopenedPack.nativeElement.value=null,e.autoNameCode.nativeElement.value=null,e.productName_Code=e.productName_Code.filter(function(e){return e.toLowerCase()!==t.toLowerCase()})}},function(e){console.log(e.message)}),this.compareDates()},e.prototype.filterProducts=function(e){return e?this.productName_Code.filter(function(t){return new RegExp(e,"gi").test(t)}):this.productName_Code},e.prototype.submitInventoryItem=function(e){var t=this;null===e.id?this.restService.insert("stock",c.InventoryModel.toAnyObject(e)).subscribe(function(n){e.state="sent",u.setTimeout(function(){t.inventoryModel._inventories=t.inventoryModel._inventories.filter(function(t){return t.productCode!==e.productCode})},500)},function(e){console.log(e.message)}):this.restService.update("stock",e.id,c.InventoryModel.toAnyObject(e)).subscribe(function(n){e.state="sent",u.setTimeout(function(){t.inventoryModel._inventories=t.inventoryModel._inventories.filter(function(t){return t.productCode!==e.productCode})},500)},function(e){console.log(e.message)})},e.prototype.submitInventories=function(){for(var e=this,t=[],n=[],i=0,o=this.inventoryModel._inventories;i<o.length;i++){var r=o[i];null===r.id?t.push(c.InventoryModel.toAnyObject(r)):n.push(c.InventoryModel.toAnyObject(r))}var s={insert:t,update:n};this.waiting=!0,this.restService.insert("stock/batch",s).subscribe(function(t){u.setTimeout(function(){e.inventoryModel._inventories=[],e.waiting=!1},500)},function(t){e.waiting=!1,console.log(t)})},e.prototype.removeInventoryItem=function(e){var t=this;e.state="delete",u.setTimeout(function(){t.inventoryModel._inventories=t.inventoryModel._inventories.filter(function(t){return t.productName!==e.productName}),t.productName_Code.push(e.productCode+" - "+e.productName)},1e3)},e.prototype.disableInventoryItem=function(e){return null===e.unopenedPack||e.unopenedPack<0},e.prototype.dateChanged=function(){this.compareDates(),this.inventoryModel.clear(),this.productName_Code=[],this.getInventoryData()},e.prototype.compareDates=function(){this.currentDate.getDate()!==this.selectedDate.getDate()?this.isSameDates=!1:this.currentDate.getMonth()!==this.selectedDate.getMonth()?this.isSameDates=!1:this.currentDate.getFullYear()!==this.selectedDate.getFullYear()?this.isSameDates=!1:this.isSameDates=!0},e.prototype.isCountingDatePast=function(e){var t=new Date(e);return this.currentDate.getFullYear()>t.getFullYear()||(this.currentDate.getMonth()>t.getMonth()||this.currentDate.getDate()>t.getDate())},e.prototype.getInventoryData=function(){var e=this,t=m(this.selectedDate).format("YYYYMMDD");this.restService.get("stock/"+t).subscribe(function(t){e.inventoryModel.clear(),e.products=[],e.productName_Code=t.filter(function(e){return null===e.bsddid}).sort(function(e,t){return e.product_name.toLowerCase()>t.product_name.toLowerCase()?1:e.product_name.toLowerCase()<t.product_name.toLowerCase()?-1:e.product_code.toLowerCase()>t.product_code.toLowerCase()?1:e.product_code.toLowerCase()<t.product_code.toLowerCase()?-1:0}).map(function(e){return e.product_code+" - "+e.product_name}),e.restService.get("override?uid="+e.authService.unit_id).subscribe(function(t){var n=t.map(function(e){return e.code+" - "+e.name});e.productName_Code=e.productName_Code.filter(function(e){return n.includes(e)})},function(e){console.log(e.message)});for(var n=0,i=t;n<i.length;n++){var o=i[n];if(e.checkDisability(o),null===o.bsddid){var r=new p.Product;r.id=o.pid,r.code=o.product_code,r.name=o.product_name,e.products.push(r)}else if(null===o.counting_date)console.log("Error in data fetched from server");else{var s=new l.Inventory;if(s.id=o.bsddid,s.productId=o.pid,s.productCode=o.product_code,s.productName=o.product_name,s.unopenedPack=o.product_count,null===o.last_count)s.lastCount=null;else{var a=m(o.last_count).format("YYYY-MM-DD");s.lastCount="Invalid date"===a?e.currentDate:new Date(a)}s.shouldCountToday=!e.isCountingDatePast(o.counting_date),s.shouldIncluded=!0,s.state="exist",e.inventoryModel.add(s)}}e.inventoryModel._inventories.sort(function(e,t){return e.shouldCountToday||!e.shouldIncluded||!t.shouldCountToday&&t.shouldIncluded?!e.shouldCountToday&&e.shouldIncluded||t.shouldCountToday||!t.shouldIncluded?e.productName.toLowerCase()>t.productName.toLowerCase()?1:e.productName.toLowerCase()<t.productName.toLowerCase()?-1:e.productCode.toLowerCase()>t.productCode.toLowerCase()?1:e.productCode.toLowerCase()<t.productCode.toLowerCase()?-1:0:1:-1})},function(e){console.log(e.message)})},e.prototype.checkDisability=function(e){e.unopenedPack<0&&(e.unopenedPack=0);for(var t=!1,n=0,i=this.inventoryModel._inventories;n<i.length;n++){var o=i[n];if(this.disableInventoryItem(o)){t=!0;break}}this.submitShouldDisabled=t},e.prototype.showProductList=function(){this.productNameCodeCtrl.setValue("")},i([r.ViewChild("unopenedPack"),o("design:type",Object)],e.prototype,"unopenedPack",void 0),i([r.ViewChild("autoNameCode"),o("design:type",Object)],e.prototype,"autoNameCode",void 0),e=i([r.Component({selector:"app-inventory-form",template:n(1174),styles:[n(1154)],animations:[r.trigger("itemState",[r.state("exist",r.style({opacity:1,transform:"translateX(0) scale(1)"})),r.state("delete",r.style({opacity:0,display:"none",transform:"translateX(0) scale(1)"})),r.state("sent",r.style({opacity:0,display:"none",transform:"translateX(0) scale(1)"})),r.transition("exist => delete",[r.animate("1s ease-out",r.style({opacity:0,transform:"translateX(-100%) scale(1)"}))]),r.transition("exist => sent",[r.animate("0.5s ease-out",r.style({opacity:0,transform:"translateX(0) scale(0.5)"}))])])]}),o("design:paramtypes",["function"==typeof(t=void 0!==a.AuthService&&a.AuthService)&&t||Object,"function"==typeof(h=void 0!==d.RestService&&d.RestService)&&h||Object])],e);var t,h}();t.InventoryFormComponent=h},986:function(e,t,n){"use strict";var i=n(527),o=function(){function e(e){this._inventories=[],this._unitName="",this._unitName=e,this._inventories=[]}return e.prototype.clear=function(){this._inventories=[]},e.prototype.add=function(e){this._inventories.push(e)},e.prototype.get=function(e){return this._inventories.find(function(t){return t.id===e})},e.prototype.getByCode=function(e){return this._inventories.find(function(t){return t.productCode===e})},e.prototype.delete=function(e){this._inventories=this._inventories.filter(function(t){return t.id!==e})},e.toAnyObject=function(e){var t={};return t.bsddid=e.id,t.product_id=e.productId,t.product_count=e.unopenedPack,t.product_code=e.productCode,t.product_name=e.productName,t.last_count=e.lastCount,t},e.fromAnyObject=function(e){var t=new i.Inventory;for(var n in e)switch(n){case"bsddid":t.id=e[n];break;case"product_code":t.productCode=e[n];break;case"product_name":t.productName=e[n];break;case"product_count":t.unopenedPack=e[n];break;case"last_count":t.lastCount=e[n];break;case"pid":t.productId=e[n]}return t},e}();t.InventoryModel=o},987:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(96),a=function(){function e(e){this.authService=e,this.loginEnabled=!1}return e.prototype.onChange=function(){this.loginEnabled=this.username&&this.password},e.prototype.ngOnInit=function(){},e.prototype.ifEnterLogin=function(e){13===e.keyCode&&this.userLogin()},e.prototype.userLogin=function(){this.authService.logIn(this.username,this.password)},e=i([r.Component({selector:"app-login",template:n(1175),styles:[n(1155)]}),o("design:paramtypes",["function"==typeof(t=void 0!==s.AuthService&&s.AuthService)&&t||Object])],e);var t}();t.LoginComponent=a},988:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(96),a=n(216),d=function(){function e(e,t){this.authService=e,this.router=t,this.navLinks=[]}return e.prototype.ngOnInit=function(){var e=this;this.authService.auth$.subscribe(function(t){e.auth=t,e.user=e.authService.user,e.isAdmin=t&&"admin"===e.authService.userType,e.isBranch=t&&"branch"===e.authService.userType,e.isPrep=t&&"prep"===e.authService.userType,e.isAdmin&&(e.navLinks.push({label:"Units",link:"units"}),e.navLinks.push({label:"Products",link:"products"}))})},e.prototype.logout=function(){this.authService.logOff()},e=i([r.Component({selector:"app-navbar",template:n(1176),styles:[n(1156)]}),o("design:paramtypes",["function"==typeof(t=void 0!==s.AuthService&&s.AuthService)&&t||Object,"function"==typeof(d=void 0!==a.Router&&a.Router)&&d||Object])],e);var t,d}();t.NavbarComponent=d},989:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(31),a=n(64),d=n(96),c=n(322),l=n(145),u=n(56),p=function(){function e(e,t,n){this.restService=e,this.authService=t,this.messageService=n,this.isAdmin=!1,this.productModels=[],this.isFiltered=!1,this.productName_Code=[],this.productNames=[],this.productCodes=[],this.branchList=[],this.addIsDisable=!1,this.updateIsDisable=!1,this.deleteIsDisable=!1,this.selectedIndex=0,this.hasCountingRuleError=!1,this.selectedProduct="",this.ae=l.ActionEnum}return e.prototype.ngOnInit=function(){var e=this;this.isAdmin="admin"===this.authService.userType,this.isAdmin?this.restService.get("unit?isBranch=true").subscribe(function(t){e.branchList=[];for(var n=0,i=t;n<i.length;n++){var o=i[n],r={id:o.uid,name:o.name};e.branchList.push(r)}e.loadBranchProducts()},function(e){console.log(e.message)}):this.restService.get("override?uid="+this.authService.unit_id).subscribe(function(t){e.productModels=[];for(var n=function(t){var n=c.ProductModel.fromAnyObject(t),i=new c.ProductModel(n);e.productModels.push(i),e.productNames.find(function(e){return e===n.name})||e.productNames.push(n.name),e.productCodes.find(function(e){return e===n.code})||e.productCodes.push(n.code)},i=0,o=t;i<o.length;i++){n(o[i])}e.refreshDropDown()},function(e){console.log(e.message)}),this.checkDisabilityStatus(),this.productModelCtrl=new s.FormControl,this.filteredNameCode=this.productModelCtrl.valueChanges.startWith(null).map(function(t){return e.filterProducts(t)});var t=!1;this.filteredNameCode.subscribe(function(n){console.log("####"),console.log(n),1===n.length?(null==e.filteredProductModel?e.filteredProductModel=new c.ProductModel(e.getProduct(n)):e.filteredProductModel.setProduct(e.getProduct(n)),e.selectedProduct="["+e.filteredProductModel._product.code+"] "+e.filteredProductModel._product.name,e.isFiltered=!0,t=!0):(e.selectedProduct="",e.isFiltered=!1,t=!1)},function(e){console.log(e.message)}),this.productModelCtrl.valueChanges.subscribe(function(n){if(!t){var i=void 0;e.productModelCtrl.value&&(i=e.productModels.find(function(t){return t._product.name.toLowerCase()==e.productModelCtrl.value.toLowerCase()||t._product.code.toLowerCase()==e.productModelCtrl.value.toLowerCase()})),null!==i&&void 0!==i?(null==e.filteredProductModel?e.filteredProductModel=new c.ProductModel(i._product):e.filteredProductModel.setProduct(i._product),e.selectedProduct=e.filteredProductModel._product.name,e.isFiltered=!0):(e.selectedProduct="",e.isFiltered=!1)}},function(e){console.log(e.message)})},e.prototype.refreshDropDown=function(){var e=this;this.productName_Code=[],this.productNames.forEach(function(t,n){return e.productName_Code.push("["+e.productCodes[n]+"] "+t)}),console.log(this.productName_Code),this.productModelCtrl.reset()},e.prototype.doClickedAction=function(e){if(!this.isFiltered||null===this.filteredProductModel)return void this.messageService.message("You should first choose product to override");switch(this.setWaiting(e,!0),e){case l.ActionEnum.add:this.add_updateOverride(!0);break;case l.ActionEnum.update:this.add_updateOverride(!1);break;case l.ActionEnum.delete:this.deleteOverride()}},e.prototype.add_updateOverride=function(e){var t=this,n="";this.isAdmin&&(n="?uid="+this.branchList[this.selectedIndex].id);var i=this.productModels.filter(function(e){return e._product.id===t.filteredProductModel._product.id});if(null===i[0])return console.log("Cannot match id!!!"),void this.messageService.message("Unexpected error has occurred. Please reload your page");this.restService.update("override",this.filteredProductModel._product.id+n,c.ProductModel.toAnyObjectOverride(i[0].getDifferentValues(this.filteredProductModel._product))).subscribe(function(n){t.filteredProductModel._product.isOverridden=!0,i[0].setProduct(t.filteredProductModel._product),e?t.setWaiting(l.ActionEnum.add,!1):t.setWaiting(l.ActionEnum.update,!1),t.checkDisabilityStatus()},function(e){console.log(e.message),t.checkDisabilityStatus()})},e.prototype.deleteOverride=function(){var e=this,t="";this.isAdmin&&(t="?uid="+this.branchList[this.selectedIndex].id);var n=this.productModels.filter(function(t){return t._product.id===e.filteredProductModel._product.id});if(null===n[0])return console.log("Cannot match id!!!"),void this.messageService.message("Unexpected error has occurred. Please reload your page");this.restService.delete("override",this.filteredProductModel._product.id+t).subscribe(function(t){e.filteredProductModel._product.isOverridden=!1,n[0].setProduct(c.ProductModel.fromAnyObject(t.json())),e.filteredProductModel.setProduct(c.ProductModel.fromAnyObject(t.json())),e.setWaiting(l.ActionEnum.delete,!1),e.checkDisabilityStatus()},function(t){console.log(t.message),e.checkDisabilityStatus()})},e.prototype.checkDisabilityStatus=function(){this.addIsDisable=!this.isFiltered||this.shouldAddBtnDisable(),this.updateIsDisable=!this.isFiltered||this.shouldUpdateBtnDisable(),this.deleteIsDisable=!this.isFiltered||this.shouldDeleteBtnDisable()},e.prototype.shouldAddBtnDisable=function(){var e=this;if(this.filteredProductModel.waiting.getValue().adding||this.hasCountingRuleError)return!0;var t=this.productModels.filter(function(t){return t._product.id===e.filteredProductModel._product.id});return null===t[0]?(console.log("Id changed!!!"),!0):!t[0].isDifferent(this.filteredProductModel._product)},e.prototype.shouldUpdateBtnDisable=function(){var e=this;if(this.filteredProductModel.waiting.getValue().updating||this.hasCountingRuleError)return!0;var t=this.productModels.filter(function(t){return t._product.id===e.filteredProductModel._product.id});return null===t[0]?(console.log("Id changed!!!"),!0):!t[0].isDifferent(this.filteredProductModel._product)},e.prototype.shouldDeleteBtnDisable=function(){return!(!this.filteredProductModel.waiting.getValue().deleting&&!this.hasCountingRuleError)},e.prototype.changedTab=function(){var e=this;this.filteredProductModel=null,this.isFiltered=!1,console.log("tab changed"),this.loadBranchProducts(function(){null!==e.selectedProduct&&""!==e.selectedProduct&&(e.productModelCtrl.setValue(e.selectedProduct),e.productModelCtrl.markAsTouched())})},e.prototype.loadBranchProducts=function(e){var t=this;void 0===e&&(e=function(){}),this.isAdmin&&this.restService.get("override?uid="+this.branchList[this.selectedIndex].id).subscribe(function(n){t.productModels=[],t.productNames=[],t.productCodes=[];for(var i=0,o=n;i<o.length;i++){var r=o[i],s=c.ProductModel.fromAnyObject(r),a=new c.ProductModel(s);t.productModels.push(a),t.productNames.push(s.name),t.productCodes.push(s.code)}t.refreshDropDown(),e()},function(e){console.log(e.message)})},e.prototype.countingRuleErrorHandler=function(e){e?(this.messageService.warn(e),this.hasCountingRuleError=!0):this.hasCountingRuleError=!1,this.checkDisabilityStatus()},e.prototype.setWaiting=function(e,t){var n={adding:!1,updating:!1,deleting:!1};switch(e){case l.ActionEnum.add:n.adding=t;break;case l.ActionEnum.update:n.updating=t;break;case l.ActionEnum.delete:n.deleting=t}this.filteredProductModel.waiting.next(n)},e.prototype.filterProducts=function(e){return e?this.productName_Code.filter(function(t){return new RegExp(e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"gi").test(t)}):this.productName_Code},e.prototype.getProduct=function(e){var t;return t=this.productModels[this.productName_Code.findIndex(function(t){return e[0]===t})],t._product},e.prototype.showProductList=function(e){null===this.productModelCtrl.value?this.productModelCtrl.setValue(""):e.target.select()},i([r.ViewChild("autoNameCode"),o("design:type",Object)],e.prototype,"autoNameCode",void 0),e=i([r.Component({selector:"app-override-form",template:n(1177),styles:[n(1157)]}),o("design:paramtypes",["function"==typeof(t=void 0!==a.RestService&&a.RestService)&&t||Object,"function"==typeof(p=void 0!==d.AuthService&&d.AuthService)&&p||Object,"function"==typeof(m=void 0!==u.MessageService&&u.MessageService)&&m||Object])],e);var t,p,m}();t.OverrideFormComponent=p},990:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(102),a=n(31),d=n(322),c=n(145),l=n(64),u=n(56),p=function(){function e(e,t,n){this.restService=e,this.messageService=t,this.elementRef=n,this.isAdding=new s.BehaviorSubject(!1),this.actionIsSuccess=new s.BehaviorSubject(!1),this.productModels=[],this.isFiltered=!1,this.productName_Code=[],this.productNames=[],this.productCodes=[],this.selectedIndex=0,this.nameChose=!1,this.codeChose=!1}return e.prototype.ngOnInit=function(){var e=this;this.restService.get("product").subscribe(function(t){e.productModels=[];for(var n=function(t){var n=d.ProductModel.fromAnyObject(t),i=new d.ProductModel(n);e.productModels.push(i),e.productNames.find(function(e){return e===n.name})||e.productNames.push(n.name),e.productCodes.find(function(e){return e===n.code})||e.productCodes.push(n.code)},i=0,o=t;i<o.length;i++){n(o[i])}e.refreshProductsDropDown()},function(e){console.log(e.message)}),this.productModelCtrlName=new a.FormControl,this.productModelCtrlCode=new a.FormControl,this.filteredName=this.productModelCtrlName.valueChanges.startWith(null).map(function(t){return e.filterProducts(t,"name")}),this.filteredCode=this.productModelCtrlCode.valueChanges.startWith(null).map(function(t){return e.filterProducts(t,"code")});var t=!1;this.filteredName.subscribe(function(n){1===n.length?(t||(e.codeChose=!1,e.nameChose=!1),e.isFiltered=!1,e.filteredProductModel=e.getProduct(n,"name"),e.nameChose=!0,t=!0,e.codeChose||e.productModelCtrlCode.setValue(e.filteredProductModel._product.code),e.isFiltered=!0):(e.nameChose=!1,e.isFiltered=!1,t=!1)},function(e){console.log(e.message)}),this.filteredCode.subscribe(function(n){1===n.length?(t||(e.codeChose=!1,e.nameChose=!1),e.isFiltered=!1,e.filteredProductModel=e.getProduct(n,"code"),console.log(e.filteredProductModel),e.codeChose=!0,t=!0,e.nameChose||e.productModelCtrlName.setValue(e.filteredProductModel._product.name),e.isFiltered=!0):(e.codeChose=!1,e.isFiltered=!1,t=!1)},function(e){console.log(e.message)}),this.productModelCtrlName.valueChanges.subscribe(function(n){if(!t){var i=e.productModels.find(function(t){return t._product.name.toLowerCase()==e.productModelCtrlName.value.toLowerCase()});null!==i&&void 0!==i?(e.isFiltered=!1,e.filteredProductModel=i,e.nameChose=!0,e.codeChose||e.productModelCtrlCode.setValue(e.filteredProductModel._product.code),e.isFiltered=!0):(e.isFiltered=!1,e.nameChose=!1)}},function(e){console.log(e.message)}),this.productModelCtrlCode.valueChanges.subscribe(function(n){if(!t){var i=e.productModels.find(function(t){return t._product.code.toLowerCase()==e.productModelCtrlCode.value.toLowerCase()});null!==i&&void 0!==i?(e.isFiltered=!1,e.filteredProductModel=i,e.codeChose=!0,e.nameChose||e.productModelCtrlName.setValue(e.filteredProductModel._product.name),e.isFiltered=!0):(e.isFiltered=!1,e.codeChose=!1)}},function(e){console.log(e.message)})},e.prototype.refreshProductsDropDown=function(){var e=this;this.productName_Code=[],this.productNames.forEach(function(t){return e.productName_Code.push(t)}),this.productCodes.forEach(function(t){return e.productName_Code.push(t)})},e.prototype.doClickedAction=function(e){var t=e.type,n=e.data;switch(this.disableEnable(n.id,t,!0),t){case c.ActionEnum.add:this.addProduct(n);break;case c.ActionEnum.delete:this.deleteProduct(n.id);break;case c.ActionEnum.update:this.updateProduct(n.id,n)}},e.prototype.addProduct=function(e){var t=this,n=this.productModels.find(function(t){return t._product.name.toLowerCase()===e.name.toLowerCase()});if(null!==n&&void 0!==n)return this.messageService.warn("The '"+n._product.name+"' name is already exist."),void this.disableEnable(e.id,c.ActionEnum.add,!1);var i=this.productModels.find(function(t){return t._product.code.toLowerCase()===e.code.toLowerCase()});if(null!==i&&void 0!==i)return this.messageService.warn("The '"+i._product.code+"' code is already exist."),void this.disableEnable(e.id,c.ActionEnum.add,!1);var o=e.name;this.restService.insert("product",d.ProductModel.toAnyObject(e)).subscribe(function(n){e.id=n;var i=new d.ProductModel(e);t.actionIsSuccess.next(!0),t.productModels.push(i),t.productNames.push(i._product.name),t.productCodes.push(i._product.code),t.refreshProductsDropDown(),t.disableEnable(e.id,c.ActionEnum.add,!1),t.actionIsSuccess.next(!1),t.messageService.message("'"+o+"' is added to products.")},function(n){t.messageService.error(n),r.isDevMode()&&console.log(n),t.disableEnable(e.id,c.ActionEnum.add,!1)})},e.prototype.deleteProduct=function(e){var t=this;this.restService.delete("product",e).subscribe(function(n){var i=t.productModels.filter(function(t){return t._product.id===e});t.productModels=t.productModels.filter(function(t){return t._product.id!==e}),t.productNames=t.productNames.filter(function(e){return e!==i[0]._product.name}),t.productCodes=t.productCodes.filter(function(e){return e!==i[0]._product.code}),t.refreshProductsDropDown(),t.isFiltered=!1,t.filteredProductModel=null,t.productModelCtrlName.setValue(""),t.messageService.message("Product is deleted.")},function(n){t.messageService.error(n),r.isDevMode()&&console.log(n),t.disableEnable(e,c.ActionEnum.delete,!1)})},e.prototype.updateProduct=function(e,t){var n=this,i=this.productModels.find(function(e){return e._product.name.toLowerCase()===t.name.toLowerCase()});if(null!==i&&void 0!==i&&t.name!==this.filteredProductModel._product.name)return this.messageService.warn("The '"+i._product.name+"' name is already exist."),void this.disableEnable(e,c.ActionEnum.update,!1);var o=this.productModels.find(function(e){return e._product.code.toLowerCase()===t.code.toLowerCase()});if(null!==o&&void 0!==o&&t.code!==this.filteredProductModel._product.code)return this.messageService.warn("The '"+o._product.code+"' code is already exist."),void this.disableEnable(e,c.ActionEnum.update,!1);var s=this.productModels.findIndex(function(t){return t._product.id==e}),a=this.productModels[s]._product.code,l=this.productModels[s]._product.name;this.restService.update("product",e,d.ProductModel.toAnyObject(this.productModels[s].getDifferentValues(t))).subscribe(function(i){n.actionIsSuccess.next(!0),n.productModels[s].setProduct(t);var o=n.productNames.findIndex(function(e){return e===l});n.productNames[o]=t.name;var r=n.productCodes.findIndex(function(e){return e===a});n.productCodes[r]=t.code,n.refreshProductsDropDown(),n.disableEnable(e,c.ActionEnum.update,!1),n.messageService.message("'"+name+"' is updated in products."),n.actionIsSuccess.next(!1)},function(t){n.messageService.error(t),r.isDevMode()&&console.log(t),n.disableEnable(e,c.ActionEnum.update,!1)})},e.prototype.disableEnable=function(e,t,n){var i=this.productModels.find(function(t){return t._product.id==e}),o=i?i.waiting.getValue():null;switch(t){case c.ActionEnum.update:o.updating=n;break;case c.ActionEnum.delete:o.deleting=n;break;case c.ActionEnum.add:this.isAdding.next(n)}i&&i.waiting.next(o)},e.prototype.filterProducts=function(e,t){var n=[];return"name"===t?(n=e?this.productNames.filter(function(t){return new RegExp(e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"gi").test(t)}):this.productNames,n.length>0&&(this.filteredCode.source=this.getProductCode(n))):"code"===t&&(n=e?this.productCodes.filter(function(t){return new RegExp(e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"gi").test(t)}):this.productCodes,n.length>0&&(this.filteredName.source=this.getProductName(n))),n},e.prototype.getProductName=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.productModels.find(function(t){return t._product.code==e})._product.name)}),n},e.prototype.getProductCode=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.productModels.find(function(t){return t._product.name==e})._product.code)}),n},e.prototype.getProduct=function(e,t){var n;return"name"===t?n=this.productModels[this.productName_Code.findIndex(function(t){return e[0]===t})]:"code"===t&&(n=this.productModels[this.productName_Code.findIndex(function(t){return e[0]===t})-this.productNames.length]),n},e.prototype.showProductList=function(e,t){"name"===t?null===this.productModelCtrlName.value?this.productModelCtrlName.setValue(""):e.target.select():"code"===t&&(null===this.productModelCtrlCode.value?this.productModelCtrlCode.setValue(""):e.target.select())},i([r.ViewChild("autoNameInput"),o("design:type",Object)],e.prototype,"autoNameInput",void 0),e=i([r.Component({selector:"app-product-form",template:n(1179),styles:[n(1159)]}),o("design:paramtypes",["function"==typeof(t=void 0!==l.RestService&&l.RestService)&&t||Object,"function"==typeof(p=void 0!==u.MessageService&&u.MessageService)&&p||Object,"function"==typeof(m=void 0!==r.ElementRef&&r.ElementRef)&&m||Object])],e);var t,p,m}();t.ProductFormComponent=p},991:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(102),a=n(218),d=n(322),c=n(145),l=n(64),u=n(56),p=function(){function e(e,t){this.restService=e,this.messageService=t,this.isAdd=!0,this.action=new r.EventEmitter,this.hasCountingRuleError=!1,this.countingRuleError="",this.formTitle="",this.ae=c.ActionEnum,this.addIsDisable=!1,this.updateIsDisable=!1,this.deleteIsDisable=!1,this.measuringUnits=["Kg","gr","L","lb","oz","fl oz","mL","units","packs","dozens","barrels"],this.prepUnits=[]}return Object.defineProperty(e.prototype,"productModel",{get:function(){return this.tempProductModel},set:function(e){this.tempProductModel=e,this.ngOnInit()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;if(this.product=new a.Product,this.restService.get("unit?isBranch=false").subscribe(function(t){e.prepUnits=[];for(var n=0,i=t;n<i.length;n++){var o=i[n],r={id:o.uid,name:o.name};e.prepUnits.push(r)}},function(e){console.log(e)}),this.actionIsSuccess.subscribe(function(t){if(!0===t){if(!0===e.isAdd){e.product.id=-1,e.product.name="",e.product.code="",e.product.size=null,e.product.measuringUnit=null,e.product.prep_unit_id=null,e.product.minQty=-12345678,e.product.maxQty=null,e.product.price=null;for(var n in e.product.coefficients)e.product.coefficients[n]=1;e.product.countingRecursion=""}e.disabilityStatus()}},function(e){console.log(e.message)}),this.isAdd){this.isAdding.subscribe(function(t){e._isAdding=t,e.disabilityStatus()},function(e){console.log(e.message)}),this.formTitle="New Product",this.product.id=-1,this.product.name="",this.product.code="",this.product.size=null,this.product.measuringUnit=null,this.product.prep_unit_id=null,this.product.countingRecursion="",this.product.minQty=null,this.product.maxQty=null,this.product.price=null;for(var t in this.product.coefficients)this.product.coefficients[t]=1}else{this.productModel.waiting.subscribe(function(t){e._isUpdating=t.updating,e._isDeleting=t.deleting,e.disabilityStatus()},function(e){console.log(e.message)}),this.product.id=this.tempProductModel._product.id,this.product.name=this.tempProductModel._product.name,this.product.code=this.tempProductModel._product.code,this.product.size=this.tempProductModel._product.size,this.product.measuringUnit=this.tempProductModel._product.measuringUnit,this.product.prep_unit_id=this.tempProductModel._product.prep_unit_id,this.product.maxQty=this.tempProductModel._product.maxQty,this.product.minQty=this.tempProductModel._product.minQty,this.product.price=this.tempProductModel._product.price;for(var t in this.tempProductModel._product.coefficients)this.product.coefficients[t]=this.tempProductModel._product.coefficients[t];this.product.countingRecursion=this.tempProductModel._product.countingRecursion,this.formTitle=this.product.name}this.disabilityStatus()},e.prototype.actionEmitter=function(e){var t={type:e,data:this.product};this.action.emit(t)},e.prototype.disabilityStatus=function(){this.isAdd?this.addIsDisable=this.shouldDisableAddBtn():(this.deleteIsDisable=this.shouldDisableDeleteBtn(),this.updateIsDisable=this.shouldDisableUpdateBtn())},e.prototype.isCorrectFormData=function(){for(var e in this.product.coefficients)if(this.product.coefficients[e]<0&&(this.product.coefficients[e]=1),this.product.coefficients[e]>99999&&(this.product.coefficients[e]=99999),0===this.product.coefficients[e]||null===this.product.coefficients[e])return!1;return this.product.size<0&&(this.product.size=1),this.product.size>99999&&(this.product.size=99999),""!==this.product.name&&""!==this.product.code&&null!==this.product.size&&0!==this.product.size&&null!==this.product.measuringUnit&&null!==this.product.prep_unit_id&&!this.hasCountingRuleError},e.prototype.shouldDisableAddBtn=function(){return!0===this._isAdding||!this.isCorrectFormData()},e.prototype.shouldDisableUpdateBtn=function(){return!0===this._isUpdating||(!0!==this.productModel.isDifferent(this.product)||!this.isCorrectFormData())},e.prototype.shouldDisableDeleteBtn=function(){return!0===this._isDeleting},e.prototype.countingRuleErrorHandler=function(e){e?(this.messageService.warn(e),this.hasCountingRuleError=!0):this.hasCountingRuleError=!1,this.disabilityStatus()},i([r.Input(),o("design:type",Boolean)],e.prototype,"isAdd",void 0),i([r.Input(),o("design:type","function"==typeof(t=void 0!==s.Observable&&s.Observable)&&t||Object)],e.prototype,"isAdding",void 0),i([r.Input(),o("design:type","function"==typeof(p=void 0!==s.Observable&&s.Observable)&&p||Object)],e.prototype,"actionIsSuccess",void 0),i([r.Input(),o("design:type","function"==typeof(m=void 0!==d.ProductModel&&d.ProductModel)&&m||Object),o("design:paramtypes",["function"==typeof(h=void 0!==d.ProductModel&&d.ProductModel)&&h||Object])],e.prototype,"productModel",null),i([r.Output(),o("design:type",Object)],e.prototype,"action",void 0),e=i([r.Component({selector:"app-product-sub-form",template:n(1180),styles:[n(1160)]}),o("design:paramtypes",["function"==typeof(f=void 0!==l.RestService&&l.RestService)&&f||Object,"function"==typeof(v=void 0!==u.MessageService&&u.MessageService)&&v||Object])],e);var t,p,m,h,f,v}();t.ProductSubFormComponent=p},992:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(64),a=n(1166),d=n(56),c=n(530),l=n(219),u=n(2),p=function(){function e(e,t){this.restService=e,this.messageService=t,this.productModels=[],this.unitModels=[],this.branches=[],this.branchIdForProductReport=0,this.branchIdForDeliveryReport=0,this.deliveryReportBtnDisabled=!0,this.inventoryReportBtnDisabled=!0}return e.prototype.ngOnInit=function(){var e=this;this.restService.get("unit?isBranch=true").subscribe(function(t){e.unitModels=[];for(var n=0,i=t;n<i.length;n++){var o=i[n],r=new l.Unit;r.id=o.uid,r.name=o.name,r.username=o.username,r.password="",r.is_branch=o.is_branch,r.is_kitchen=o.is_kitchen;var s=new c.UnitModel(r);e.unitModels.push(s)}e.branches=e.unitModels.map(function(e){return e._unit}),e.branchesWithoutAllOption=e.branches.map(function(e){return e});var a=new l.Unit;a.id=0,a.name="All",e.branches.push(a)},function(t){e.messageService.error(t),r.isDevMode()&&console.log(t)})},e.prototype.loadDataForProductsReport=function(){var e=this,t=u().format("YYYY-MM-DD");0===this.branchIdForProductReport?this.restService.get("reports/all_products/").subscribe(function(n){e.downloadCSV(e.convertAllProductsToCSV(n),"all-products-"+t+".csv")},function(e){console.log(e.message)}):this.restService.get("reports/products/"+this.branchIdForProductReport).subscribe(function(n){var i=e.branches.find(function(t){return t.id===e.branchIdForProductReport}),o=i.name+"-products-"+t+".csv";e.downloadCSV(e.convertBranchProductsToCSV(n,i),o)},function(e){console.error(e.message)})},e.prototype.prepareInventoryCountingReport=function(){var e=this;if(!this.branchIdForInventoryReport)return void this.messageService.message("Please select a branch");this.restService.get("reports/inventory_counting/"+this.branchIdForInventoryReport).subscribe(function(t){var n=e.branches.find(function(t){return t.id===e.branchIdForInventoryReport}),i=u().format("YYYY-MM-DD"),o=n.name+"-inventory-counting-report-"+i+".csv";e.downloadCSV(e.wrapInventoryCountingReportResults(t),o)},function(e){console.log(e)})},e.prototype.wrapInventoryCountingReportResults=function(e){var t=["Product Name","Product Code","Last Counted","Inventory Count","Next Count Date","Estimate Stock Availability","Branch Name"],n=e.map(function(e){return{"Product Name":e.product_name,"Product Code":e.product_code,"Branch Name":e.branch_name,"Last Counted":u(e.last_counted).format("ddd DD MMM YYYY"),"Inventory Count":e.product_count,"Next Count Date":u(e.next_count_date).format("ddd DD MMM YYYY"),"Estimate Stock Availability":e.estimate}});return this.convertToCSV(t,n)},e.prototype.checkDisabilityStatus=function(){this.startDate&&this.endDate?this.deliveryReportBtnDisabled=!1:this.deliveryReportBtnDisabled=!0,this.branchIdForInventoryReport?this.inventoryReportBtnDisabled=!1:this.inventoryReportBtnDisabled=!0},e.prototype.prepareDeliveryReport=function(){var e=this;if(!this.startDate||!this.endDate)return void this.messageService.message("Please select a date range");var t=u(this.startDate),n=u(this.endDate);if(t.isAfter(n))return void this.messageService.warn("Selected date range is not valid");var i,o=t.format("YYYY-MM-DD"),r=n.format("YYYY-MM-DD");i=0===this.branchIdForDeliveryReport?"reports/delivery/"+o+"/"+r:"reports/branch_delivery/"+this.branchIdForDeliveryReport+"/"+o+"/"+r,this.restService.get(i).subscribe(function(t){e.downloadCSV(e.wrapDeliveryReportResults(t),"delivery-report-"+o+"-"+r+".csv")},function(e){console.log(e)})},e.prototype.wrapDeliveryReportResults=function(e){var t=["Product Name","Product Code","Delivered To","Date","Quantity","Product Price","Subtotal"],n=e.map(function(e){return{"Product Name":e.product_name,"Product Code":e.product_code,"Delivered To":e.branch_name,Date:u(e.counting_date).format("YYYY-MM-DD"),Quantity:e.real_delivery,"Product Price":e.product_price?"Â£"+e.product_price:"",Subtotal:e.subtotal?"Â£"+e.subtotal:0}}),i=e.reduce(function(e,t){return e+(t.subtotal?parseFloat(t.subtotal):0)},0);return n.push({"Product Name":"Total",Subtotal:"Â£"+i.toFixed(2)}),this.convertToCSV(t,n)},e.prototype.convertBranchProductsToCSV=function(e,t){e=e.filter(function(e){return e.prep_unit_is_kitchen===t.is_kitchen});var n=["Product Id","Name","Code","Size","Measuring Unit","Price","Preparing Unit Name","Min Quantity","Max Quantity","Usage","Is Overridden","Monday Coef.","Tuesday Coef.","Wednesday Coef.","Thursday Coef.","Friday Coef.","Friday Coef.","Saturday Coef.","Sunday Coef.","Inventory Counting Recursion"],i=e.map(function(e){return{"Product Id":e.pid,Name:e.name,Code:e.code,Size:e.size,"Measuring Unit":e.measuring_unit,Price:e.price?"Â£"+e.price.substring(1):"","Preparing Unit Name":e.prep_unit_name,"Min Quantity":e.default_min,"Max Quantity":e.default_max,"Is Overridden":void 0!==e.isOverridden&&e.isOverridden,"Inventory Counting Recursion":e.recursion,Usage:e.default_usage,"Monday Coef.":e.default_mon_multiple,"Tuesday Coef.":e.default_tue_multiple,"Wednesday Coef.":e.default_wed_multiple,"Thursday Coef.":e.default_thu_multiple,"Friday Coef.":e.default_fri_multiple,"Saturday Coef.":e.default_sat_multiple,"Sunday Coef.":e.default_sun_multiple}});return this.convertToCSV(n,i)},e.prototype.convertAllProductsToCSV=function(e){var t=["Product Id","Name","Code","Size","Measuring Unit","Price","Preparing Unit Name","Min Quantity","Max Quantity","Usage","Monday Coef.","Tuesday Coef.","Wednesday Coef.","Thursday Coef.","Friday Coef.","Friday Coef.","Saturday Coef.","Sunday Coef.","Inventory Counting Recursion"],n=e.map(function(e){return{"Product Id":e.pid,Name:e.name,Code:e.code,Size:e.size,"Measuring Unit":e.measuring_unit,Price:e.price?"Â£"+e.price.substring(1):"","Preparing Unit Name":e.prep_unit_name,"Min Quantity":e.default_min,"Max Quantity":e.default_max,Usage:e.default_usage,"Monday Coef.":e.default_mon_multiple,"Tuesday Coef.":e.default_tue_multiple,"Wednesday Coef.":e.default_wed_multiple,"Thursday Coef.":e.default_thu_multiple,"Friday Coef.":e.default_fri_multiple,"Saturday Coef.":e.default_sat_multiple,"Sunday Coef.":e.default_sun_multiple,"Inventory Counting Recursion":e.recursion.replace(/,/g," - ")}});return this.convertToCSV(t,n)},e.prototype.convertToCSV=function(e,t){var n,i,o,r;return o=",",r="\n",n="",n+=e.join(o),n+=r,t.forEach(function(t){i=0,e.forEach(function(e){i>0&&(n+=o),n+=void 0!==t[e]?t[e]:"",i++}),n+=r}),n},e.prototype.downloadCSV=function(e,t){if(void 0===e)return void console.error("no data set for creating file");var n=new Blob([e],{type:"text/csv;charset=utf-8"});a.saveAs(n,t)},e=i([r.Component({selector:"app-reports",template:n(1181),styles:[n(1161)]}),o("design:paramtypes",["function"==typeof(t=void 0!==s.RestService&&s.RestService)&&t||Object,"function"==typeof(p=void 0!==d.MessageService&&d.MessageService)&&p||Object])],e);var t,p}();t.ReportsComponent=p},993:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=function(){function e(){this._days=[],this.daysChange=new r.EventEmitter,this.calDays=[]}return Object.defineProperty(e.prototype,"days",{get:function(){return this._days},set:function(e){this._days=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){for(var e=0;e<5;e++){for(var t=[],n=0;n<6||4===e&&n<7;n++){var i=6*e+n+1;this.reverse&&(i=31-i),t.push(i)}this.calDays.push(t)}},e.prototype.monthDaysChange=function(e){var t=e.value;this.reverse&&t++,e.source.checked?-1===this.days.indexOf(t)&&this.days.push(t):-1!==this.days.indexOf(t)&&this.days.splice(this.days.indexOf(t),1),this.daysChange.emit(this._days)},i([r.Input(),o("design:type",Array),o("design:paramtypes",[Array])],e.prototype,"days",null),i([r.Output(),o("design:type",Object)],e.prototype,"daysChange",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"reverse",void 0),e=i([r.Component({selector:"app-monthday",template:n(1182),styles:[n(1162)]}),o("design:paramtypes",[])],e)}();t.MonthdayComponent=s},994:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(153),a=n(2),d=function(){function e(){this.RRuleStrChange=new r.EventEmitter,this.freqs=["Daily","Weekly","Monthly","Never"],this.freqsConst=[s.RRule.DAILY,s.RRule.WEEKLY,s.RRule.MONTHLY,null],this.freqsName=["day","week","month"],this.weekdays=["Mon","Tue","Wed","Thr","Fri","Sat","Sun"],this.weekdaysConst=[s.RRule.MO,s.RRule.TU,s.RRule.WE,s.RRule.TH,s.RRule.FR,s.RRule.SA,s.RRule.SU],this.weekpos=[1,2,3,4,-1],this.weekposName=["First","Second","Third","Fourth","Last"],this.byweekday=[],this.text="",this.showWeekdays=!1,this.showMonthOptions=!1,this.monthlyInputMode="",this.monthDaysOption=[],this.monthDaysPast=[],this.monthDaysRemained=[],this.bymonthday=[],this.bysetpos=[],this.freq=""}return Object.defineProperty(e.prototype,"RRuleStr",{get:function(){return this._rstr},set:function(e){""!==e&&this._rstr||(this._rstr=e,this.ngOnInit(),this.text="")},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.rule=s.RRule.fromString(this.RRuleStr),this.options=this.rule.options,this.freq=this.options.freq,this.options.bysetpos&&(this.bysetpos=this.options.bysetpos),this.options.bymonthday&&(this.bymonthday=this.options.bymonthday),this.options.byweekday&&this.options.byweekday.length?this.byweekday=this.options.byweekday.map(function(t){return e.weekdaysConst[t]}):this.options.byweekday&&(this.byweekday=this.options.byweekday),this.bysetpos.length>0?this.monthlyInputMode="week":this.bymonthday.length>0&&(this.monthlyInputMode="month"),this.calcPastOrRemained()},e.prototype.onChange=function(){try{for(var e in this.options)this.options[e]&&0!==this.options[e].length&&-1===["bynmonthday","bynweeday","bynsetpos","byhour","byminute","bysecond"].indexOf(e)||delete this.options[e];this.options.freq!==this.freq?(this.options.freq=this.freq,this.options.freq===s.RRule.DAILY?(delete this.options.byweekday,delete this.options.bysetpos,this.bysetpos=[],this.byweekday=[],delete this.options.bymonthday,this.bymonthday=[],this.monthDaysPast=[],this.monthDaysRemained=[]):this.options.freq===s.RRule.WEEKLY?(delete this.options.bysetpos,this.bysetpos=[],delete this.options.bymonthday,this.bymonthday=[],this.monthDaysPast=[],this.monthDaysRemained=[]):this.options.freq===s.RRule.MONTHLY&&(delete this.options.byweekday,delete this.options.bysetpos,"month"===this.monthlyInputMode?(this.bymonthday=[a().get("D")],this.options.bymonthday=this.bymonthday):(delete this.options.bymonthday,this.bymonthday=[]),this.bysetpos=[],this.byweekday=[])):this.options.freq=this.freq,this.options.bymonth=[],this.rule=new s.RRule(this.options),this.rule.options.bymonth=[],this.calcPastOrRemained(),this.emitChange(),this.showMonthOptions=this.options.freq===s.RRule.MONTHLY,this.showWeekdays=this.options.freq===s.RRule.WEEKLY||this.options.freq===s.RRule.MONTHLY&&"week"===this.monthlyInputMode,this.showWeekdays||(this.options.byweekday=[]),this.populateNextOccurrences()}catch(e){console.log(e)}},e.prototype.calcPastOrRemained=function(){this.monthDaysPast=this.bymonthday.filter(function(e){return e>0}),this.monthDaysPast.length&&this.monthDaysOption.indexOf("past")&&this.monthDaysOption.push("past"),this.monthDaysRemained=this.bymonthday.filter(function(e){return e<0}),this.monthDaysRemained.length&&this.monthDaysOption.push("remained"),this.showMonthDaysPast=-1!==this.monthDaysOption.indexOf("past"),this.showMonthDaysRemained=-1!==this.monthDaysOption.indexOf("remained")},e.prototype.emitChange=function(){this.RRuleStrChange.emit({value:this.rule.options.freq?this.rule.toString():"",error:this.validate()})},e.prototype.populateNextOccurrences=function(){if(this.rule.options.freq){var e=new Date,t=a(e).add(366,"d").toDate();this.text=this.rule.between(e,t).map(function(e){return a(e).format("ddd DD-MMM-YY")}).splice(0,10).concat([this.rule.toString()]).join("\n")}else this.text=""},e.prototype.validate=function(){var e="";return this.options.freq!==s.RRule.WEEKLY||this.byweekday.length?this.rule.options.freq===s.RRule.MONTHLY&&"week"===this.monthlyInputMode?this.bysetpos.length&&!this.byweekday.length?e="choose weekdays":this.options.freq===s.RRule.MONTHLY&&this.byweekday.length&&!this.bysetpos.length?e="choose week numbers in month":this.byweekday.length||this.bysetpos.length||(e="choose week numbers and weekdays"):this.rule.options.freq===s.RRule.MONTHLY&&"month"===this.monthlyInputMode&&(this.showMonthDaysPast&&!this.monthDaysPast.length?e="No days past month is chosen":this.showMonthDaysRemained&&!this.monthDaysRemained.length?e="No days from month remainder is chosen":this.showMonthDaysRemained||this.showMonthDaysPast||(e="choose a day")):e="choose a weekday",e},e.prototype.onMonthlyInputModeChange=function(e){this.onChange()},e.prototype.byweekdayChange=function(e){this.multipleChoice(e,"byweekday"),this.options.byweekday=this.byweekday,delete this.options.bymonthday,this.onChange()},e.prototype.monthDaysPastOrRemainedChange=function(e){this.multipleChoice(e,"monthDaysOption"),-1===this.monthDaysOption.indexOf("past")&&(this.monthDaysPast=[],this.bymonthday=this.bymonthday.filter(function(e){return e<0})),-1===this.monthDaysOption.indexOf("remained")&&(this.monthDaysRemained=[],this.bymonthday=this.bymonthday.filter(function(e){return e>0})),this.options.bymonthday=this.bymonthday,this.calcPastOrRemained(),this.onChange()},e.prototype.monthDaysRemainedChange=function(e){this.monthDaysRemained=e,this.bymonthday=this.bymonthday.filter(function(e){return e>0}).concat(this.monthDaysRemained.map(function(e){return-e})),this.options.bymonthday!==this.bymonthday&&(this.options.bymonthday=this.bymonthday,this.onChange())},e.prototype.monthDaysPastChange=function(e){this.monthDaysPast=e,this.bymonthday=this.bymonthday.filter(function(e){return e<0}).concat(this.monthDaysPast),this.options.bymonthday!==this.bymonthday&&(this.options.bymonthday=this.bymonthday,this.onChange())},e.prototype.weekposChange=function(e){this.multipleChoice(e,"bysetpos"),this.options.bysetpos=this.bysetpos,delete this.options.bymonthday,this.onChange()},e.prototype.multipleChoice=function(e,t){e.source.checked?-1===this[t].indexOf(e.value)&&this[t].push(e.value):-1!==this[t].indexOf(e.value)&&this[t].splice(this[t].indexOf(e.value),1)},i([r.Input(),o("design:type",Object),o("design:paramtypes",[Object])],e.prototype,"RRuleStr",null),i([r.Output(),o("design:type",Object)],e.prototype,"RRuleStrChange",void 0),e=i([r.Component({selector:"app-rrule",template:n(1183),styles:[n(1163)]}),o("design:paramtypes",[])],e)}();t.RRuleComponent=d},995:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(420),a=n(102),d=n(145),c=n(219),l=function(){function e(){this.isAdd=!0,this.isAdding=!1,this.action=new r.EventEmitter,this.unit=new c.Unit,this.ae=d.ActionEnum,this.formTitle="",this.addIsDisable=!0,this.updateIsDisable=!0,this.deleteIsDisable=!1}return e.prototype.ngOnInit=function(){var e=this;this.actionIsSuccess.subscribe(function(t){!0===t&&(!0===e.isAdd&&(e.unit.id=-1,e.unit.name="",e.unit.username="",e.unit.password="",e.unit.is_branch=null,e.unit.is_kitchen=null),e.disabilityStatus())},function(e){console.log(e)}),this.isAdd?(this.formTitle="New Unit",this.unit.id=-1,this.unit.name="",this.unit.username="",this.unit.password="",this.unit.is_branch=null,this.unit.is_kitchen=null):(this.unit.id=this.unitModel._unit.id,this.unit.name=this.unitModel._unit.name,this.unit.username=this.unitModel._unit.username,this.unit.is_branch=this.unitModel._unit.is_branch,this.unit.is_kitchen=this.unitModel._unit.is_kitchen,this.unit.password="",this.unit.is_branch?this.formTitle=this.unit.name+" - Branch":this.formTitle=this.unit.name+" - Prep Unit")},e.prototype.disabilityStatus=function(){this.isAdd?this.addIsDisable=this.shouldDisableAddBtn():(this.deleteIsDisable=this.shouldDisableDeleteBtn(),this.updateIsDisable=this.shouldDisableUpdateBtn())},e.prototype.actionEmitter=function(e){var t={type:e,data:this.unit};this.action.emit(t)},e.prototype.isCorrectFormData=function(e){return(!0!==e||""!==this.unit.password)&&(""!==this.unit.name&&""!==this.unit.username&&null!==this.unit.is_branch)},e.prototype.shouldDisableAddBtn=function(){return!0===this.isAdding||!this.isCorrectFormData(!0)},e.prototype.shouldDisableUpdateBtn=function(){return!0===this.unitModel.waiting.updating||(!0!==this.unitModel.isDifferent(this.unit)||!this.isCorrectFormData(!1))},e.prototype.shouldDisableDeleteBtn=function(){return!0===this.unitModel.waiting.deleting},i([s.Input(),o("design:type",Object)],e.prototype,"isAdd",void 0),i([s.Input(),o("design:type",Object)],e.prototype,"isAdding",void 0),i([s.Input(),o("design:type",Object)],e.prototype,"unitModel",void 0),i([s.Input(),o("design:type","function"==typeof(t=void 0!==a.Observable&&a.Observable)&&t||Object)],e.prototype,"actionIsSuccess",void 0),i([s.Output(),o("design:type",Object)],e.prototype,"action",void 0),e=i([r.Component({selector:"app-sub-form",template:n(1184),styles:[n(1164)]}),o("design:paramtypes",[])],e);var t}();t.SubFormComponent=l},996:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(0),s=n(102),a=n(530),d=n(145),c=n(219),l=n(64),u=n(56),p=function(){function e(e,t){this.restService=e,this.messageService=t,this.unitModels=[],this.isAdding=!1,this.actionIsSuccess=new s.BehaviorSubject(!1)}return e.prototype.ngOnInit=function(){var e=this;this.restService.get("unit").subscribe(function(t){e.unitModels=[];for(var n=0,i=t;n<i.length;n++){var o=i[n],r=new c.Unit;r.id=o.uid,r.name=o.name,r.username=o.username,r.password="",r.is_branch=o.is_branch,r.is_kitchen=o.is_kitchen;var s=new a.UnitModel(r);e.unitModels.push(s)}e.sortUnitModelList()},function(t){e.messageService.error(t),r.isDevMode()&&console.log(t)})},e.prototype.doClickedAction=function(e){var t=e.type,n=e.data;switch(this.disableEnable(n.id,t,!0),t){case d.ActionEnum.add:this.addUnit(n);break;case d.ActionEnum.delete:this.deleteUnit(n.id);break;case d.ActionEnum.update:this.updateUnit(n.id,n)}},e.prototype.addUnit=function(e){var t=this,n=e.name;this.restService.insert("unit",e).subscribe(function(i){e.id=i,e.password="";var o=new a.UnitModel(e);t.actionIsSuccess.next(!0),t.unitModels.push(o),t.sortUnitModelList(),t.disableEnable(e.id,d.ActionEnum.add,!1),t.actionIsSuccess.next(!1),t.messageService.message("'"+n+"' is added to units as a new "+(e.is_branch?"Branch":"Prep Unit"))},function(n){t.messageService.error(n),r.isDevMode()&&console.log(n),t.disableEnable(e.id,d.ActionEnum.add,!1)})},e.prototype.deleteUnit=function(e){var t=this;this.restService.delete("unit",e).subscribe(function(n){t.unitModels=t.unitModels.filter(function(t){return t._unit.id!==e}),t.messageService.message("Unit is deleted.")},function(n){t.messageService.error(n),r.isDevMode()&&console.log(n),t.disableEnable(e,d.ActionEnum.delete,!1)})},e.prototype.updateUnit=function(e,t){var n=this,i=this.unitModels.findIndex(function(t){return t._unit.id==e});this.restService.update("unit",e,this.unitModels[i].getDifferentValues(t)).subscribe(function(o){n.actionIsSuccess.next(!0),t.password="",n.unitModels[i].setUnit(t),n.sortUnitModelList(),n.disableEnable(e,d.ActionEnum.update,!1),n.messageService.message(t.name+" ("+(t.is_branch?"branch":"prep unit")+") is updated."),n.actionIsSuccess.next(!1)},function(t){n.messageService.error(t),r.isDevMode()&&console.log(t),n.disableEnable(e,d.ActionEnum.update,!1)})},e.prototype.disableEnable=function(e,t,n){var i=this.unitModels.find(function(t){return t._unit.id==e});switch(t){case d.ActionEnum.update:i.waiting.updating=n;break;case d.ActionEnum.delete:i.waiting.deleting=n;break;case d.ActionEnum.add:this.isAdding=n}},e.prototype.sortUnitModelList=function(){this.unitModels.sort(function(e,t){return!1===e._unit.is_branch&&!0===t._unit.is_branch?-1:!0===e._unit.is_branch&&!1===t._unit.is_branch?1:e._unit.name>t._unit.name?1:e._unit.name<t._unit.name?-1:0})},e=i([r.Component({selector:"app-unit-form",template:n(1185),styles:[n(1165)]}),o("design:paramtypes",["function"==typeof(t=void 0!==l.RestService&&l.RestService)&&t||Object,"function"==typeof(p=void 0!==u.MessageService&&u.MessageService)&&p||Object])],e);var t,p}();t.UnitFormComponent=p},997:function(e,t,n){"use strict";t.environment={production:!0}},998:function(e,t,n){"use strict";n(1012),n(1005),n(1001),n(1007),n(1006),n(1004),n(1003),n(1011),n(1e3),n(999),n(1009),n(1002),n(1010),n(1008),n(1013),n(1469)}},[1470]);